{"id":"e531dde6-a467-4882-a3d1-95c4c54f0a1f","version":"0.2.018","icon":"other","splash":"other","splashdata":{"img":"accuserv-splash.png","bg":"#ffffff"},"settings":{"router":{"mode":"single","animation":"off"},"theme":"default","push-notifications":{"android":{"enabled":false},"ios":{"enabled":false},"wp":{"enabled":false}},"provisioning":{"enabled":false,"manifest":"","poll":2,"manual":false,"wifionly":true},"crashReporting":{"enabled":false,"androidEnabled":false,"iosEnabled":false,"splunkAndroidApiKey":"","splunkIosApiKey":"","splunkExtraData":""},"kioskMode":{"enabled":false},"loading-message":false,"logging":{"enabled":false,"bufferFrequency":100,"defaultRootLogLevel":"error","defaultMaxFileSizeKilobyte":1000,"defaultMaxFiles":5,"appEnabled":true,"appUseDefault":true,"appRootLogLevel":"error","appMaxFileSizeKilobyte":1000,"appMaxFiles":5,"clientEnabled":true,"clientUseDefault":true,"clientRootLogLevel":"error","clientMaxFileSizeKilobyte":1000,"clientMaxFiles":5,"nativeEnabled":true,"nativeUseDefault":true,"nativeRootLogLevel":"error","nativeMaxFileSizeKilobyte":1000,"nativeMaxFiles":5},"plugins":{"builtIn":{"cordova-plugin-whitelist@1.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-battery-status@1.1.2":{"override":false,"used":false,"enabled":false},"cordova-plugin-console@1.0.3":{"override":false,"used":true,"enabled":true},"cordova-plugin-contacts@2.1.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-device@1.1.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-device-motion@1.2.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-device-orientation@1.0.3":{"override":false,"used":false,"enabled":false},"cordova-plugin-file@4.2.0":{"override":false,"used":true,"enabled":true},"cordova-plugin-geolocation@2.2.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-globalization@1.0.3":{"override":false,"used":true,"enabled":true},"commontime-cordova-plugin-inappbrowser@1.6.2":{"override":false,"used":false,"enabled":false},"cordova-plugin-network-information@1.2.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-splashscreen@3.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-vibration@2.1.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-statusbar@1.0.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-camera@2.3.1":{"override":false,"used":true,"enabled":true},"phonegap-plugin-barcodescanner@6.0.4":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.thumbnail@1.4.8":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.fileimporter@1.0.0":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.beacon@1.0.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.notification@1.0.11":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.audio@0.9.10":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.media-properties@1.2.11":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.splitscreen@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.preferences@1.0.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.authentication@1.0.8":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.urlhandler@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.securesettings@1.0.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.geofence@0.5.0":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-transfer@1.5.5":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.public.provisioning@0.0.13":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.insomnia@0.0.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.splunk-mint@1.0.3":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.kiosk@1.0.11":{"override":false,"used":false,"enabled":false},"cordova-android-movetasktoback@0.1.3":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.logging@1.0.20":{"override":false,"used":true,"enabled":true},"cordova-plugin-email-composer":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.public.messaging@0.0.38":{"override":false,"used":true,"enabled":true}},"customPlugins":{}}},"language":{"defaultLocale":"en_GB","initialLanguage":"","useDeviceLocale":true},"metadata":{"applicationkey":"9876543210","googleapikey":"AIzaSyBLm-X17nxieJiS66S0wxHqHqDcZ38_Qww"},"name":"AccuMobile","packageId":"com.commontime.accuserv.ResponsiveRepairs","schemaVersion":22,"minimumStudioVersion":"3.1.0","pages":[{"start":true,"name":"Login","config":[],"content":[{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"imgLogo","type":"media","item-type":"image-viewer","_auto_id_":"a05e6594-182b-46ca-9168-6cdd46b73703","scaleImage":false,"maxWidth":200,"maxHeight":200,"expressions":{},"fileName":"accuserv-logo.png","classes":"header-image","actions":[]},{"name":"htmlLoginPrompt","type":"content","item-type":"html","_auto_id_":"a661fd56-3ef2-42a9-84d9-73831eec6e51","content":"<p class=\"p-text\">Please enter your Username and Password and tap Login to proceed.</p>","expressions":{}},{"name":"Username","type":"user-input","item-type":"text","_auto_id_":"a0cd3700-8e4a-4a2b-8fe3-c6ba1c37567a","label":"","required":true,"multiline":false,"debounce":250,"expressions":{},"description":"","placeholder":"Username","validators":[],"actions":[],"classes":"credentials-input","message":"Please enter your Username"},{"name":"Password","type":"user-input","item-type":"password","_auto_id_":"8e830966-5454-432e-8750-ba4c66dc4e25","label":"","required":true,"message":"Please enter your Password","expressions":{},"placeholder":"Password","classes":"credentials-input"},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"739e25ce-abfa-47d4-9653-5889d0e43101","extends":{"type":"area","item-type":"row"},"content":[{"name":"btnLogin","type":"button","item-type":"button","_auto_id_":"68464c45-5713-4c9f-a905-135d3aba68f4","content":"Login","theme":"default","expressions":{"disabled":"$form.invalid"},"classes":"login-button","actions":[{"event":"click","type":"call-actionflow","data":{"name":"Login"},"_auto_id_":"9e20d75c-8399-4547-9fcd-ec992d0dbeee"}]}],"expressions":{}},{"name":"htmlApplicationDetails","type":"content","item-type":"html","_auto_id_":"f90969fb-2934-4a34-9489-cf805fe4259a","content":"<div class=\"app-title\">AccuMobile<span class=\"version\">Version: {{'$store.schema.version' | store}}</span></div>","expressions":{}},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"cf76a6af-5a1e-4b46-8c07-2afbd2c50003","attributes":{"message":"Attempting to log you in..."},"expressions":{},"actions":[]}],"_auto_id_":"8fb306b4-c75c-4242-a5bf-b67a3ecd97ec"}]},{"start":false,"name":"VehicleChecks","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"47350d02-ef8f-4bec-9a16-1b0006d667cc","content":"<h4 class=\"title\">Vehicle Checks</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"6758d57d-bd11-416d-bbac-7cafbebe90bb","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"VehicleChecks","componentInstanceId":"e9b1cd15-da4e-4794-988b-f49da40c9f41","function":"open"},"_auto_id_":"075452e9-b3d6-46b0-878d-1a819ea8cc9c"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"9158f33e-c7cf-495c-8277-ce4dd0cc2784","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"07ff5fab-69ca-468b-a226-623782060f14"}]},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"897b3fe3-4a2c-4a9c-a324-d4e93e79dbd5","content":"Logout","theme":"default","expressions":{},"left-icon":"fa-sign-out","actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"92608814-c406-4852-9afe-f5924b0506fb"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"e9b1cd15-da4e-4794-988b-f49da40c9f41","attributes":{},"expressions":{}}],"_auto_id_":"76a446d2-9bf5-406d-b0e8-d0a51dfe0f89","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"vehicleRegistration","type":"user-input","item-type":"text","_auto_id_":"b5552f82-27d5-43c9-9288-c95aa91a7c3d","label":"Vehicle Registration Number","required":false,"multiline":false,"debounce":250,"message":"Please enter a Vehicle Registration Number","expressions":{"show":"false"},"validators":[],"actions":[],"placeholder":"E.g. TE66 EST","classes":"vehiclecheck-reg","default":""},{"name":"oilCheckOk","type":"choice","item-type":"radio","_auto_id_":"516ef751-94b2-4b2b-bbb9-7e5659949091","label":"Oil checked and OK?","required":true,"options":[{"label":"Yes","value":"1"},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{},"actions":[],"validators":[],"message":"This is a required field","classes":"cb-bias-last"},{"name":"waterCheckOk","type":"choice","item-type":"radio","_auto_id_":"7d571dc4-060c-4143-b8e4-0e5313e83101","label":"Water checked and OK?","required":true,"options":[{"label":"Yes","value":"1"},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{},"actions":[],"validators":[],"message":"This is a required field","classes":"cb-bias-last"},{"name":"tyresCheckOk","type":"choice","item-type":"radio","_auto_id_":"ed023ee2-b96e-41fe-8f66-d3295958ab19","label":"Tyres checked and OK?","required":true,"options":[{"label":"Yes","value":"1"},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{},"actions":[],"validators":[],"message":"This is a required field","classes":"cb-bias-last"},{"name":"lightsCheckOk","type":"choice","item-type":"radio","_auto_id_":"c7678af8-dcf1-46f4-ac3a-cc074f8915c0","label":"Lights checked and OK?","required":true,"options":[{"label":"Yes","value":"1"},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{},"actions":[],"validators":[],"message":"This is a required field","classes":"cb-bias-last"},{"name":"html_vehiclecheckfailed","type":"content","item-type":"html","_auto_id_":"128cc254-1f2c-4261-9f04-61e61a3e98aa","content":"<div onclick=cti.fnCallSupervisor() style=\"width:100%;text-align:center;\"><p class=\"fa supervisor\"></p></div>\n<h4 class=\"check-fail-header\">One or more of the above checks has failed. Please call your Supervisor by tapping on the icon above before continuing...</h4>","expressions":{"show":"$store.pages.VehicleChecks.oilCheckOk == \"0\" || $store.pages.VehicleChecks.waterCheckOk == \"0\" || $store.pages.VehicleChecks.tyresCheckOk == \"0\" || $store.pages.VehicleChecks.lightsCheckOk == \"0\""}},{"name":"vehicleOdometer","type":"user-input","item-type":"number","_auto_id_":"02d9233b-bb4d-467b-854a-b7733c5d5688","label":"Vehicle Mileage","required":true,"decimals":2,"expressions":{},"message":"Please enter the vehicle's mileage","actions":[],"placeholder":"E.g. 10000","classes":"vehiclecheck-reg","validators":[]},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"b52f003b-e635-4422-963a-b8286c8fa87c","extends":{"type":"area","item-type":"row"},"content":[{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"2f080d69-ca58-4721-9a16-b85effe39adc","attributes":{},"expressions":{}},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"7e354b61-764f-4bfb-9fd7-d4f0b70a5ef0","content":"Complete","theme":"default","expressions":{"disabled":"$form.invalid || $store.pages.VehicleChecks.oilCheckOk == \"0\" || $store.pages.VehicleChecks.waterCheckOk == \"0\" || $store.pages.VehicleChecks.tyresCheckOk == \"0\" || $store.pages.VehicleChecks.lightsCheckOk == \"0\""},"classes":"confirm-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var enteredOdo = cti.store.pages.VehicleChecks.vehicleOdometer;\nvar lastOdo = cti.store.api.AccuServ.initialise.vehicleOdometer;\n\nif(enteredOdo < lastOdo) {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\": \"app_odometer\",\n      \"item-type\": \"app-notification\",\n      \"style\": \"Warning\",\n      \"title\": \"Warning!\",\n      \"text\": \"Input mileage can not be less than the last recorded reading.\"\n    }\n  );\n} else if(enteredOdo === 0) {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\": \"app_odometer\",\n      \"item-type\": \"app-notification\",\n      \"style\": \"Warning\",\n      \"title\": \"Warning!\",\n      \"text\": \"Input mileage can not be 0.\"\n    }\n  );\n} else {\n  delete cti.store.saveActionPayload;\n  \n  cti.utils.callAction('call-actionflow', { \"name\": \"StaticData\" });\n  cti.utils.callAction('call-actionflow', { \"name\": \"StartOfDay\" });\n  cti.utils.callAction('call-actionflow', { \"name\": \"GetJobList\" });\n}"},"_auto_id_":"4c10a96a-6620-4131-bcb0-5ed85d9f5aff","actions":[]}]}],"expressions":{}}],"_auto_id_":"54285d21-7182-4fb1-abe2-741c54093052","expressions":{}}]},{"start":false,"name":"JobList","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"d6ebf8f1-e766-458f-b122-13e4232c4824","content":"<h4 class=\"title\">Job List</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"d3ff9606-4f43-48ce-b6ce-273178a1132f","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"JobsList","componentInstanceId":"97135165-829c-46db-bd4a-7d7aa39f16fd","function":"open"},"_auto_id_":"1caa6383-1dd4-4445-843b-e0ac1a42cb8d"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"100017e7-751f-46d2-a91e-855bc105ba5e","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"f918021d-03e6-4fef-af0b-877c12ecca7c"}]},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"bde01553-ee2b-4237-a207-1285cd0ae75a","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"498fb643-ba17-48fe-af9b-babe8c0b488f"}]},{"name":"btnPauseTask","type":"button","item-type":"button","_auto_id_":"608335ac-252b-444d-82f5-4522df104393","content":"Pause Task","theme":"default","expressions":{},"left-icon":"fa-pause","actions":[{"event":"click","type":"go-to-page","data":{"name":"PauseTask","isConditional":false},"_auto_id_":"f8abb3ad-eaf5-42cd-be99-00fd36cba291"}]},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"2f56f0f6-ced8-4fc9-bf82-6b42b6cf4d3f","content":"Logout","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"c14106cc-e94b-432a-9551-935263ee71c0"}],"left-icon":"fa-sign-out"}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"97135165-829c-46db-bd4a-7d7aa39f16fd","attributes":{},"actions":[],"expressions":{}}],"_auto_id_":"6843dd9b-a3e0-4ddb-852e-53290fd74611","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"noJobsDisplay","type":"content","item-type":"html","_auto_id_":"5bd37f05-21c1-41c4-bfef-d5dd833a1284","content":"<h4 style=\"text-align:center;\">You have 0 Jobs</h4><p style=\"text-align:center;\">Currently you do not have any Jobs in your Job List. Please contact your Supervisor or re-sync your list by tapping the below icon.</p>\n<div style=\"color:#0072C6;text-align:center;font-size:30pt;width:100%\" onclick=\"cti.utils.callAction('call-actionflow',{'name':'GetJobList'});\">\n\t<i class=\"fa fa-refresh\"></i>\n</div>","expressions":{"show":"$store.jobs.jobList.length === 0"}},{"name":"ListSearcher","type":"component","item-type":"web-component","content":[],"componentId":"d9a7540d-769f-4e02-adb9-2148284a8208","_auto_id_":"e7c50a14-f862-4f15-9d4c-14c65ebc6ab2","attributes":{"sourceObjectArrayName":"cti.store.jobs.jobList","minCharacters":1,"displayArrayName":"cti.store.jobs.jobListResults","displayListIfNoSearch":1},"expressions":{"show":"$store.jobs.jobList.length > 0"},"actions":[]},{"name":"list_joblist","type":"content","item-type":"list","_auto_id_":"c1d84ec7-d5c8-4056-8b5d-2bff5d377102","search":"","classes":"","expressions":{},"model":"$store.jobs.jobListResults","theme":"bootstrap","actions":[{"event":"click","type":"call-function","data":{"name":"fnSelectJob","params":{"jobid":"{{$data.$item.aAccuServJobID.iJobEventNoKey}}"}},"_auto_id_":"36326077-0c96-4a3f-8420-51a61b4835b1"}],"dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"list_joblist_html","_auto_id_":"42827e43-fcdd-4cc7-b033-85faf582b006","content":"<div id=\"{{$data.$item.aAccuServJobID.iJobEventNoKey}}\" style=\"display:inline-block;width:100%\"> \n\t<div class=\"details\">\n\t\t<div class=\"description\">{{$data.$item.sProblemDetail}}</div>\n\t\t<div class=\"floatright\">{{$data.$item.dAttendOnDate}}</div>\n\t</div>\n\t<div class=\"info\">\n  \t\t<div class=\"address\">{{$data.$item.sHouseNo}}, {{$data.$item.sAddress1}}, {{$data.$item.sPostcode}}</div>\n  \t\t<div class=\"floatright fa {{$data.$item.sProblemSummary}}\"></div>\n\t</div>\n</div>"}]},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"94b2f6ce-3f94-471a-a455-c4c284eef5a1","attributes":{},"expressions":{}}],"_auto_id_":"1f45f944-290f-4928-89ac-bc4c19827289"}]},{"start":false,"name":"TenantDetails","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"cd1cc12b-57e4-4913-90f0-cfa8ec77a69b","content":"<h4 class=\"title\">Tenant Details</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"903688de-5a6f-474d-bb0f-221c75ce67b5","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"TenantDetails","componentInstanceId":"c326b735-7c6d-4e7e-a871-1fa80e9c1e2d","function":"open"},"_auto_id_":"fb9b5c37-2fb2-442e-8af9-47fa8040b4d4"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"fd336526-5922-4aff-acb6-df0c549c35da","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"a8d1999d-1dde-4df7-81df-1cdd16ac661c"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"fecc3f67-530b-4c3d-a259-a9ed155e5859","content":"Job List","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"663f2465-3a2c-4ba0-a171-7b970899b232"}],"left-icon":"fa-list"},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"93d0b620-b2a5-49b1-bf09-ac5b86e2a428","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"d92a05c9-608b-420f-9d3a-ca52b9bd7ccf"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"94f2abeb-3492-4fb8-99e5-5ff4161d5acd","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-component-function","data":{"page":"TenantDetails","componentInstanceId":"72217a43-8044-4ed8-8bdf-f171a9bf1244","function":"show"},"_auto_id_":"f4b19356-dbe7-4e6e-8aae-8dfd024d61fe"},{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"a391468f-9aae-4a7d-a931-5370d3960958"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"29d7479e-9bab-460b-8584-087e74a59f2b","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"3f470fad-1fe7-499d-ba44-cf2ee6237940"}]},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"16ade345-8ee9-4e0d-8050-77f9ff4ad805","content":"Logout","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"fb033bcf-c2e3-4e3d-aacf-3745ca16c9a7"}],"left-icon":"fa-sign-out"},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"72217a43-8044-4ed8-8bdf-f171a9bf1244","attributes":{},"expressions":{},"actions":[]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"c326b735-7c6d-4e7e-a871-1fa80e9c1e2d","attributes":{},"expressions":{}}],"_auto_id_":"49889c61-0a4c-4245-8639-e54d69be7d37","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"html_tenantdetails","type":"content","item-type":"html","_auto_id_":"339b35b3-f180-461e-9e48-779d9d6a7250","content":"<p style=\"font-weight:100;\">Tenant Name: <span style=\"font-weight:bold;\">{{'$store.jobs.selectedJob.aPropertyDetail.sTenant_Name'|store}}</span></p>\n<p style=\"font-weight:100;\">Attend On: <span style=\"font-weight:bold;\">{{'$store.jobs.selectedJob.dAttendOnDate'|store}}</span></p>\n<p style=\"font-weight:100;\">Appointment Slot: <span style=\"font-weight:bold;\">{{'$store.jobs.selectedJob.sAssignedType'|store}}</span></p>\n<hr>\n<h5 style=\"font-weight:bold;\">Address</h5>\n<p>{{'$store.jobs.selectedJob.aPropertyDetail.sAddress_1'|store}}</p>\n<p>{{'$store.jobs.selectedJob.aPropertyDetail.sAddress_4'|store}}</p>\n<p>{{'$store.jobs.selectedJob.aPropertyDetail.sPostcode'|store}}</p>\n<hr>\n<div style=\"text-align:center;width: 100%;\">\n  <div style=\"font-weight:bold;margin-bottom: 3vh;margin-top:1vh;text-align: left;\">Call Telephone Number:</div>\n  <div class=\"inlineblock-default\">\n    <div id=\"left\" class=\"fa home\" onclick=\"cti.fnCallTenant('tenanthome');\"></div>\n    <div id=\"right\" class=\"fa mobile\" onclick=\"cti.fnCallTenant('tenantmob');\"></div>\n    <div id=\"center\" class=\"fa booked\" onclick=\"cti.fnCallTenant('user');\"></div>\n  </div>\n  <div class=\"inlineblock-default\">\n    <div class=\"home-text\">Tenant Home</div>\n    <div class=\"mobile-text\">Tenant Mobile</div>\n    <div class=\"booked-text\">Booked By</div>\n  </div>\n</div>","expressions":{}},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"408d4b28-288e-433b-a497-fd03f3f95a29","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"4e1a0e1d-64a4-4bc0-8704-daa8468730e2","content":"Previous","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"20978d2f-2356-4b8e-a036-3b572f2e0370"}],"classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"nav-button","_auto_id_":"58448035-e724-4732-9b8a-83a4719e13d5","extends":{"type":"button","item-type":"button"},"content":"Next","actions":[{"event":"click","type":"go-to-page","data":{"name":"JobAccessDetails","isConditional":false}}],"expressions":{},"theme":"default","classes":"button-bar-btn"}],"expressions":{}}],"_auto_id_":"1ca53e86-03fd-47a8-807b-6a5725daa0f1"}]},{"start":false,"name":"JobAccessDetails","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"3f32e125-9a29-424f-9850-0fcb328c82d3","content":"<h4 class=\"title\">Job and Access Detail</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"317e7f47-04be-410c-b38e-053b47fa96f5","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"JobAccessDetails","componentInstanceId":"155669c1-c374-4d1f-bf83-f3cdfbeb8f1c","function":"open"},"_auto_id_":"d3e344b6-ada6-4e77-b181-3275ae917b00"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"7061f15c-e9c3-441d-be47-860cd9cacf19","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"10739810-89b4-4e0c-bec1-0ba34a704798"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"9f8ccaa8-9b60-447c-94f1-3502050f6667","content":"Job List","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"8dd351b7-a16c-4a01-b699-b5a68164153a"}],"left-icon":"fa-list"},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"87d70663-5d39-45f3-b204-4f3f3bf26796","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"d2ce5247-3bfb-4d2b-af09-6e231e267fc5"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"9ee1c78e-0f3a-4098-b025-cf022dc4acf2","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-component-function","data":{"page":"JobAccessDetails","componentInstanceId":"c9a5087e-b1e3-4b51-9201-2a8a1fa91022","function":"show"},"_auto_id_":"96df3b1c-2050-4535-b25a-0373f2f95904"},{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"9025da9f-b735-4125-8c47-eed79775aeef"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"06e90e5d-a61f-42f9-b899-74a3a3f47397","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"446afbd2-04e6-46ee-ac42-d5dcdac81240"}]},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"00d3bb1e-b3b9-448f-a6a7-ef10e95932be","content":"Logout","theme":"default","expressions":{},"left-icon":"fa-sign-out","actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"4e8b0ea2-da18-4a90-9b88-49ca6caa7266"}]},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"c9a5087e-b1e3-4b51-9201-2a8a1fa91022","attributes":{},"expressions":{}}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"155669c1-c374-4d1f-bf83-f3cdfbeb8f1c","attributes":{},"expressions":{},"actions":[]}],"_auto_id_":"969ca65d-790f-42b8-b95a-d37a4a5e4b42","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"html_jobaccessdetail","type":"content","item-type":"html","_auto_id_":"955afef9-1b89-4513-b224-c17f61e0b041","content":"<h4>Order Details</h4>\n<hr>\n<h5 style=\"font-weight:bold;\">Summary:</h5>\n<p>{{'$store.jobs.selectedJob.sProblemSummary'|store}}</p>\n<hr>\n<h5 style=\"font-weight:bold;\">Description:</h5>\n<p>{{'$store.jobs.selectedJob.sProblemDetail'|store}}</p>\n<hr>\n<h5 style=\"font-weight:bold;\">Access Details:</h5>\n<p>{{'$store.jobs.selectedJob.sAccessDetail'|store}}</p>","expressions":{}},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"072e9387-de78-46c0-9b2c-100dca355330","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"9faeda65-9401-4858-bd56-1a808729b3e0","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"TenantDetails","isConditional":false,"expressions":{}}}],"expressions":{},"theme":"default","classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"b70cccf1-f953-42aa-a242-78fb1ab0d2be","content":"Next","theme":"default","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var propertyDetail = cti.store.jobs.selectedJob.aPropertyDetail;\n\nif(propertyDetail.aPropertyWarningsChecked == undefined) { \n  propertyDetail.aPropertyWarningsChecked = false; \n}\n  \nif(propertyDetail.aPropertyWarnings) {\n  if(propertyDetail.aPropertyWarnings.length > 0) {\n    for(var i in propertyDetail.aPropertyWarnings) {\n      if(propertyDetail.aPropertyWarnings[i].checked == undefined) {\n        propertyDetail.aPropertyWarnings[i].checked = \"unchecked-warning\";\n      }\n      \n      if(propertyDetail.aPropertyWarnings[i].checked === \"unchecked-warning\") {\n        propertyDetail.aPropertyWarningsChecked = false;\n      }\n      \n      if(propertyDetail.aPropertyWarnings[i].sWarnText == undefined || propertyDetail.aPropertyWarnings[i].sWarnText == \"\") {\n        propertyDetail.aPropertyWarnings[i].sWarnText = \"No information was supplied with this warning, please proceed with caution.\";\n      }\n    }\n    \n    cti.utils.callAction('go-to-page', { \"name\": \"Warnings\" });\n  } else {\n    cti.utils.callAction(\n      \"show-notification\", {\n        \"name\" : \"app_nowarnings\",\n        \"item-type\" : \"app-notification\",\n        \"style\" : \"error\",\n        \"title\" : \"No Warnings!\",\n        \"text\" : \"There are no Tenant or Property Warnings for this job.\"\n      }\n    );\n\n    if(!cti.store.jobs.selectedJob.bJobTravelStarted) {\n      cti.store.jobs.selectedJob.bJobTravelStarted = false;\n      cti.store.jobs.selectedJob.sJobTravelStartedText = \"Pending Start of Travel\";\n    }\n\n    cti.utils.callAction('go-to-page', { \"name\": \"StartTravel\" });\n  }\n}"},"_auto_id_":"1a5540f6-a655-40c2-ad46-e8c3aed9ee8f","actions":[]}],"expressions":{},"classes":"button-bar-btn"}],"expressions":{}}],"_auto_id_":"b6c23901-ae18-4934-a10b-f47de2e4feb9"}]},{"start":false,"name":"JobHistory","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"7e27d782-f47a-4f4f-8760-5e54294ac0e7","content":"<h4 class=\"title\">Job History</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"bc08da80-ef68-4148-98b1-4a7e8cb28338","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"JobsList","componentInstanceId":"97135165-829c-46db-bd4a-7d7aa39f16fd","function":"open"},"_auto_id_":"33aab652-9693-4201-8deb-6b2a5577ff13"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"7ecf037a-affb-429e-8b0e-c5af9d57c834","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"829166dc-b65b-430d-b1ae-649e44505c44"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"ede8017d-1328-4dd7-92a4-b9d4fe0db9e3","content":"Job List","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"97a5f496-12df-479c-8f9f-ea800e34b4dc"}],"left-icon":"fa-list"},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"5d235e45-e880-44a7-8311-5acfa8b46d8b","content":"Logout","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"3e0d5e20-e7b3-49d1-b831-c5d8a4014a7a"}],"left-icon":"fa-sign-out"}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"fe43a931-e569-4e81-871b-8325f1ffee09","attributes":{},"expressions":{},"actions":[]}],"_auto_id_":"7354b8ca-ca7c-4f63-86e0-ebf10aed4782","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"f83815ed-f33d-4fb2-9e0f-38a9b94c69ce","content":[{"name":"list_jobhistory","type":"content","item-type":"list","_auto_id_":"d6257310-f5e1-4d38-93e3-c6e6bd5e80c5","search":"","classes":"","expressions":{},"model":"$store.jobs.jobHistory","theme":"bootstrap","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Remove previous jobHistorySelected object\ndelete cti.store.jobs.jobHistorySelected;\n\n// Package selected job\nvar jobSelected = {{$data.$item}};\n\n// Create jobHistorySelected object with selected job data\ncti.store.jobs.jobHistorySelected = {\n  \"jobNumber\" : jobSelected.aAccuServJobID.sJobNo,\n  \"operativeId\" : jobSelected.aOperativeDetail.sOperativeID + \" - \" + jobSelected.aOperativeDetail.sOperativeName,\n  \"attendOnDate\" : jobSelected.dAttendOnDate,\n  \"attendOnTime\" : jobSelected.iAttendOnHrs + \":\" + jobSelected.iAttendOnMins,\n  \"problemDetail\" : jobSelected.sProblemDetail,\n  \"resultDetail\" : jobSelected.sResultDetail,\n  \"accessDetail\" : jobSelected.sAccessDetail\n}\n\n//Navigate to history detail page\ncti.utils.callAction('go-to-page', { \"name\": \"JobHistoryDetail\" });"},"_auto_id_":"bb698603-4415-4cdf-9479-9cec0a018acb"}],"dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"list_jobhistory_html","_auto_id_":"8e8cbbc8-1f53-4b68-8214-409c6427e6ef","content":"<div style=\"width: 100%;\">\n  <div class=\"inlineblock-default\" style=\"margin-bottom: 10px;\">\n    <div style=\"float:left;font-weight:bold;\">Attended On: <span style=\"color:#0072C6;font-weight:100;\">{{$data.$item.dAttendOnDate}}</span></div>\n    <div style=\"float:right;font-weight:bold;\">Job Number: <span style=\"color:#0072C6;font-weight:100;\">{{$data.$item.aAccuServJobID.sJobNo}}</span></div>\n  </div>\n  <div class=\"inlineblock-default\" style=\"margin-bottom:20px;\">\n    <div style=\"font-weight:bold;margin-bottom:10px;\">Problem Detail</div>\n    <div>{{$data.$item.sProblemDetail}}</div>\n  </div>\n  <div class=\"inlineblock-default\">\n    <div style=\"font-weight:bold;\">Operative: <span style=\"color:#0072C6;font-weight:100;\">{{$data.$item.aOperativeDetail.sOperativeName}}</span></div>\n  </div>\n</div>"}]},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"64288413-d8d6-4fec-a96f-689f4c9d6f4c","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"5d415df3-1b3b-4ec3-b6eb-0a25c8049f41","content":"Back","theme":"default","expressions":{},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var lastPage = cti.store.variables.lastJobHistoryPage;\ndelete cti.store.jobs.jobHistorySelected;\n\ncti.utils.callAction('go-to-page', { \"name\": lastPage });"},"_auto_id_":"9336ad89-cea9-420e-820c-f1970ac3f451"}],"classes":"button-bar-btn"}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"JobHistoryDetail","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"913c704d-cde4-46f2-9efd-f68630d9d49b","content":"<h4 class=\"title\">Job: {{'$store.jobs.jobHistorySelected.jobNumber'|store}}</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"b3ce3481-f414-4b68-b90e-d5ce1d61cda2","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"JobHistoryDetail","componentInstanceId":"2a7c1fd4-9eb1-45de-9de5-66779732d2bb","function":"open"},"_auto_id_":"d9ad28c1-17ae-49a3-8fb0-fffab0871f52"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"d86e3503-f782-4906-a2e6-bd7d1cb61e9f","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"00fd78af-877a-4e72-9328-31caf7d712e8"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"7e75abe8-5ff0-4dda-a48c-14874cead29a","content":"Job List","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"77dfa0ad-4dd0-4645-887a-4474d7bf6099"}],"left-icon":"fa-list"},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"d07cfe10-75b1-4d01-a2fa-4e94c630862b","content":"Logout","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"left-icon":"fa-sign-out","actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"b8cbe574-aa9a-4f75-8088-8c2aae47a97a"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"2a7c1fd4-9eb1-45de-9de5-66779732d2bb","attributes":{},"expressions":{},"actions":[]}],"_auto_id_":"b9b96d30-b891-4fad-8668-a8c87e108a9a","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"bf32ac16-2c5c-4333-b646-8e10494d26f3","content":[{"name":"html_jobdetails","type":"content","item-type":"html","_auto_id_":"6918413f-cbc1-4a1e-bf68-6d7a5ceb209b","content":"<h5 style=\"font-weight:bold;\">Operative</h5>\n<p>{{'$store.jobs.jobHistorySelected.operativeId'|store}}</p>\n<hr>\n<h5 style=\"font-weight:bold;\">Attend On Date</h5>\n<p>{{'$store.jobs.jobHistorySelected.attendOnDate'|store}}</p>\n<hr>\n<h5 style=\"font-weight:bold;\">Attend On Time</h5>\n<p>{{'$store.jobs.jobHistorySelected.attendOnTime'|store}}</p>\n<hr>\n<h5 style=\"font-weight:bold;\">Problem Detail</h5>\n<p>{{'$store.jobs.jobHistorySelected.problemDetail'|store}}</p>\n<hr>\n<h5 style=\"font-weight:bold;\">Result Detail</h5>\n<p>{{'$store.jobs.jobHistorySelected.resultDetail'|store}}</p>\n<hr>\n<h5 style=\"font-weight:bold;\">Access Detail</h5>\n<p>{{'$store.jobs.jobHistorySelected.accessDetail'|store}}</p>","expressions":{}},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"aa0e9bd3-ab4e-4245-a214-bf6804ef9fd2","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"0a0455e1-92bf-4ae9-b975-a46f36f60456","content":"Previous","theme":"default","expressions":{},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction('go-to-page', { \"name\": \"JobHistory\" });"},"_auto_id_":"31ce325c-a94a-406d-84e2-5dedb744e4e9"}],"classes":"button-bar-btn"}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"Warnings","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"31e6b0f1-ee58-4476-b78e-056e857df3d4","content":"<h4 class=\"title\">Warnings</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"3b00ab4e-f7ff-4e48-a060-b022f13a866e","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"JobsList","componentInstanceId":"97135165-829c-46db-bd4a-7d7aa39f16fd","function":"open"},"_auto_id_":"85732849-9e33-4731-a110-b118561db3d6"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"a4d5c893-186e-430f-94f4-804619bcbaa6","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"72e8198e-5bd8-4781-8841-2e1541abe37e"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"f7eb4090-3d7e-4c5b-b750-355645508a8d","content":"Job List","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"85284a6d-1665-47ce-ac56-bbd397d20183"}],"left-icon":"fa-list"},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"24d8be5e-e214-4be7-8b0e-00e0803e8d1c","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"89666725-bbe8-40c5-82f1-5f3b04403fe6"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"703f80f8-0367-4158-8d7f-f300d12617dd","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-component-function","data":{"page":"Warnings","componentInstanceId":"19d66f33-fd24-4e81-a674-468947fe1091","function":"show"},"_auto_id_":"82380714-ccb9-4ec5-87f2-7f18504247fa"},{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"412f1e6f-492b-43e1-93f2-e0a28f321beb"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"4dc8f630-a048-4290-8e2f-b3b79f454c32","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"cb9d1364-7bf3-4f8b-9975-5fb34d9f522e"}]},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"3851df42-9c16-40c2-bc9c-5c22f47ac049","content":"Logout","theme":"default","expressions":{},"left-icon":"fa-sign-out","actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"51a32253-aa18-4307-b244-ffc827c3ea4c"}]},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"19d66f33-fd24-4e81-a674-468947fe1091","attributes":{},"expressions":{}}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"cc87013b-3b36-4a6a-a471-46283b3ff0cb","attributes":{},"expressions":{},"actions":[]}],"_auto_id_":"171ab628-1ed0-445b-8a7d-8b105350903c","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"798d1e1a-5e69-4bf0-bede-a5f52ad504c6","content":[{"name":"html_warnings","type":"content","item-type":"html","_auto_id_":"b2aecea6-1316-4677-969b-76a4eb9719df","content":"<p>Please check and select the below warnings to confirm you have read and confirmed them.</p>","expressions":{}},{"name":"list_warnings","type":"content","item-type":"list","_auto_id_":"810b5405-bc0b-4f70-9ab7-3195a9bea7a8","search":"","classes":"","expressions":{},"model":"$store.jobs.selectedJob.aPropertyDetail.aPropertyWarnings","theme":"bootstrap","actions":[{"event":"click","type":"call-function","data":{"name":"fnCheckWarning","params":{"warning":"{{$data.$item}}","index":"{{$data.$item.$index}}"}},"_auto_id_":"48ffce0c-75da-41db-8091-bc4258c93f88"}],"dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"list_warnings_html","_auto_id_":"24606f73-1da0-461f-b024-161c57c76b99","content":"<div style=\"display:inline-block;width:100%;\">\n  <div style=\"display:inline-block;width:100%;\">\n    <div class=\"fa {{$data.$item.sWarnReason}}\"></div>\n  \t<div class=\"warning-short\">{{$data.$item.sWarnReason}}</div>\n    <div class=\"fa {{$data.$item.checked}}\"></div>\n  </div>\n  <div style=\"margin-bottom: 20px;\">{{$data.$item.sWarnText}}</div>\n</div>"}]},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"029a340b-d676-4ce0-8f33-7b8b67c6907f","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"d21b8bac-62e3-46d6-abb7-c8b5c30d57ec","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"JobAccessDetails","isConditional":false}}],"expressions":{},"theme":"default","classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"33f97661-b74c-491b-a48c-202791f65509","content":"Next","theme":"default","expressions":{"disabled":"$store.jobs.selectedJob.aPropertyDetail.aPropertyWarningsChecked == false"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"debugger;\nif(!cti.store.jobs.selectedJob.bJobTravelStarted) {\n  cti.store.jobs.selectedJob.bJobTravelStarted = false;\n  cti.store.jobs.selectedJob.sJobTravelStartedText = \"Pending Start of Travel\";\n} else {\n  cti.store.jobs.selectedJob.sJobTravelStartedText = \"En-Route Time\";\n}\n\nif(!cti.store.jobs.selectedJob.aPropertyDetail.aPropertyWarningsDataCollection) {\n  cti.store.variables.jobCollectionType = \"warnings\";\n  cti.utils.callAction('call-actionflow', { \"name\": \"JobDataCollection\" });\n}\n\ncti.utils.callAction('go-to-page', { \"name\": \"StartTravel\" });"},"_auto_id_":"518a3bbd-6b95-4dd7-b25c-c8e147c5a385"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"StartTravel","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"bf39615a-beb4-43ea-af4f-d497120c3c17","content":"<h4 class=\"title\">Start Travel</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"d009218b-2cde-4805-93d9-0a3020d3e7d4","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"StartTravel","componentInstanceId":"3a4903de-ef6f-49bf-a237-f26069ad3ce0","function":"open"},"_auto_id_":"755e135a-9832-49a7-b253-c8d82415d382"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"eda532be-6225-49e8-bd7c-e82d3e6fa93c","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"136f0f59-27f9-406d-a4e3-bd98622cd3f8"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"b9f682e9-3eea-45b7-af2c-a020b12deb06","content":"Job List","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"7d6a8684-c328-4031-bd07-60c700d9cf48"}],"left-icon":"fa-list"},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"6d7ff1a2-a42f-4cc6-bead-bc41fe4b0b17","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"1c6c1347-ad93-45e5-9788-f15f49e15ea4"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"fafd1618-c407-4277-a9f5-8019c1ce9ec6","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-component-function","data":{"page":"StartTravel","componentInstanceId":"ace38191-5a84-42ef-955c-d91b48aefff2","function":"show"},"_auto_id_":"70f68410-a1a3-48bf-a20b-0e3bf8b07cd1"},{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"1d88c59c-f212-4edc-99b6-30ac74fad92f"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"84a7b7ce-5fbc-49a7-96a7-298686369fa7","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"443a8f30-95e5-454a-8318-3f52d74d0f52"}]},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"e03073ed-ed3f-434b-a747-0e777d1b5bc4","content":"Logout","theme":"default","expressions":{},"left-icon":"fa-sign-out","actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"4885e407-ff09-45ef-b35f-6bb43af751a2"}]},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"ace38191-5a84-42ef-955c-d91b48aefff2","attributes":{},"expressions":{}}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"3a4903de-ef6f-49bf-a237-f26069ad3ce0","attributes":{},"expressions":{},"actions":[]}],"_auto_id_":"e3106626-5d47-4820-b644-fbbf3e4c4570","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"ae829d68-3547-4bd3-8fb8-13e7b87f1492","content":[{"name":"html_travelling_pending","type":"content","item-type":"html","_auto_id_":"9e071cdf-b9e3-48df-921e-ed0e780770f2","content":"<p style=\"margin-bottom:2vh;font-weight:bold;\">Appointment Slot: <span>{{'$store.jobs.selectedJob.sAssignedType'|store}}</span></p>\n<hr>","expressions":{"show":"$store.jobs.selectedJob.bJobTravelStarted == false"}},{"name":"html_travelling_started","type":"content","item-type":"html","_auto_id_":"9f770832-52ff-40b6-ba78-4e66073c9293","content":"<p style=\"margin-bottom:2vh;font-weight:bold;\">Appointment Slot: <span>{{'$store.jobs.selectedJob.sAssignedType'|store}}</span></p>\n<hr>\n<div class=\"starting\">\n\t<i id=\"starting-spinner\" class=\"fa started-ticked\"></i>\n</div>\n<h4 class=\"completeheader\">En-Route Message Sent</h4>","expressions":{"show":"$store.jobs.selectedJob.bJobTravelStarted == true"}},{"name":"sendEnrouteMessage","type":"button","item-type":"button","_auto_id_":"aa359135-c92b-49f5-8056-66101f00f366","content":"Send En-Route Message","theme":"default","expressions":{"show":"$store.jobs.selectedJob.bJobTravelStarted == false"},"classes":"travel-btn","actions":[{"event":"click","type":"call-function","data":{"name":"fnStartTravel"},"_auto_id_":"bbad8ea5-956d-45e2-aefd-4957720584f2"}]},{"name":"html_travelstatus","type":"content","item-type":"html","_auto_id_":"92079018-51fb-48c1-b9cd-4226e1d4294a","content":"<p style=\"font-size: 12pt;\">{{'$store.jobs.selectedJob.sJobTravelStartedText'|store}}: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.iJobStartedTravelTime'|store}}</span></p>\n<hr>\n<div onclick=\"cti.fnGoogleURL()\" style=\"width:100%;text-align:center;\"><p class=\"fa getmethere\"></p></div>","expressions":{}},{"name":"get_me_there","type":"button","item-type":"button","_auto_id_":"d0da2782-fdb7-4a06-9a27-10fa0ecbaab8","content":"Get Me There","theme":"default","expressions":{},"classes":"getmethere-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction(\"call-url\", {\"name\":\"GoogleMapping\",\"params\":{\"saddr\":\"current location\",\"daddr\":cti.store.jobs.selectedJob.aPropertyDetail.sPostcode}});"},"_auto_id_":"716a3282-b340-454c-bf9c-efd6479a7852"}]},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"f1a32de4-191b-4481-88ed-241e6b201e86","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"549897ae-ac9b-4d9b-a29f-91f6b042851f","content":"Previous","theme":"default","expressions":{},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"debugger;\nvar selectedJob = cti.store.jobs.selectedJob.aPropertyDetail.aPropertyWarnings;\n\nif(selectedJob.length > 0) {\n  cti.utils.callAction('go-to-page', { \"name\": \"Warnings\" });\n} else {\n  cti.utils.callAction('go-to-page', { \"name\": \"JobAccessDetails\" });\n}"},"_auto_id_":"038cba69-a447-4d35-ab2a-8a2a929f8831"}]},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"fa29ea78-1f51-45bc-aac7-57acd32c9618","content":"Next","theme":"default","expressions":{"disabled":"$store.jobs.selectedJob.bJobTravelStarted == false"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"if(!cti.store.jobs.selectedJob.bJobTravelEnded) {\n  cti.store.jobs.selectedJob.bJobTravelEnded = false;\n  cti.store.jobs.selectedJob.sJobTravelEndedText = \"Pending Arrival\";\n}\n\nif(cti.store.jobs.selectedJob.bLoneDeviceStatus == undefined) cti.store.jobs.selectedJob.bLoneDeviceStatus = false;\n\ncti.utils.callAction('go-to-page', { \"name\": \"ArrivedOnSite\" });"},"_auto_id_":"e451b410-4efb-4bb0-974f-de2ccb5067a0"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"ArrivedOnSite","config":[{"name":"On-Loaded Event","type":"event","item-type":"onloaded","_auto_id_":"eff0aecb-d1b5-41f0-bc05-39d1154e443c","actions":[{"event":"onload","type":"inline-function","data":{"sync":true,"code":"var loneDeviceElement = document.getElementById('lone-device-check');\n\nif(cti.store.jobs.selectedJob.bLoneDeviceStatus) {\n  loneDeviceElement.classList.remove('unchecked-lone');\n  loneDeviceElement.classList.add('checked-lone');\n} else {\n  loneDeviceElement.classList.remove('checked-lone');\n  loneDeviceElement.classList.add('unchecked-lone');\n}\n\ncti.utils.updatePage();"},"_auto_id_":"520fc8b8-499f-4600-bc3c-fc1ae7b78a58"}]}],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"5b711dcb-d4ba-404a-9a0a-c59ef12192fd","content":"<h4 class=\"title\">Arriving On Site</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"6564ad43-6800-4b2c-bf9c-0dcaadef9a68","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"JobsList","componentInstanceId":"97135165-829c-46db-bd4a-7d7aa39f16fd","function":"open"},"_auto_id_":"d7889f07-1084-457b-9aea-abc2eb46f2dc"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"edd32389-80b3-4646-bc9e-bd79f683817a","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"4ff180c1-25b0-43d0-b590-91eca7ff56d7"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"7b70c6b5-fece-4c33-8955-fa5697c9765e","content":"Job List","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"a3b5f421-0de5-44f8-94c2-9ab290b5d182"}],"left-icon":"fa-list"},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"c2bd9319-4bfe-4737-92bf-490861e0550a","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"c4dc984a-0053-4538-a93c-a2f13a752866"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"1c583c17-1418-4e55-abe4-d9c76b0a1e09","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-component-function","data":{"page":"ArrivedOnSite","componentInstanceId":"6bc5d457-b51e-4094-b2fd-f33fc704e431","function":"show"},"_auto_id_":"33129445-44c9-4529-97cb-d667fc1b94bf"},{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"c0c2af89-0f86-4f1f-abf7-a67b6f3ee8de"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"58c25e95-b8d0-4153-bda4-f1e95e46fbfe","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"6dea3704-afc0-4836-ad2b-63ee60253a73"}]},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"7a7e2d2e-5dec-4e91-992f-13b728312da7","content":"Logout","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"32e7273b-873d-4a1f-8ef4-d12c7a48273c"}],"left-icon":"fa-sign-out"},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"6bc5d457-b51e-4094-b2fd-f33fc704e431","attributes":{},"expressions":{}}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"98906a8c-2c82-4116-b825-0fc8dbe5ec74","attributes":{},"expressions":{},"actions":[]}],"_auto_id_":"88f24c76-80f6-4d44-91cf-3d7fdc6e6f76","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"f754c65b-6c2d-4c5c-bb1b-d9553d6f9657","content":[{"name":"html_arriving_pending","type":"content","item-type":"html","_auto_id_":"402500e2-a436-4d8c-bb45-f16ac081a260","content":"<p style=\"margin-bottom:2vh;font-weight:bold;\">Appointment Slot: <span>{{'$store.jobs.selectedJob.sAssignedType'|store}}</span></p>\n<hr>","expressions":{"show":"$store.jobs.selectedJob.bJobTravelEnded == false"}},{"name":"html_arriving_arrived","type":"content","item-type":"html","_auto_id_":"a691053d-7c54-4a97-98e5-293dc6eea1e2","content":"<p style=\"margin-bottom:2vh;font-weight:bold;\">Appointment Slot: <span>{{'$store.jobs.selectedJob.sAssignedType'|store}}</span></p>\n<hr>\n<div class=\"arriving\">\n\t<i id=\"arriving-spinner\" class=\"fa arrived-ticked\"></i>\n</div>\n<h4 class=\"completeheader\">Arrived On-Site</h4>","expressions":{"show":"$store.jobs.selectedJob.bJobTravelEnded == true"}},{"name":"sendArrivedMessage","type":"button","item-type":"button","_auto_id_":"0082348a-dacf-42da-b11d-16d4482c2692","content":"End Travel","theme":"default","expressions":{"show":"$store.jobs.selectedJob.bJobTravelEnded == false"},"classes":"travel-btn","actions":[{"event":"click","type":"call-function","data":{"name":"fnEndTravel"},"_auto_id_":"af457a51-a326-4a24-889a-28f3596115b9"}]},{"name":"html_travelstatus","type":"content","item-type":"html","_auto_id_":"9ff094f6-5b65-416a-8b1a-7247ed8cdb50","content":"<p style=\"font-size: 12pt;\">{{'$store.jobs.selectedJob.sJobTravelEndedText'|store}}: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.iJobEndedTravelTime'|store}}</span></p>\n<hr>\n<h5 style=\"font-weight:bold;\">Contact Name</h5>\n<p>{{'$store.jobs.selectedJob.aPropertyDetail.sTenant_Name'|store}}</p>\n<hr>\n<h5 style=\"font-weight:bold;\">Address</h5>\n<p>{{'$store.jobs.selectedJob.aPropertyDetail.sAddress_1'|store}}</p>\n<p>{{'$store.jobs.selectedJob.aPropertyDetail.sAddress_4'|store}}</p>\n<p>{{'$store.jobs.selectedJob.aPropertyDetail.sPostcode'|store}}</p>\n<hr>\n<div style=\"text-align:center\">\n  <div onclick=cti.fnCheckLoneDevice() class=\"lone-device-warning\">\n    <div style=\"display:inline-block;\">Have you activated your lone working device?</div>\n    <div id=\"lone-device-check\" class=\"fa unchecked-lone\"></div>\n  </div>\n</div>","expressions":{}},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"14480115-db13-4604-a7e8-ce46678fb82e","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"7e254149-d6da-430d-8448-df9b9c199c5a","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"StartTravel","isConditional":false}}],"expressions":{},"theme":"default","classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"2f0d35e5-f4fa-4ecc-9465-a498890ba2f0","content":"Next","theme":"default","expressions":{"disabled":"$store.jobs.selectedJob.bJobTravelEnded == false || $store.jobs.selectedJob.bLoneDeviceStatus == false"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"if(cti.store.jobs.selectedJob.bJobNoAccess == undefined) cti.store.jobs.selectedJob.bJobNoAccess = false;\ncti.utils.callAction('go-to-page', { \"name\": \"NoAccess\" });"},"_auto_id_":"2f274b89-7bfb-4fd3-b9ee-8f3d071b6737"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"JobMap","config":[{"name":"On-Loaded Event","type":"event","item-type":"onloaded","_auto_id_":"be270bb0-6720-4393-868f-20ea2b0c299b","actions":[{"event":"onload","type":"call-api","data":{"sync":true,"name":"GoogleMapsAPI","operation":"initMap"},"_auto_id_":"bf07291d-fa22-4d5a-8cdf-d76114eebf9f","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"function initMap(positions) {\n  var currentLocation = {lat: positions[0].lat, lng: positions[0].lng};\n  \n  var map = new google.maps.Map(document.getElementById('map'), {\n    zoom: 8,\n    center: currentLocation\n  });\n  \n  var infoWindow = new google.maps.InfoWindow({map: map});\n  \n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(function(position) {\n      var pos = {\n        lat: position.coords.latitude,\n        lng: position.coords.longitude\n      };\n\n      infoWindow.setPosition(pos);\n      infoWindow.setContent('Location found.');\n      map.setCenter(pos);\n    }, function() {\n      handleLocationError(true, infoWindow, map.getCenter());\n    });\n  } else {\n    // Browser doesn't support Geolocation\n    handleLocationError(false, infoWindow, map.getCenter());\n  }\n  \n  var marker = new google.maps.Marker({\n    icon: 'http://maps.google.com/mapfiles/ms/icons/green-dot.png',\n    position: currentLocation,\n    map: map\n  });\n  \n  for(var i in positions) {\n    var marker = new google.maps.Marker({\n      position: positions[i],\n      map: map\n    });\n  }\n}\n\nfunction handleLocationError(browserHasGeolocation, infoWindow, pos) {\n  infoWindow.setPosition(pos);\n  infoWindow.setContent(browserHasGeolocation ?\n                        'Error: The Geolocation service failed.' :\n                        'Error: Your browser doesn\\'t support geolocation.');\n}\n\nvar mapLocations = cti.store.jobs.mapLocations;\n\nif(mapLocations.length > 0) {\n  initMap(mapLocations);\n}\n\ncti.utils.updatePage();"},"_auto_id_":"bd1679b4-7255-4fd3-a82a-39be3ba9a3c3","actions":[]},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true}},"_auto_id_":"dee54a84-3835-4604-8fe7-d2c869cef97b"}]}]}],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"f36ca90a-b507-40fd-a177-a883d9e3642a","content":"<h4 class=\"title\">Job Map</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"16114ad5-5eb7-4b12-aed7-b5f8cf949645","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"JobMap","componentInstanceId":"633b56e9-9ef7-496b-aea3-1138d26682e8","function":"open"},"_auto_id_":"abab64c7-d8dc-4a0f-a463-637abd510eb5"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"d4240f3f-9af9-4267-8171-1aef7bc20d20","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"93573fc2-3f8d-4ddb-a75f-fc54f9fa4e41"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"fc7aed9a-7a46-4839-a6c0-25b663878499","content":"Job List","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"a67ca6ae-b4a3-4e6e-b3df-4626687ae8ca"}],"left-icon":"fa-list"},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"94ffc066-3f4f-468c-bd4e-566a0f084f27","content":"Logout","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"36551f76-b549-4303-9787-c24fad790fbc"}],"left-icon":"fa-sign-out"}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"633b56e9-9ef7-496b-aea3-1138d26682e8","attributes":{},"expressions":{}}],"_auto_id_":"8fb5fcd3-dd09-45ba-866a-ac90da36a27d","expressions":{},"classes":""},{"name":"staticMap","type":"area","item-type":"static","_auto_id_":"8e1c3e0f-b8e7-464a-aee3-60c86a065d05","content":[{"name":"html_map","type":"content","item-type":"html","_auto_id_":"ecb8ca85-53ef-461a-878c-18cc44fb76d0","content":"<div id=\"map\"></div>","expressions":{}}],"expressions":{}},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"1e4be86d-5244-4754-8678-4e60ac80f0ba","content":[{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"950de66b-df3e-4210-bf3b-cfb0a0e936dd","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"1aef3c81-9961-4678-aae9-250980436439","content":"Back","theme":"default","expressions":{},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var lastPage = cti.store.variables.lastJobMapPage;\n\ncti.utils.callAction('go-to-page', { \"name\": lastPage });"},"_auto_id_":"87d3b2bf-a7b8-4da3-b639-f510079ac061"}],"classes":"button-bar-btn"}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"NoAccess","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"d202ec5d-c137-4247-9e34-c731ae8cfa85","content":"<h4 class=\"title\">No Access</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"c025dbb0-17e4-42e0-8187-61fe9d232a09","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"NoAccess","componentInstanceId":"47ea6fec-c1d6-4291-9eed-1c756646a89e","function":"open"},"_auto_id_":"90138590-cb2a-4544-b7e7-31e06b17342b"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"3cd7910e-5e0b-4124-b3b3-6a048447d58a","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"88325f97-2998-4108-9afe-b2a4de545ba7"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"bd2e5a6b-729c-4c1c-9b27-466768036ee0","content":"Job List","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"4d7c4aea-29bd-4850-b09f-e19f69b207ff"}],"left-icon":"fa-list"},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"3ccd4102-c2a4-4ea6-925c-b4355c0fbfdf","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"4af953d9-bd41-407f-b7cb-70989b31525a"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"3f78b29f-c266-4cf5-a081-dfa16aa68353","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-component-function","data":{"page":"NoAccess","componentInstanceId":"095478d6-0f79-4b07-8cee-889d36307f55","function":"show"},"_auto_id_":"193ef361-7973-44bd-9ee1-0bb7213dc4d6"},{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"b6c3a209-5055-4b03-9e16-068b30fc2a08"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"5d3a6bb9-18cb-4d98-ad8f-0697b945c094","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"9d6ee441-9021-4ac4-af4c-1bb54a2ce7ae"}]},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"7076f3ca-4383-4ed6-888e-36d11d761de9","content":"Logout","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"bcb8c478-152e-4048-94ba-88b85efcd087"}],"left-icon":"fa-sign-out"},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"095478d6-0f79-4b07-8cee-889d36307f55","attributes":{},"expressions":{}}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"47ea6fec-c1d6-4291-9eed-1c756646a89e","attributes":{},"expressions":{}}],"_auto_id_":"235194ab-8ab6-418e-b574-d43f56874c02","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"2f2ec030-4ec7-4036-939c-5a5277014c64","content":[{"name":"gainingAccess","type":"choice","item-type":"radio","_auto_id_":"c819b40b-dca4-41e3-94a3-1489325eb858","label":"Are you able to gain access to the property?","required":true,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{},"classes":"cb-bias-last","actions":[{"event":"change","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.NoAccess.gainingAccessSafely = undefined;\ncti.store.pages.NoAccess.noAccessReason = undefined;\ncti.store.pages.NoAccess.noAccessSafelyReason = undefined;\n\ncti.utils.updatePage();"},"_auto_id_":"82b2642f-ec82-4ea3-9a89-400a8f934ad7"}],"message":"This is a required field","validators":[]},{"name":"gainingAccessSafely","type":"choice","item-type":"radio","_auto_id_":"5879693c-fee9-4653-ab2c-3a82484624c0","label":"Are you able to safely enter the property?","required":false,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"show":"$store.pages.NoAccess.gainingAccess == \"1\""},"classes":"cb-bias-last","actions":[],"message":"This is a required field","validators":[]},{"name":"noAccessButton","type":"button","item-type":"take-photo-button","_auto_id_":"3f1cf6cb-e9f8-407b-9c75-fd51fe9e1a81","extends":{"type":"button","item-type":"button"},"content":"Take photo","actions":[{"event":"click","type":"take-photo","data":{"quality":75,"multiple":false,"mediaId":"noAccessPhoto"}}],"left-icon":"fa-camera","theme":"default","expressions":{"show":"$store.pages.NoAccess.gainingAccess == \"0\""},"classes":"takephoto-btn"},{"name":"noAccessReason","type":"choice","item-type":"select","_auto_id_":"5a5f2408-6bb6-4ec9-a50b-39fe7dd5c252","label":"No access reason?","required":false,"options":[{"label":"Demolished Property","value":"0"},{"label":"No Answer At Door","value":"1"},{"label":"No Answer At Door - Entry System","value":"2"}],"expressions":{"show":"$store.pages.NoAccess.gainingAccess == \"0\""},"message":"This is a required field","validators":[],"actions":[{"event":"change","type":"inline-function","data":{"sync":true,"code":"if(cti.store.pages.NoAccess) {\n  if(cti.store.pages.NoAccess.noAccessReason != undefined || cti.store.media.noAccessPhoto != undefined) {\n    cti.store.jobs.selectedJob.bJobNoAccess = true;\n  }\n}\n\ncti.utils.updatePage();"},"_auto_id_":"a8eca275-3f65-4490-8f80-ab53ca651678"}]},{"name":"noAccessSafelyReason","type":"choice","item-type":"select","_auto_id_":"ed14a74d-80fe-4e74-9d24-2654e4f2f20b","label":"Abandon job reason?","required":false,"options":[{"label":"Abusive/Violent Tenant","value":"0"},{"label":"Appliance Not Accessible","value":"1"},{"label":"Appliance Under Warranty","value":"2"}],"expressions":{"show":"$store.pages.NoAccess.gainingAccessSafely == \"0\""},"message":"This is a required field","validators":[],"actions":[{"event":"change","type":"inline-function","data":{"sync":true,"code":"if(cti.store.pages.NoAccess) {\n  if(cti.store.pages.NoAccess.noAccessSafelyReason != undefined) {\n    cti.store.jobs.selectedJob.bJobNoAccessSafely = true;\n  }\n}\n\ncti.utils.updatePage();"},"_auto_id_":"be68559a-3d91-4be4-a842-0c5b6e840341"}]},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"c137dfd8-aa6e-493b-b36e-9d4f91c959d3","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"53e7c95d-2376-4f1c-ba58-1034ce0f4e0b","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"ArrivedOnSite","isConditional":false}}],"expressions":{},"theme":"default","classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"bb22a2c6-fda2-4900-9036-f0e4bd473c25","content":"Next","theme":"default","expressions":{"show":"($store.pages.NoAccess.gainingAccess === undefined || $store.pages.NoAccess.gainingAccess == \"1\") && ($store.pages.NoAccess.gainingAccessSafely === undefined || $store.pages.NoAccess.gainingAccessSafely == \"1\")","disabled":"$store.pages.NoAccess.gainingAccess === undefined || $store.pages.NoAccess.gainingAccessSafely === undefined"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"if(cti.store.jobs.selectedJob.bJobNoAccessSafely == undefined) cti.store.jobs.selectedJob.bJobNoAccessSafely = false;\ncti.store.jobs.selectedJob.bGainedAccess = true;\nif(cti.store.jobs.selectedJob.bRAStatus == undefined) cti.store.jobs.selectedJob.bRAStatus = false;\n\ncti.utils.callAction('go-to-page', { \"name\": \"RiskAssessment\" });"},"_auto_id_":"7d7c291f-9765-49da-89ea-a6304ee277fa"}]},{"name":"sendnoaccess_btn","type":"button","item-type":"button","_auto_id_":"26423c38-12a2-4180-bce7-53924f90cab0","content":"Send No Access","theme":"default","expressions":{"show":"$store.pages.NoAccess.gainingAccess == \"0\"","disabled":"$store.pages.NoAccess.noAccessReason === undefined"},"classes":"abandon-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"if(cti.store.jobs.selectedJob.bJobNoAccess) {\n  if(cti.store.media.noAccessPhoto == undefined) {\n    cti.utils.callAction(\n        \"show-notification\", {\n          \"name\": \"app_noaccessphoto\",\n          \"item-type\": \"app-notification\",\n          \"style\": \"Warning\",\n          \"title\": \"Warning\",\n          \"text\": \"You must take a photo to provide alongside reason for No Access to the property.\"\n\t\t}\n\t);\n  }\n  else {\n    cti.fnNoAccess();\n  }\n}"},"_auto_id_":"1e8b34c7-c70c-4289-b0ca-176df1e53b7e"}]},{"name":"abandonjob_btn","type":"button","item-type":"button","_auto_id_":"9a448c68-8f02-4f27-b812-e894ce32c3bc","content":"Abandon Job","theme":"default","expressions":{"show":"$store.pages.NoAccess.gainingAccessSafely == \"0\"","disabled":"$store.pages.NoAccess.noAccessSafelyReason === undefined"},"classes":"abandon-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"if(cti.store.jobs.selectedJob.bJobNoAccessSafely) {\n  cti.fnAbandonJob();\n}"},"_auto_id_":"3be411ea-a746-4aad-8977-bbb507f834c0"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"AccessDetail","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"f5f6a9fd-d991-4f0d-ba8f-426c16b7f81c","content":"<h4 class=\"title\">Access Detail</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"d2295acd-1fe2-46de-a09a-f6e4947e7c5a","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"NoAccess","componentInstanceId":"e00c06fa-c2a4-4387-9c3c-3837f1036cb8","function":"open"},"_auto_id_":"edad1a1d-5ba7-419b-97a8-4fb7dbebed23"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"ac97024d-f60b-4617-9589-5199eab54d63","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"e263ec15-0af3-4ca0-8cb5-269cb1604ff3"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"c241cd0c-a023-4ffd-9da8-dd859fcd1ac9","content":"Job List","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"0d883f83-5a1f-4edf-a7fd-2f6097204bd3"}],"left-icon":"fa-list"},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"2a7fa332-739a-466b-b9d9-22d9be26616d","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"f4166a1b-2aff-42b2-876b-1ee47c9610ad"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"c19bf49e-9c6b-4b97-b046-ca9c84ef953f","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-component-function","data":{"page":"NoAccess","componentInstanceId":"4706e6e7-975d-4b3e-a1d7-26aa2093d530","function":"show"},"_auto_id_":"829ee6cc-91ba-4588-8fda-b0ea50fe4c9d"},{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"834cd86c-7c83-4d24-aae7-64e33fc4a092"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"65cf7d9b-f23c-4c38-9f73-a4d9dae6c811","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"7a0c1cb1-7401-4f19-b7ea-800417cdc970"}]},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"060ab01f-204a-4d62-b300-0192c3bf27a2","content":"Logout","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"df5ff1cf-e43c-479a-b25f-7dc40ec4244a"}],"left-icon":"fa-sign-out"},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"4706e6e7-975d-4b3e-a1d7-26aa2093d530","attributes":{},"expressions":{}}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"e00c06fa-c2a4-4387-9c3c-3837f1036cb8","attributes":{},"expressions":{}}],"_auto_id_":"82cef5cf-5b3b-4cad-9ad6-d549c9ef473e","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"05ed2957-c433-41f1-8496-be7e93f3a23e","content":[{"name":"gainingAccessSafely","type":"choice","item-type":"radio","_auto_id_":"5c585e08-4d6a-4e65-947d-cc1625066357","label":"Are you able to safely enter the property?","required":true,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{},"classes":"cb-bias-last","actions":[],"message":"This is a required field","validators":[]},{"name":"noAccessSafelyReason","type":"choice","item-type":"select","_auto_id_":"e52ac253-f19a-4a1a-8c2d-bc518916115f","label":"Abandon job reason?","required":false,"options":[{"label":"Abusive/Violent Tenant","value":"0"},{"label":"Appliance Not Accessible","value":"1"},{"label":"Appliance Under Warranty","value":"2"}],"expressions":{"show":"$store.pages.AccessDetail.gainingAccessSafely == \"0\""},"message":"This is a required field","validators":[],"actions":[{"event":"change","type":"inline-function","data":{"sync":true,"code":"if(cti.store.pages.AccessDetail) {\n  if(cti.store.pages.AccessDetail.noAccessSafelyReason != undefined) {\n    cti.store.jobs.selectedJob.bJobNoAccessSafely = true;\n  }\n}\n\ncti.utils.updatePage();"},"_auto_id_":"a37684f7-b7df-4f33-a3cf-eeed95b9d972"}]},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"0b163730-b573-4a5c-a8c7-f5da4ca32b62","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"a94c746d-473f-4e12-8d10-86125fbb7798","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"NoAccess","isConditional":false}}],"expressions":{},"theme":"default","classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"516d2c60-1690-4c27-8ffd-9ffa435d9db8","content":"Next","theme":"default","expressions":{"show":"$store.pages.AccessDetail === undefined || $store.pages.AccessDetail.gainingAccessSafely === undefined || $store.pages.AccessDetail.gainingAccessSafely == \"1\"","disabled":"$form.invalid"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.jobs.selectedJob.bGainedAccess = true;\nif(cti.store.jobs.selectedJob.bRAStatus == undefined) cti.store.jobs.selectedJob.bRAStatus = false;\n\ncti.utils.callAction('go-to-page', { \"name\": \"RiskAssessment\" });"},"_auto_id_":"3b91df55-8e74-46b8-a0ec-acab0753ecfc"}]},{"name":"abandonjob_btn","type":"button","item-type":"button","_auto_id_":"3fcdb86d-3708-4472-bfb7-6410ea69dd8b","content":"Abandon Job","theme":"default","expressions":{"show":"$store.pages.AccessDetail.gainingAccessSafely == \"0\"","disabled":"$store.jobs.selectedJob.bJobNoAccessSafely == false"},"classes":"abandon-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"if(cti.store.jobs.selectedJob.bJobNoAccessSafely) {\n  cti.fnAbandonJob();\n}"},"_auto_id_":"26d4132f-0906-4e5a-9ae9-38c77fedf592"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"RiskAssessment","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"61252182-6921-49e3-ae64-7ccd7c3f0a0a","content":"<h4 class=\"title\">Risk Assessment</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"d791274f-74e3-4ae3-ba0f-6379920cdfe8","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"RiskAssessment","componentInstanceId":"ae6d683d-ed37-4524-a9a5-34ad1f8829be","function":"open"},"_auto_id_":"7fb2826b-d4c5-487c-85b3-be99829e3860"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"bc5189f5-af09-47db-8b1d-2270b19d779f","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"fac33efc-fcb5-4f10-bf5e-0a3f6ce4557f"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"452bddc2-df32-4db0-bfbe-b5770a3144bf","content":"Job List","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"a74ab77a-014a-4745-90a5-7ce5acf58636"}],"left-icon":"fa-list"},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"b9709f73-6972-41ed-9b56-9ab5230c78f4","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"56946b71-dd07-4f73-9554-e4414539f2ee"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"20065d4d-bc04-4d14-a0bd-ec9909eba14e","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-component-function","data":{"page":"RiskAssessment","componentInstanceId":"790c49a2-b33a-4b10-a151-4057862dcdce","function":"show"},"_auto_id_":"a49b23b5-a806-4d25-9810-f94249b0ed58"},{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"9094b192-1ff6-479e-aff7-e35576396b31"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"df010049-2382-4904-8060-99767fdc3a31","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"88aaf061-8f74-4a82-8ae2-8d452b050b89"}]},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"ff96f720-799f-40d6-9932-d4f1d21fbada","content":"Logout","theme":"default","expressions":{},"actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"08b18772-7aee-4d54-b405-add6db2b24ed"}],"left-icon":"fa-sign-out"},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"790c49a2-b33a-4b10-a151-4057862dcdce","attributes":{},"expressions":{}}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"ae6d683d-ed37-4524-a9a5-34ad1f8829be","attributes":{},"expressions":{}}],"_auto_id_":"6a9c7e38-29cd-4c58-9801-f5f1658f15a2","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"36cb574f-8195-485c-ba38-a8728baa7c5c","content":[{"name":"html_riskassessment","type":"content","item-type":"html","_auto_id_":"b3a24983-4aab-45ab-99a0-48a6e96f5e3b","content":"<h4>The <span style=\"font-weight:bold\">Risk Assessment</span> must be completed prior to carrying out daily works.</h4>\n<hr>","expressions":{"show":"($store.payloads.riskAssessmentPayload == undefined || $store.payloads.riskAssessmentPayload == \"\") && $store.jobs.selectedJob.bRAStatus != \"Failed Risk Assessment\""}},{"name":"questionOne","type":"choice","item-type":"radio","_auto_id_":"24f3e04e-9de0-4f9c-9683-db576fd6fd49","label":"I have identified and put into place control measures for all the significant work I am required to carry out. I have referred to RA Guidance and generic RA as required.","required":true,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"show":"($store.payloads.riskAssessmentPayload == undefined || $store.payloads.riskAssessmentPayload == \"\") && $store.jobs.selectedJob.bRAStatus != \"Failed Risk Assessment\""},"message":"This is a required field","classes":"cb-bias-last","actions":[],"validators":[]},{"name":"questionTwo","type":"choice","item-type":"radio","_auto_id_":"f95b2d15-33bb-4c22-a9fd-20f52f9db494","label":"I have identified all the persons exposed to the work I am carrying out and have included them in my risk assessment having put in place any necessary control measures to protect them.","required":true,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"show":"($store.payloads.riskAssessmentPayload == undefined || $store.payloads.riskAssessmentPayload == \"\") && $store.jobs.selectedJob.bRAStatus != \"Failed Risk Assessment\""},"message":"This is a required field","classes":"cb-bias-last","actions":[]},{"name":"questionThree","type":"choice","item-type":"radio","_auto_id_":"923c4a48-123b-4acc-9c4d-201813b5099e","label":"The tools and equipment I am planning to use are suitable for the task and to the best of my knowledge, free from faults and defects.","required":true,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"show":"($store.payloads.riskAssessmentPayload == undefined || $store.payloads.riskAssessmentPayload == \"\") && $store.jobs.selectedJob.bRAStatus != \"Failed Risk Assessment\""},"message":"This is a required field","classes":"cb-bias-last","actions":[]},{"name":"questionFour","type":"choice","item-type":"radio","_auto_id_":"ff54026a-b66a-4b6d-b080-7b1ebb2c45bc","label":"I have identified all the PPE equipment and will ensure it is worn correctly.","required":true,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"show":"($store.payloads.riskAssessmentPayload == undefined || $store.payloads.riskAssessmentPayload == \"\") && $store.jobs.selectedJob.bRAStatus != \"Failed Risk Assessment\""},"message":"This is a required field","classes":"cb-bias-last","actions":[]},{"name":"questionFive","type":"choice","item-type":"radio","_auto_id_":"890b8234-af86-4e54-ac35-3c4e1c712f04","label":"Access equipment used is within its period of inspection, will only be used by those that are trained to do so, and I will abide by the 'Working at Height' safety instructions.","required":true,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"show":"($store.payloads.riskAssessmentPayload == undefined || $store.payloads.riskAssessmentPayload == \"\") && $store.jobs.selectedJob.bRAStatus != \"Failed Risk Assessment\""},"message":"This is a required field","classes":"cb-bias-last","actions":[]},{"name":"questionSix","type":"choice","item-type":"radio","_auto_id_":"502db474-0127-4520-a35f-e9336c19189e","label":"Access equipment used is within its period of inspection, will only be used by those that are trained to do so, and I will abide by the 'Working at Height' safety instructions.","required":true,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"show":"($store.payloads.riskAssessmentPayload == undefined || $store.payloads.riskAssessmentPayload == \"\") && $store.jobs.selectedJob.bRAStatus != \"Failed Risk Assessment\""},"message":"This is a required field","classes":"cb-bias-last","actions":[]},{"name":"questionSeven","type":"choice","item-type":"radio","_auto_id_":"4aadee15-af3e-4e5d-885d-ff7d4cf965fd","label":"If the work involves manual handling I will ensure that the load is within my lifting capability.","required":true,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"show":"($store.payloads.riskAssessmentPayload == undefined || $store.payloads.riskAssessmentPayload == \"\") && $store.jobs.selectedJob.bRAStatus != \"Failed Risk Assessment\""},"message":"This is a required field","classes":"cb-bias-last","actions":[]},{"name":"questionEight","type":"choice","item-type":"radio","_auto_id_":"eb2c8a36-37b3-40c6-b76e-9ce084d03751","label":"If the task involves the use of any hazardous substances (including asbestos) I will follow the COSHH safety data sheet/asbestos procedures as necessary and ensure all precautions are taken.","required":true,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"show":"($store.payloads.riskAssessmentPayload == undefined || $store.payloads.riskAssessmentPayload == \"\") && $store.jobs.selectedJob.bRAStatus != \"Failed Risk Assessment\""},"message":"This is a required field","classes":"cb-bias-last","actions":[]},{"name":"confirmRiskAssessment","type":"choice","item-type":"radio","_auto_id_":"4aaa99a4-5e33-4216-9f25-56daf79d5845","label":"Have you read and understood the full Risk Assessment Policy relating to this type of work and is it safe to proceed to do the work?","required":false,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"show":"$store.payloads.riskAssessmentPayload != undefined && $store.jobs.selectedJob.bRAStatus == false"},"message":"This is a required field","classes":"cb-bias-last","actions":[],"validators":[]},{"name":"confirmRASignature","type":"user-input","item-type":"signature","_auto_id_":"e64a165a-4e07-40d1-a02f-6b412ab41f90","label":"Operative Signature:","required":false,"expressions":{"show":"$store.pages.RiskAssessment.confirmRiskAssessment == \"1\" && $store.payloads.riskAssessmentPayload != undefined && $store.jobs.selectedJob.bRAStatus == false"},"validators":[],"actions":[]},{"name":"html_rafailed","type":"content","item-type":"html","_auto_id_":"131656a4-f5a3-4147-adcc-4b65a201b48d","content":"<div onclick=cti.fnCallSupervisor() style=\"width:100%;text-align:center;\"><p class=\"fa supervisor\"></p></div>\n<h4 class=\"check-fail-header\">One or more of the above checks has failed. Please call your Supervisor by tapping on the icon above before continuing...</h4>","expressions":{"show":"($store.pages.RiskAssessment.questionOne == \"0\" || $store.pages.RiskAssessment.questionTwo == \"0\" || $store.pages.RiskAssessment.questionThree == \"0\" || $store.pages.RiskAssessment.questionFour == \"0\" || $store.pages.RiskAssessment.questionFive == \"0\" || $store.pages.RiskAssessment.questionSix == \"0\" || $store.pages.RiskAssessment.questionSeven == \"0\" || $store.pages.RiskAssessment.questionEight == \"0\") && $store.payloads.riskAssessmentPayload == undefined"}},{"name":"html_ra_complete","type":"content","item-type":"html","_auto_id_":"9d23536b-3052-4679-91c3-b908a89f421a","content":"<div style=\"width:100%;text-align:center;\"><p class=\"fa racomplete\"></p></div>\n<h4 class=\"completeheader\">Risk Assesment Complete</h4>","expressions":{"show":"$store.jobs.selectedJob.bRAStatus == true"}},{"name":"html_ra_abandon","type":"content","item-type":"html","_auto_id_":"9206befc-47e0-48e7-acdb-a15b8a798f58","content":"<div style=\"width:100%;text-align:center;\"><p class=\"fa raabandon\"></p></div>\n<h4 class=\"abandonheader\">Are you sure you want to fail the Risk Assessment and Abandon this job?</h4>","expressions":{"show":"$store.jobs.selectedJob.bRAStatus != true && $store.jobs.selectedJob.bRAStatus != false"}},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"44028248-b8c2-43f8-9d5e-f5163a2c4f9c","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"6d45ce84-18ad-485f-885f-ab3fa9586967","content":"Previous","theme":"default","expressions":{"show":"$store.jobs.selectedJob.bRAStatus == true || $store.jobs.selectedJob.bRAStatus == false"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction('go-to-page', { \"name\": \"NoAccess\" });"},"_auto_id_":"be3736bc-238e-4eb7-a9b0-d52c51f7a9fa"}],"classes":"button-bar-btn"},{"name":"confirm_btn","type":"button","item-type":"button","_auto_id_":"df0ef22b-899e-45a4-ac98-bee881b1a2bb","content":"Confirm","theme":"default","expressions":{"disabled":"$form.invalid","show":"($store.pages.RiskAssessment.questionOne != \"0\" && $store.pages.RiskAssessment.questionTwo != \"0\" && $store.pages.RiskAssessment.questionThree != \"0\" && $store.pages.RiskAssessment.questionFour != \"0\" && $store.pages.RiskAssessment.questionFive != \"0\" && $store.pages.RiskAssessment.questionSix != \"0\" && $store.pages.RiskAssessment.questionSeven != \"0\" && $store.pages.RiskAssessment.questionEight != \"0\") && $store.payloads.riskAssessmentPayload == undefined"},"classes":"confirm-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var pages = [ 'RiskAssessment' ];\ncti.fnPreparePayload(pages);\n\ncti.store.payloads.riskAssessmentPayload = cti.store.saveActionPayload;\ndelete cti.store.saveActionPayload;\n\ncti.utils.updatePage();"},"_auto_id_":"29a386fc-5f76-43d0-8630-c1e2a464db29"}]},{"name":"cancel_btn","type":"button","item-type":"button","_auto_id_":"371a4e2d-94b0-4e14-a522-1bc6bb500776","content":"Cancel","theme":"default","expressions":{"show":"$store.pages.RiskAssessment.confirmRiskAssessment == \"0\" && $store.jobs.selectedJob.bRAStatus == \"Failed Risk Assessment\""},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.jobs.selectedJob.bRAStatus = false;\ncti.store.payloads.riskAssessmentPayload = undefined;\ncti.utils.destroyPageData('RiskAssessment');\n\ncti.utils.updatePage();"},"_auto_id_":"bcec0525-8ed5-4fbf-8fbd-fb36c83bf980"}],"classes":"button-bar-btn"},{"name":"complete_proceed_btn","type":"button","item-type":"button","_auto_id_":"5fd24323-4bb6-4a90-a4ac-16efe5e33a47","content":"Complete","theme":"default","expressions":{"show":"$store.payloads.riskAssessmentPayload != undefined && $store.jobs.selectedJob.bRAStatus == false && $store.pages.RiskAssessment.confirmRiskAssessment != \"0\"","disabled":"$store.pages.RiskAssessment.confirmRiskAssessment == undefined || $store.pages.RiskAssessment.confirmRASignature == undefined"},"classes":"confirm-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"debugger;\nvar pages = [ 'RiskAssessment' ];\ncti.fnPreparePayload(pages);\n\ncti.store.payloads.riskAssessmentPayload = cti.store.saveActionPayload;\nvar payload = cti.store.payloads.riskAssessmentPayload;\n\npayload.questionOne == 1 ? payload.questionOne = \"Y\" : payload.questionOne = \"N\";\npayload.questionTwo == 1 ? payload.questionTwo = \"Y\" : payload.questionTwo = \"N\";\npayload.questionThree == 1 ? payload.questionThree = \"Y\" : payload.questionThree = \"N\";\npayload.questionFour == 1 ? payload.questionFour = \"Y\" : payload.questionFour = \"N\";\npayload.questionFive == 1 ? payload.questionFive = \"Y\" : payload.questionFive = \"N\";\npayload.questionSix == 1 ? payload.questionSix = \"Y\" : payload.questionSix = \"N\";\npayload.questionSeven == 1 ? payload.questionSeven = \"Y\" : payload.questionSeven = \"N\";\npayload.questionEight == 1 ? payload.questionEight = \"Y\" : payload.questionEight = \"N\";\n\ndelete cti.store.saveActionPayload;\n\ncti.store.jobs.selectedJob.bRAStatus = true;\n\ncti.store.variables.jobCollectionType = \"riskassessment\";\ncti.utils.callAction('call-actionflow', { \"name\": \"JobDataCollection\" });\n  \ncti.utils.updatePage();"},"_auto_id_":"9d30165d-f923-4293-8182-b32757a487de","actions":[]}]},{"name":"abandon_raquestions_btn","type":"button","item-type":"button","_auto_id_":"4d9d7d43-a2f4-4cc7-992e-5f60b01b4353","content":"Abandon Job","theme":"default","expressions":{"show":"($store.pages.RiskAssessment.questionOne == \"0\" || $store.pages.RiskAssessment.questionTwo == \"0\" || $store.pages.RiskAssessment.questionThree == \"0\" || $store.pages.RiskAssessment.questionFour == \"0\" || $store.pages.RiskAssessment.questionFive == \"0\" || $store.pages.RiskAssessment.questionSix == \"0\" || $store.pages.RiskAssessment.questionSeven == \"0\" || $store.pages.RiskAssessment.questionEight == \"0\") && $store.payloads.riskAssessmentPayload == undefined"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var pages = [ 'RiskAssessment' ];\ncti.fnPreparePayload(pages);\n\ncti.store.payloads.riskAssessmentPayload = cti.store.saveActionPayload;\ndelete cti.store.saveActionPayload;\n\ncti.store.jobs.selectedJob.bRAStatus = \"Failed Risk Assessment\";\ncti.store.pages.RiskAssessment.confirmRiskAssessment = \"0\";\n\ncti.utils.updatePage();"},"_auto_id_":"d0213a9c-c439-410c-957b-ff9860a4b8ca"}],"classes":"abandon-bar-btn"},{"name":"abandon_confirmcheck_btn","type":"button","item-type":"button","_auto_id_":"573aaabb-f63f-4ec9-a267-f1469ee3503c","content":"Abandon","theme":"default","expressions":{"show":"$store.payloads.riskAssessmentPayload != undefined && $store.jobs.selectedJob.bRAStatus == false && $store.pages.RiskAssessment.confirmRiskAssessment == \"0\"","disabled":"$store.pages.RiskAssessment.confirmRiskAssessment == undefined"},"classes":"confirm-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var pages = [ 'RiskAssessment' ];\ncti.fnPreparePayload(pages);\n\ncti.store.payloads.riskAssessmentPayload = cti.store.saveActionPayload;\ndelete cti.store.saveActionPayload;\n\ncti.store.jobs.selectedJob.bRAStatus = \"Failed Risk Assessment\";\n  \ncti.utils.updatePage();"},"_auto_id_":"83c058e3-5413-4507-9962-697ddd421f00"}]},{"name":"abandon_job_btn","type":"button","item-type":"button","_auto_id_":"f84c54fb-7d85-49b8-ba19-ad3e7680179c","content":"Abandon Job","theme":"default","expressions":{"show":"$store.pages.RiskAssessment.confirmRiskAssessment == \"0\" && $store.jobs.selectedJob.bRAStatus == \"Failed Risk Assessment\""},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var pages = [ 'RiskAssessment' ];\ncti.fnPreparePayload(pages);\n\ncti.store.payloads.riskAssessmentPayload = cti.store.saveActionPayload;\ndelete cti.store.saveActionPayload;\n\ncti.store.jobs.selectedJob.bRAStatus = \"Failed Risk Assessment\";\ncti.store.pages.RiskAssessment.confirmRiskAssessment = \"0\";\n\ncti.fnAbandonJob();"},"_auto_id_":"b2da2678-2570-4c18-9fa9-ea3f3384a737"}],"classes":"abandon-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"459ac492-0102-4508-96a1-3cb87e9d9c8b","content":"Next","theme":"default","expressions":{"disabled":"$form.invalid","show":"$store.jobs.selectedJob.bRAStatus == true && $store.pages.RiskAssessment.confirmRiskAssessment == \"1\""},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"if(cti.store.jobs.selectedJob.bJobStartWork == undefined) {\n  cti.store.jobs.selectedJob.bJobStartWork = false;\n  cti.store.jobs.selectedJob.sJobStartWorkText = \"Not started yet\";\n  cti.store.jobs.selectedJob.iJobStartWorkTime = \"\";\n}\n\ncti.utils.callAction('go-to-page', { \"name\": \"StartingWork\" });"},"_auto_id_":"db6a654c-cad0-480f-b221-304191f6002c"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"StartingWork","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"663d742a-b42d-43c7-9dff-56df79a9cb6e","content":"<h4 class=\"title\">Starting Work</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"61d7a66c-2d7a-483d-8947-0e34272f2f6a","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"StartingWork","componentInstanceId":"ac134ed8-9cc6-40cb-920f-1f3183b92a06","function":"open"},"_auto_id_":"ff637b38-6f7c-401f-a62d-01dd0ce27858"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"db703891-19d9-41ac-926f-265a2d18e7e8","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"a52cb4c5-78b4-4a5b-ba14-781dbdbff251"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"ee36fd33-3fe1-4f37-8afb-5f5117720f32","content":"Job List","theme":"default","expressions":{"show":"$store.jobs.selectedJob.bJobStartWork == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"57ad355d-dc42-4b76-b98a-fc3176eedba9"}],"left-icon":"fa-list"},{"name":"btnVanStockCodes","type":"button","item-type":"button","_auto_id_":"f6f60ed7-760f-4cc5-9068-95359e94973e","content":"Van Stock Codes","theme":"default","expressions":{"show":"$store.jobs.selectedJob.jobstarted == true"},"left-icon":"fa-truck","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateVanStock","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"8b4ea5c4-17f9-45ef-8e0f-51f2959de49d"}]},{"name":"btnSORCodes","type":"button","item-type":"button","_auto_id_":"9028f1f3-6e41-4a18-a474-1f45f7d737a2","content":"SOR Codes","theme":"default","expressions":{"show":"$store.jobs.selectedJob.jobstarted == true"},"left-icon":"fa-barcode","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSORCodes","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"0ffa3db7-271a-4e3d-ba9d-719e9b362fb1"}]},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"c4ac0aa5-f896-42d0-94b8-83e1afe89332","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"1a5b4738-593d-4a04-b9ad-91718eef975b"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"e24db191-d070-4bf0-837b-aea54201ad8a","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"dee311d4-3516-408e-9414-a39d21b9d7e4"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"a056bdd1-66d4-4db8-89ee-76733c3cc527","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"c137826c-d4a3-43fc-ba50-d442165589fa"}]},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"855bebe3-5483-46af-bfc1-86654f989551","content":"Logout","theme":"default","expressions":{"show":"$store.jobs.selectedJob.bJobStartWork == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"0c39483a-de75-4039-bbf4-2e80aba82b1d"}],"left-icon":"fa-sign-out"}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"ac134ed8-9cc6-40cb-920f-1f3183b92a06","attributes":{},"expressions":{}}],"_auto_id_":"d8bf1505-b85e-49d6-bd9d-28c4d6fd960b","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"6115293c-a108-4f17-9195-18340abc9cea","content":[{"name":"workDescription","type":"user-input","item-type":"text","_auto_id_":"92ef38c0-9cc2-4435-8f91-279b2f49b6f6","label":"Description of work to be carried out:","required":true,"multiline":true,"debounce":250,"expressions":{},"message":"This is a required field","validators":[],"actions":[]},{"name":"estimatedDuration","type":"choice","item-type":"select","_auto_id_":"2e50af8e-8b57-431b-9072-1f8b6d5aff76","label":"Estimated Duration:","required":true,"options":[{"label":"00:15","value":"15"},{"label":"00:30","value":"30"},{"label":"00:45","value":"45"},{"label":"01:00","value":"60"},{"label":"01:15","value":"75"},{"label":"01:30","value":"90"},{"label":"01:45","value":"105"},{"label":"02:00","value":"120"}],"expressions":{},"message":"This is a required field","actions":[{"event":"change","type":"inline-function","data":{"sync":true,"code":"cti.store.jobs.selectedJob.iJobStartWorkEst = cti.store.pages.StartingWork.estimatedDuration.value;\ncti.utils.updatePage();"},"_auto_id_":"f5d906be-edb0-488b-8269-2e87350df6f4","actions":[]}]},{"name":"html_totalmins","type":"content","item-type":"html","_auto_id_":"8d45d49c-bcb3-4ea8-994c-ff5c3307b885","content":"<p style=\"margin-bottom:2vh;margin-top:2vh;font-size: 12pt;\">Total Minutes: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.iJobStartWorkEst'|store}}</span></p>\n<hr>","expressions":{}},{"name":"html_startjob","type":"content","item-type":"html","_auto_id_":"5184c942-8110-41a2-b021-3de683adf7b2","content":"<div style=\"width:100%;text-align:center;\"><p class=\"fa startjob\"></p></div>","expressions":{"show":"$store.jobs.selectedJob.bJobStartWork == false"}},{"name":"html_jobstarted","type":"content","item-type":"html","_auto_id_":"9ae7cc53-6b63-4da2-b012-cba72534108c","content":"<div style=\"width:100%;text-align:center;\"><p class=\"fa complete\"></p></div>\n<h4 class=\"completeheader\">Job Started</h4>","expressions":{"show":"$store.jobs.selectedJob.bJobStartWork == true"}},{"name":"startjob_btn","type":"button","item-type":"button","_auto_id_":"57009568-8071-4198-a98e-697095ac0182","content":"Start Job","theme":"default","expressions":{"show":"$store.jobs.selectedJob.bJobStartWork == false","disabled":"$form.invalid"},"classes":"startjob-btn","actions":[{"event":"click","type":"call-function","data":{"name":"fnStartJob"},"_auto_id_":"d5f2e1f2-7378-4b24-b9bc-20adb82dca69"}]},{"name":"html_jobstartedtime","type":"content","item-type":"html","_auto_id_":"bb1b2b6f-0019-4e43-83eb-a1179cf44136","content":"<hr>\n<p style=\"font-size: 12pt;\">{{'$store.jobs.selectedJob.sJobStartWorkText'|store}}: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.iJobStartWorkTime'|store}}</span></p>","expressions":{}},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"51ce9378-9778-4d4c-ad27-1a02242b52bf","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"8124d5d2-6415-4baa-99a2-c93d74426f38","content":"Previous","theme":"default","expressions":{"disabled":"$store.jobs.selectedJob.bJobStartWork == true"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction('go-to-page', { \"name\": \"RiskAssessment\" });"},"_auto_id_":"9dc37750-0ee3-4084-a5c8-45c7466558b1"}]},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"7ca4547a-2d97-4f10-9676-79cd2e9ae8f3","content":"Next","theme":"default","expressions":{"disabled":"$store.jobs.selectedJob.bJobStartWork == false || $form.invalid"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.jobs.selectedJob.sWorkToBeDoneDetail = cti.store.pages.StartingWork.workDescription;\n\ncti.utils.callAction('go-to-page', { \"name\": \"PreWorkPhotos\" });"},"_auto_id_":"68a23321-fc8f-4877-b6ef-ee0359b03eb1"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"PreWorkPhotos","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"3e6eb29f-c6d0-4825-93ec-7aa9edb56589","content":"<h4 class=\"title\">Pre Work Photos</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"fee2922a-f98d-470e-9089-1b58a8722406","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"BeforePhotos","componentInstanceId":"14a98a91-e64c-4cba-a440-669fe91450e9","function":"open"},"_auto_id_":"4df0e568-49da-4ec5-a073-fea117f5a935"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"cc8bd233-139d-43a7-8739-a7fe08b231d6","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo","params":{"page":"JobList"}},"_auto_id_":"f85d11bc-4a41-41cf-b9cb-1c7ef4e37b61"}]},{"name":"btnVanStockCodes","type":"button","item-type":"button","_auto_id_":"39b259e5-72ea-46a4-b46e-7f617e343fcc","content":"Van Stock Codes","theme":"default","expressions":{},"left-icon":"fa-truck","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateVanStock","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"7ab68470-6692-4cc6-ad20-1aea6681e670"}]},{"name":"btnSORCodes","type":"button","item-type":"button","_auto_id_":"58680b26-b21e-41f4-bd79-93164e4e8915","content":"SOR Codes","theme":"default","expressions":{},"left-icon":"fa-barcode","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSORCodes","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"8e6b116b-f0b0-4da2-82ec-805873b2d7b5"}]},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"f6927048-8c47-4370-a76d-3085e14ad685","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"5c3dc081-0f15-44f4-9bce-ce65563e6ea6"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"49081510-8c08-4cce-94b3-6da7131836e5","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"b2ac683f-9583-4669-a3ae-cb9b6ff07fad"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"710c55fc-ded2-4d37-8f08-76083988c47b","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"23e5b6b2-862c-49fa-9a16-58dbcac9e365"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"14a98a91-e64c-4cba-a440-669fe91450e9","attributes":{},"expressions":{}}],"_auto_id_":"61bdddc1-6aa9-467e-8077-ca694301f844","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"7385ff18-0ba5-413d-ab19-4206def1bf0c","content":[{"name":"preWorkPhotoPermission","type":"choice","item-type":"radio","_auto_id_":"31bec1b7-1993-428e-a209-abf193c7c4ff","label":"Have you got permission to take photos?","required":false,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{},"classes":"cb-bias-last","actions":[]},{"name":"preWorkPhotoDescription","type":"user-input","item-type":"text","_auto_id_":"c51ced36-0d49-412a-b06d-c3ee58473e03","label":"Please enter any tenant comments below:","required":false,"multiline":false,"debounce":250,"expressions":{"show":"$store.pages.PreWorkPhotos.preWorkPhotoPermission == '0'"}},{"name":"preWorkPhotos","type":"content","item-type":"html","_auto_id_":"821af9f8-de17-4be2-9fa6-1029cd4f90ac","content":"<h4>Pre Work Photos</h4><p>Please take any photos relevent to the job prior to work being done.</p>","expressions":{"show":"$store.pages.PreWorkPhotos.preWorkPhotoPermission == \"1\""}},{"name":"btnTakePhoto","type":"button","item-type":"button","_auto_id_":"b48b7ee0-8e93-4b4d-ba30-e9c7d6f9de96","content":"Take a photo","theme":"default","left-icon":"fa-camera","expressions":{"show":"$store.pages.PreWorkPhotos.preWorkPhotoPermission == \"1\""},"actions":[{"event":"click","type":"call-component-function","data":{"page":"PreWorkPhotos","componentInstanceId":"708d6621-8b2f-4843-a6cd-c0d7dd539537","function":"takePhoto"},"_auto_id_":"51389501-1d7c-4a83-a533-185e5288a7de"}],"classes":"takephoto-btn"},{"name":"PreWorkPhotoManager","type":"component","item-type":"web-component","content":[],"componentId":"98807067-3c95-452a-9d3d-74d7a04fa651","_auto_id_":"708d6621-8b2f-4843-a6cd-c0d7dd539537","attributes":{"captureCategory":"Pre Work","displayCategory":"Pre Work"},"expressions":{"show":"$store.pages.PreWorkPhotos.preWorkPhotoPermission == '1'"},"actions":[]},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"29a1abeb-d4c0-4a51-b210-ece31c96d6af","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"da97e920-55a4-42b2-8128-93b4e0029c7b","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"StartingWork","isConditional":false}}],"expressions":{},"theme":"default","classes":"button-bar-btn"},{"name":"next_yespermission_btn","type":"button","item-type":"button","_auto_id_":"47ed2aae-881a-4766-8384-1058da6c1261","content":"Next","theme":"default","expressions":{"show":"$store.pages.PreWorkPhotos.preWorkPhotoPermission == \"1\""},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.jobs.selectedJob.bWorkPhoto = \"Y\";\ncti.store.jobs.selectedJob.bWorkPhotoComment = \"Permission has been granted \";\n\ncti.store.variables.jobCollectionType = \"tenantphoto\";\ncti.utils.callAction('call-actionflow', { \"name\": \"JobDataCollection\" });\n\ncti.utils.callAction('go-to-page', { \"name\": \"JobInformation\" });"},"_auto_id_":"d2772538-68c0-4d6d-a4cd-0e1592e4dee0"}]},{"name":"next_nopermission_btn","type":"button","item-type":"button","_auto_id_":"b49602e8-a406-4f05-8ccc-f9b63fac1dc3","content":"Next","theme":"default","expressions":{"disabled":"$store.pages.PreWorkPhotos.preWorkPhotoDescription == \"\" || $store.pages.PreWorkPhotos.preWorkPhotoDescription == undefined","show":"$store.pages.PreWorkPhotos.preWorkPhotoPermission == \"0\" || $store.pages.PreWorkPhotos.preWorkPhotoPermission == undefined"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.jobs.selectedJob.bWorkPhoto = \"N\";\ncti.store.jobs.selectedJob.bWorkPhotoComment = cti.store.pages.PreWorkPhotos.preWorkPhotoDescription;\n\ncti.store.variables.jobCollectionType = \"tenantphoto\";\ncti.utils.callAction('call-actionflow', { \"name\": \"JobDataCollection\" });\n\ncti.utils.callAction('go-to-page', { \"name\": \"JobInformation\" });"},"_auto_id_":"d595c2c4-903c-4676-a031-add6b4ed5cc7"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"JobInformation","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"181693d9-0887-4883-9d5f-f3eeebc02513","content":"<h4 class=\"title\">Job Information</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"af5a75e8-dc88-49ba-9759-b8ffbfa61b18","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"JobInformation","componentInstanceId":"4a60f80f-b746-477d-92c0-97648aeb341a","function":"open"},"_auto_id_":"c6c39450-90f5-4ae2-9796-8fed8716897a"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"959a5274-39eb-4cd2-8adf-ea2dd8bb61fd","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo","params":{"page":"JobList"}},"_auto_id_":"65c82e6c-cf8e-4699-b0a6-15d7c90e2348"}]},{"name":"btnVanStockCodes","type":"button","item-type":"button","_auto_id_":"ef7b5dd3-dd18-42e9-a67f-957436ccf733","content":"Van Stock Codes","theme":"default","expressions":{},"left-icon":"fa-truck","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateVanStock","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"085514d0-ab76-4bcc-81db-649f3db7f288"}]},{"name":"btnSORCodes","type":"button","item-type":"button","_auto_id_":"3d98bc16-6762-4798-a950-21fae0fd28fb","content":"SOR Codes","theme":"default","expressions":{},"left-icon":"fa-barcode","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSORCodes","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"7af3f42e-1c77-4f53-ba5a-88e331ef14fd"}]},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"c588c6cb-f263-4f49-a087-4cad0b4c0a9e","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"b7ba8772-185c-44b9-986a-c389ec533dff"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"f1edfce4-a990-4be2-a70c-eb6c7fb48532","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"638efdb8-1536-4e11-a3a5-326f6ff4e755"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"e2f9e4ee-7322-4b42-a579-baf0461539c8","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"a72580fa-8366-4c0b-9afc-f9c5315b5fd6"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"4a60f80f-b746-477d-92c0-97648aeb341a","attributes":{},"expressions":{}}],"_auto_id_":"68d06738-9558-485c-8c81-18ea6e908806","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"46156afe-d3aa-4530-9dde-ea0ff06b2cd6","content":[{"name":"html_worktodo","type":"content","item-type":"html","_auto_id_":"c7f941c9-6b4d-49fc-bc2a-7edb72f6c6e7","content":"<h4>Work to be carried out</h4>\n<p>{{'$store.jobs.selectedJob.sWorkToBeDoneDetail'|store}}</p>\n<hr>","expressions":{}},{"name":"workCompleteDescription","type":"user-input","item-type":"text","_auto_id_":"f86cf4ee-98b8-4a3a-826a-65849c6f9961","label":"Description of work carried out to remedy the issue:","required":true,"multiline":true,"debounce":250,"expressions":{},"message":"This is a required field","actions":[]},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"7379fa3a-24ce-479a-b75d-04a87779e2fd","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"3bc2eee8-6719-4bcb-98ee-fee93605ad66","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"PreWorkPhotos","isConditional":false}}],"expressions":{},"theme":"default","classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"42346708-d1aa-4dfe-b714-944b71d3915a","content":"Next","theme":"default","expressions":{"disabled":"$form.invalid"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.jobs.selectedJob.sResultDetail = cti.store.pages.JobInformation.workCompleteDescription;\n\ncti.utils.callAction('go-to-page', { \"name\": \"PostWorkPhotos\" });"},"_auto_id_":"a63530b6-bad7-42c8-a2bb-40e8283af927"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"PostWorkPhotos","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"293f6147-315f-42d7-bb75-84c7e35e7c2d","content":"<h4 class=\"title\">Post Work Photos</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"65ba7fb8-be68-4683-8ba0-fb22766c5945","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"PostWorkPhotos","componentInstanceId":"4986e8ea-5488-4dcd-958a-606c8f464218","function":"open"},"_auto_id_":"940b185e-1a79-4988-873f-87a50fd541b2"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"5feb7932-4501-45c9-8b14-d56eeeba6ec9","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo","params":{"page":"JobList"}},"_auto_id_":"5750a618-6b4f-4f48-b4e2-fd507e3fc344"}]},{"name":"btnVanStockCodes","type":"button","item-type":"button","_auto_id_":"ef905248-4af2-4d58-9c7a-7e3595bb217e","content":"Van Stock Codes","theme":"default","expressions":{},"left-icon":"fa-truck","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateVanStock","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"5ff6bdcc-f5ac-473e-987b-397f98ce8fbb"}]},{"name":"btnSORCodes","type":"button","item-type":"button","_auto_id_":"32cf372f-2803-4762-a12b-b0c4aa974647","content":"SOR Codes","theme":"default","expressions":{},"left-icon":"fa-barcode","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSORCodes","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"550b795a-552c-467b-a71a-3029771d59df"}]},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"e3f184bc-d591-40ca-8ac9-8df705cb6783","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"42f4e74c-19f2-4f4f-8689-4865c8e87fc8"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"40c256a6-46a1-47fa-b360-2154b7c6d4ad","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"99f1bc81-1317-428b-ae23-d5a09d5e0a74"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"a6bbd75a-228f-4102-bc87-8501e6aa86ce","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"7c1fb3b2-a49c-4217-9741-b97703ec87f4"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"4986e8ea-5488-4dcd-958a-606c8f464218","attributes":{},"expressions":{}}],"_auto_id_":"22c2e50d-f4c3-4c19-aded-360593ccd176","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"da33d147-5074-4cdd-92e8-4e194a00fec4","content":[{"name":"noPermissionWarning","type":"content","item-type":"html","_auto_id_":"180be7be-a3b3-4d72-9e0a-49f71214c99d","content":"<h4 style=\"text-align:center;\">Warning</h4>\n<p style=\"text-align:center;\">You have selected on the Pre Work Photos page that you do not have permission to take photos. Please continue or obtain permission from tenant to take photos.</p>","expressions":{"show":"$store.jobs.selectedJob.bWorkPhoto == \"N\""}},{"name":"preWorkPhotos","type":"content","item-type":"html","_auto_id_":"75d84f07-e089-4eca-8c9e-ce1c01d0bed0","content":"<h4>Post Work Photos</h4><p>Please take any photos relevent to the work carried out on the job.</p>","expressions":{"show":"$store.jobs.selectedJob.bWorkPhoto == \"Y\""}},{"name":"btnTakePhoto","type":"button","item-type":"button","_auto_id_":"0ee4d41c-702d-4679-ab3f-6d048a107c8a","content":"Take a photo","theme":"default","left-icon":"fa-camera","expressions":{"show":"$store.jobs.selectedJob.bWorkPhoto == \"Y\""},"actions":[{"event":"click","type":"call-component-function","data":{"page":"PostWorkPhotos","componentInstanceId":"3c93f0f9-04ef-4534-bf67-0e25cb39f47f","function":"takePhoto"},"_auto_id_":"1c0e6060-8f11-44a8-8b3d-47d546107fff"}],"classes":"takephoto-btn"},{"name":"PostWorkPhotoManager","type":"component","item-type":"web-component","content":[],"componentId":"98807067-3c95-452a-9d3d-74d7a04fa651","_auto_id_":"3c93f0f9-04ef-4534-bf67-0e25cb39f47f","attributes":{"captureCategory":"Post Work","displayCategory":"Post Work"},"expressions":{"show":"$store.jobs.selectedJob.bWorkPhoto == \"Y\""}},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"ec8d309f-ad1c-466e-8f7b-dc93abb48d7a","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"2dbad40e-e982-477e-81e1-6339e0ad8c06","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"JobInformation","isConditional":false}}],"expressions":{},"theme":"default","classes":"button-bar-btn"},{"name":"next_nophotos_btn","type":"button","item-type":"button","_auto_id_":"47fd8d1e-cce2-4d02-869a-f169e3a1b88a","content":"Next","theme":"default","expressions":{"show":"$store.jobs.selectedJob.bWorkPhoto == \"N\""},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction('go-to-page', { \"name\": \"FollowOnAppointment\" });"},"_auto_id_":"c7f42933-45a5-4c6b-94ae-2587a07b8a15"}]},{"name":"next_yespermission_btn","type":"button","item-type":"button","_auto_id_":"0af9cbed-2be4-4cab-bc2f-56b440167126","content":"Next","theme":"default","expressions":{"show":"$store.jobs.selectedJob.bWorkPhoto == \"Y\""},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction('go-to-page', { \"name\": \"FollowOnAppointment\" });"},"_auto_id_":"2b00d12c-78c9-46e8-9e27-4e2a684918ba"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"FollowOnAppointment","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"a361ae8f-468c-4332-92ef-2c2a09ac2d05","content":"<h4 class=\"title\">Follow On Appointment</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"22b7c840-9315-47d9-941e-9760a607c499","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"FollowOnAppointment","componentInstanceId":"d186b0ec-2fc8-4c7b-bf0d-c5c03c5a0159","function":"open"},"_auto_id_":"073b17b5-5010-4a28-8de0-2b6ab7bf84e2"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"92b589a8-469b-4893-978f-e8ebda3857e2","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo","params":{"page":"JobList"}},"_auto_id_":"a503f1aa-d39e-4554-b920-86c15738701f"}]},{"name":"btnVanStockCodes","type":"button","item-type":"button","_auto_id_":"16c179b4-ae01-4a5f-9ae9-5bf8a77ed07f","content":"Van Stock Codes","theme":"default","expressions":{},"left-icon":"fa-truck","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateVanStock","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"83606c56-ecf0-48d1-af24-bf94947502b4"}]},{"name":"btnSORCodes","type":"button","item-type":"button","_auto_id_":"b9b1f0b0-1d6b-43ee-a1e8-6df4c0ecd3d7","content":"SOR Codes","theme":"default","expressions":{},"left-icon":"fa-barcode","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSORCodes","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"d36f7c89-30e3-411b-91be-1569ed21e327"}]},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"b0da1525-dac3-4849-b99c-eb6eb220c0a8","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"dd30c537-ff47-4694-bcc4-87a9bf7b6d6c"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"a2dbd05a-83c8-4dfc-8c7c-e33a70ef102d","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"5554b6b3-8c35-42e6-a20e-fdb90c9357bd"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"cc20ecdd-2a60-4eca-95e7-083d129defbb","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"3033a79e-6c8d-4061-8e5d-5f3f16287c98"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"d186b0ec-2fc8-4c7b-bf0d-c5c03c5a0159","attributes":{},"expressions":{},"actions":[]}],"_auto_id_":"2946253b-e4c2-45ec-9fa2-6f23e5a51a6d","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"d7f4b12d-1493-410a-b075-8d6e62bc70af","content":[{"name":"jobCompletionCheck","type":"choice","item-type":"radio","_auto_id_":"a9d5d2c5-7020-4cea-a789-da14a7ea8cd4","label":"Is the job complete?","required":true,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{"disabled":"$store.jobs.selectedJob.bFollowOnRequired == true"},"message":"This is a required field","classes":"cb-bias-last","actions":[]},{"name":"jobNotCompleteReason","type":"choice","item-type":"select","_auto_id_":"a1833c51-e8a6-4703-9408-a0b9fd70bd9a","label":"Reason job not complete","required":true,"options":[{"label":"Materials on order","value":1},{"label":"Other trade required","value":2},{"label":"Further time required (Me)","value":3}],"expressions":{"show":"$store.pages.FollowOnAppointment.jobCompletionCheck == \"0\"","disabled":"$store.jobs.selectedJob.bFollowOnRequired == true"},"message":"This is a required field"},{"name":"followOnTradeReq","type":"choice","item-type":"select","_auto_id_":"0f2174c1-573a-4d81-846d-b818e3856523","label":"Follow on trade required","required":true,"options":[{"label":"Carpenter/Plumber","value":1},{"label":"Carpentry","value":2},{"label":"Decorator/Plasterer","value":3}],"expressions":{"show":"$store.pages.FollowOnAppointment.jobCompletionCheck == \"0\"","disabled":"$store.jobs.selectedJob.bFollowOnRequired == true"},"message":"This is a required field","option-source":"$store.staticData.tradesList","label-property":"sType","value-property":"sType"},{"name":"followOnComments","type":"user-input","item-type":"text","_auto_id_":"519516fa-9cfb-42a3-93e2-4770753d506c","label":"Follow on comments","required":true,"multiline":true,"debounce":250,"expressions":{"show":"$store.pages.FollowOnAppointment.jobCompletionCheck == \"0\"","disabled":"$store.jobs.selectedJob.bFollowOnRequired == true"},"message":"This is a required field"},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"3d355f75-de63-4cd3-815e-ace29e15b616","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"80a58a36-cfc7-4fdc-bb80-d6feec7b762b","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"PostWorkPhotos","isConditional":false}}],"expressions":{},"theme":"default","classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"8e8a8c97-a098-42e2-b905-1e7365d8a652","content":"Next","theme":"default","expressions":{"disabled":"$store.pages.FollowOnAppointment.jobCompletionCheck == undefined","show":"$store.pages.FollowOnAppointment.jobCompletionCheck == undefined || $store.pages.FollowOnAppointment.jobCompletionCheck == \"1\""},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction('go-to-page', { \"name\": \"CustomerSignature\" });"},"_auto_id_":"1ccef02c-86b2-484a-9576-11bee0773229"}]},{"name":"book_btn","type":"button","item-type":"button","_auto_id_":"8016cad5-e40b-4c30-9c4e-82baf434b4c0","content":"Select Time Slot","theme":"default","expressions":{"show":"$store.pages.FollowOnAppointment.jobCompletionCheck == \"0\"","disabled":"$form.invalid"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction('go-to-page', { \"name\": \"FollowOnContinued\" });"},"_auto_id_":"6ca8421f-7ced-4c6a-a97b-c074e48a3e73"}],"classes":"confirm-bar-btn"}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"FollowOnContinued","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"97d5bca3-c11f-4334-afd1-9eb5724f1fa8","content":"<h4 class=\"title\">Follow On Appointment</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"2515a7d2-a60c-452b-8d14-fc7942073a07","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"FollowOnAppointment","componentInstanceId":"18daedf4-e358-4023-a22f-d8c982f19866","function":"open"},"_auto_id_":"19c2359c-bc6a-4d00-a9e3-e458c96fbf57"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"e6074326-9a27-4d5d-9721-667637142c4d","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo","params":{"page":"JobList"}},"_auto_id_":"7a41709e-4202-42ba-b765-9adde0f3d26b"}]},{"name":"btnVanStockCodes","type":"button","item-type":"button","_auto_id_":"5deddd8e-a9ec-4495-9851-495a36593d74","content":"Van Stock Codes","theme":"default","expressions":{},"left-icon":"fa-truck","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateVanStock","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"6d631731-6a67-41b2-906c-d1ccdc8026d0"}]},{"name":"btnSORCodes","type":"button","item-type":"button","_auto_id_":"a553b7f1-97dd-4821-a5ba-500fc41a7b73","content":"SOR Codes","theme":"default","expressions":{},"left-icon":"fa-barcode","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSORCodes","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"f9787ce2-5d6a-4a58-a696-9e4e26e33851"}]},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"336fa6aa-304e-4ccf-b8e8-d4252a1ea6a7","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"7ad29ec0-1eb9-42d9-9361-0338d7f4499b"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"213c314a-2561-4e52-9046-8f5466ffb137","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"2d36e5c3-7862-40ae-aa56-6bcfc695d84e"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"0a48c6ec-6f12-4c6c-afd8-a0d9e3ee7a52","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"8da1f869-f927-4128-bf30-431382a2ce6a"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"18daedf4-e358-4023-a22f-d8c982f19866","attributes":{},"expressions":{},"actions":[]}],"_auto_id_":"6f1553d3-66ee-43e5-acc5-5c8f2f33b7d3","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"4d82029a-a10d-4d65-a108-c1b0c102dcbc","content":[{"name":"html_followonbooking","type":"content","item-type":"html","_auto_id_":"ce8adafd-13c9-4567-99de-c13aa4a54d61","content":"<p>Please ask the customer the earlist date they are available.</p>","expressions":{}},{"name":"followOnDate","type":"user-input","item-type":"date","_auto_id_":"b6ffbdab-2a3d-4696-9900-ff64b553bb55","label":"Date: ","required":true,"left-icon":"fa-calendar","expressions":{"disabled":"$store.jobs.selectedJob.bFollowOnRequired == true"},"message":"This is a required field"},{"name":"followOnDays","type":"user-input","item-type":"number","_auto_id_":"26062a5a-d590-4161-9ce7-90793a72d4f4","label":"Days to search over","required":true,"decimals":2,"expressions":{"disabled":"$store.jobs.selectedJob.bFollowOnRequired == true"},"message":"This is a required field"},{"name":"followOnDuration","type":"choice","item-type":"select","_auto_id_":"61cba128-dce2-45d3-ba6e-1bfcae4f9d7a","label":"Estimated Duration:","required":false,"options":[{"label":"00:15","value":"15"},{"label":"00:30","value":"30"},{"label":"00:45","value":"45"},{"label":"01:00","value":"60"},{"label":"01:15","value":"75"},{"label":"01:30","value":"90"},{"label":"01:45","value":"105"},{"label":"02:00","value":"120"}],"expressions":{"disabled":"$store.jobs.selectedJob.bFollowOnRequired == true"},"message":"This is a required field","actions":[{"event":"change","type":"inline-function","data":{"sync":true,"code":"cti.utils.updatePage();"},"_auto_id_":"861319e5-de6d-42cf-bd2b-cc1cc3992dd0","actions":[]}]},{"name":"getavailability_btn","type":"button","item-type":"button","_auto_id_":"9b0322d3-27e2-4d3d-b973-353bba1c2ef8","content":"Get Availability","theme":"default","expressions":{"disabled":"$form.invalid","show":"$store.jobs.selectedJob.bFollowOnRequired != true"},"classes":"selecttime-btn","actions":[{"event":"click","type":"call-actionflow","data":{"name":"GetFollowOnSlots"},"_auto_id_":"45cd8f18-0f1d-4f1b-904c-3e5a8810829a"}]},{"name":"html_availablebookings","type":"content","item-type":"html","_auto_id_":"077d8c89-8f9a-4789-a0b5-36967b8b734c","content":"<h4>Available Appointments</h4>","expressions":{"show":"$store.jobs.selectedJob.bFollowOnRequired != true"}},{"name":"followOnAppointmentSlots","type":"content","item-type":"list","_auto_id_":"d3106d3a-429e-4236-ad47-0a588ad157c0","search":"","classes":"","expressions":{"show":"$store.jobs.selectedJob.bFollowOnRequired != true"},"model":"$store.jobs.followOnTimeSlots","theme":"bootstrap","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var timeSlots = cti.store.jobs.followOnTimeSlots;\nvar selectedSlot = {{$data.$item}};\n\nfor(var i in timeSlots) {\n  var remove = document.getElementById(timeSlots[i].id);\n  remove.classList.remove('timeslot-item-selected');\n  \n  if(timeSlots[i].id == selectedSlot.id) {\n    timeSlots[i].selected = true;\n  } else {\n    timeSlots[i].selected = false;\n  }\n}\n\nvar element = document.getElementById(selectedSlot.id);\nelement.classList.add('timeslot-item-selected');\n\ncti.utils.updatePage();"},"_auto_id_":"c1380734-1475-4b94-b548-881d28b02ddc","actions":[]}],"dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"followOnAppointmentSlots_html","_auto_id_":"586c7eca-acce-472c-a38d-230b853faff5","content":"<div id=\"{{$data.$item.id}}\">{{$data.$item.description}}</div>"}]},{"name":"bookfollowon_btn","type":"button","item-type":"button","_auto_id_":"858c9ad8-f1dd-4d37-af45-2f093d606efe","content":"Book the selected appointment","theme":"default","expressions":{"show":"$store.jobs.selectedJob.bFollowOnRequired != true && $store.jobs.followOnTimeSlots != undefined"},"classes":"bookappointment-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var timeSlots = cti.store.jobs.followOnTimeSlots;\nvar selectedSlot = undefined;\n\nfor(var i in timeSlots) {\n  if(timeSlots[i].selected == true) {\n    selectedSlot = timeSlots[i];\n  }\n}\n\nif(cti.store.pages.FollowOnContinued.followOnDuration == undefined) {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\" : \"app_timeslot\",\n      \"item-type\" : \"app-notification\",\n      \"style\" : \"warning\",\n      \"title\" : \"Warning\",\n      \"text\" : \"You must select an Estimated Duration before continuing with booking the appointment.\"\n    }\n  );\n} else {\n  if(selectedSlot) {\n    cti.store.jobs.selectedJob.bFollowOnRequired = true;\n    cti.store.jobs.selectedJob.sFollowOnRequiredDetail = selectedSlot;\n  } else {\n    cti.utils.callAction(\n      \"show-notification\", {\n        \"name\" : \"app_timeslot\",\n        \"item-type\" : \"app-notification\",\n        \"style\" : \"warning\",\n        \"title\" : \"Warning\",\n        \"text\" : \"You must select an Available Time Slot before continuing with booking the appointment.\"\n      }\n    );\n  }\n}\n\ncti.utils.updatePage();"},"_auto_id_":"6d14e432-6343-4c84-abaa-65f3026c91b2"}]},{"name":"html_bookedfor","type":"content","item-type":"html","_auto_id_":"449d4e2a-cefe-4eff-a6e4-473e8a4c3937","content":"<div style=\"width:100%;text-align:center;\"><p class=\"fa complete\"></p></div>\n<h4 class=\"completeheader\">Booked</h4>\n<p style=\"color:#228B22;text-align:center;\">Follow on appointment booked for {{'$store.jobs.selectedJob.sFollowOnRequiredDetail.description'|store}}","expressions":{"show":"$store.jobs.selectedJob.bFollowOnRequired == true"}},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"0ebfe6ff-a3ae-410c-a1e7-0e7f9504892c","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"c02c99e4-2654-40e9-a667-1fe356be0ad3","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"FollowOnAppointment","isConditional":false}}],"expressions":{},"theme":"default","classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"9a989d1d-6d19-48f2-a9ad-3ac7f388c350","content":"Next","theme":"default","expressions":{"disabled":"$store.payloads.jobPayload.followonappointment == false || $store.pages.FollowOnContinued == undefined"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction('go-to-page', { \"name\": \"CustomerSignature\" });"},"_auto_id_":"0aa0c5fa-6f95-418a-8b58-6d2c502f074f"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"CustomerSignature","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"b91accd5-c0b6-4858-936a-5f05a0498160","content":"<h3 class=\"title\">Customer Signature</h3>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"9bc01824-92a5-4db5-b95a-4b7ad008d1d4","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"CustomerSignature","componentInstanceId":"ecad3756-23a1-4a06-83f1-53508b874418","function":"open"},"_auto_id_":"48a9a058-85c1-4136-a164-9cc212fb3cfc"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"1c6eb617-ad0c-4a57-bc2a-1ee6c53b250f","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo","params":{"page":"JobList"}},"_auto_id_":"c72ef02d-9920-48e1-8297-2d5c5f06c492"}]},{"name":"btnVanStockCodes","type":"button","item-type":"button","_auto_id_":"3f5be9b6-f803-41fa-ab47-54c0c546b4bd","content":"Van Stock Codes","theme":"default","expressions":{},"left-icon":"fa-truck","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateVanStock","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"34573710-1663-4655-be00-958873b78359"}]},{"name":"btnSORCodes","type":"button","item-type":"button","_auto_id_":"ce0e02d3-a993-43cd-93f7-72f08047f3a9","content":"SOR Codes","theme":"default","expressions":{},"left-icon":"fa-barcode","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSORCodes","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"e17884ce-4a26-494b-8eff-3adf217cc936"}]},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"8923e4db-3ff2-4987-a80e-4403f8845b2b","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"fa23bab9-c7d5-4091-909b-7e443b308ed9"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"40a802c9-c4d7-47dc-b4e8-6953a2ac2e9e","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"3dc09c72-b2f2-4fef-b558-a4cad939b0dd"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"2b07401f-d5f4-4d91-b684-b5200d91c55b","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"6fccefb1-1dc8-4e8d-81d4-328b604f07e1"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"ecad3756-23a1-4a06-83f1-53508b874418","attributes":{},"expressions":{}}],"_auto_id_":"6ccae0e3-7db4-4b1c-b621-9b53b24804e4","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"b344f29d-77db-462d-b6c1-0b6fdc1bea2f","content":[{"name":"customerSignatureCheck","type":"choice","item-type":"radio","_auto_id_":"9a947c97-f835-43d2-abae-792a36734894","label":"Is the customer willing to sign?","required":false,"options":[{"label":"Yes","value":1},{"label":"No","value":"0"}],"icon-selected":"fa-dot-circle-o","icon-unselected":"fa-circle-o","expressions":{},"classes":"cb-bias-last","actions":[{"event":"change","type":"inline-function","data":{"sync":true,"code":"cti.store.pages.CustomerSignature.reasonForNoSignature = undefined;\ncti.store.pages.CustomerSignature.customerSignature = undefined;\n\ncti.utils.updatePage();"},"_auto_id_":"47f8aaf0-aa39-40e1-8aca-5631950f8693"}]},{"name":"reasonForNoSignature","type":"choice","item-type":"select","_auto_id_":"26b625f8-2344-4d05-8ddb-d84b0903414d","label":"No signature reason:","required":false,"options":[{"label":"Communal Repair","value":1},{"label":"Tenant Refused","value":2},{"label":"Tenant Unable to Sign","value":3}],"expressions":{"show":"$store.pages.CustomerSignature.customerSignatureCheck == \"0\""}},{"name":"tenantHomeNumber","type":"user-input","item-type":"number","_auto_id_":"febf5fce-0087-4d3a-ba17-f9c37a5bff6f","label":"Tenat Home Number:","required":false,"decimals":0,"expressions":{"show":"$store.pages.CustomerSignature.customerSignatureCheck == \"1\""},"validators":[]},{"name":"tenantMobileNumber","type":"user-input","item-type":"number","_auto_id_":"a8e2de09-db2d-40e6-aa76-cbed08ce6774","label":"Tenant Mobile Number:","required":false,"decimals":0,"expressions":{"show":"$store.pages.CustomerSignature.customerSignatureCheck == \"1\""}},{"name":"customerSignature","type":"user-input","item-type":"signature","_auto_id_":"3d962e77-08e7-4377-8ae1-5864777e1093","label":"Tenant Signature","required":false,"expressions":{"show":"$store.pages.CustomerSignature.customerSignatureCheck == \"1\""}},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"9df062bc-1116-409c-9745-c71e37e449ea","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"0f8106a7-2fa1-48a9-a658-b9e4dca5a825","content":"Previous","theme":"default","expressions":{"disabled":"$store.variables.selectedJob.travelended == false && $store.variables.selectedJob.lonedevice == false"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var jobComplete = cti.store.pages.FollowOnAppointment.jobCompletionCheck;\n\nif(jobComplete == \"0\") {\n  cti.utils.callAction('go-to-page', { \"name\": \"FollowOnContinued\" });\n} else {\n  cti.utils.callAction('go-to-page', { \"name\": \"FollowOnAppointment\" });\n}"},"_auto_id_":"8302221d-9808-4530-8aad-08748ab5034c"}]},{"name":"next_nosignature_btn","type":"button","item-type":"button","_auto_id_":"1d2ae064-2a69-495d-b5a5-7877653bdef3","content":"Next","theme":"default","expressions":{"disabled":"$store.pages.CustomerSignature.reasonForNoSignature == undefined","show":"$store.pages.CustomerSignature.customerSignatureCheck == \"0\" || $store.pages.CustomerSignature.customerSignatureCheck == undefined"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.fnNavigateSORCodes(cti.store.state.currentPage);"},"_auto_id_":"63a0b192-08c8-4729-8ed8-2e101f4e8d7f"}]},{"name":"next_signature_btn","type":"button","item-type":"button","_auto_id_":"322cab6a-d68e-4766-a996-a827161ccf79","content":"Next","theme":"default","expressions":{"disabled":"$store.pages.CustomerSignature.customerSignature == undefined","show":"$store.pages.CustomerSignature.customerSignatureCheck == \"1\""},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.fnNavigateSORCodes(cti.store.state.currentPage);"},"_auto_id_":"7b43ca8a-eea2-4d19-9618-62e321ecd256"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"SORLocationSelect","config":[{"name":"On-Loaded Event","type":"event","item-type":"onloaded","_auto_id_":"f48f1bbf-55ee-4d17-9735-e2d008f89eb3","actions":[{"event":"onload","type":"inline-function","data":{"sync":true,"code":"debugger;\nvar locations = cti.store.jobs.jobLocations;\nvar sorLocations = JSON.parse(JSON.stringify(locations));\nvar sorCodesOnJob = cti.store.jobs.selectedJob.aItemGroups;\n\nfor(var i in sorLocations) {\n  var requiredInLocation = false;\n  var sorCodesQuantity = 0;\n  var currentLocation = sorLocations[i];\n  \n  if(currentLocation.sSORCodesQuantity == undefined) currentLocation.sSORCodesQuantity = {};\n  \n  for(var k in sorCodesOnJob) {\n    if(currentLocation.sLocation == sorCodesOnJob[k].sLocation) {\n      sorCodesQuantity++;\n      \n      if(sorCodesOnJob[k].nQtyDoneThisVisit != sorCodesOnJob[k].nQtyRequired) {\n        requiredInLocation = true;\n      }\n    }\n  }\n\n  if(sorCodesQuantity > 0) {\n    if(requiredInLocation) {\n      currentLocation.sLocationClass = \"fa required-sorcode\";\n    } else {\n      currentLocation.sLocationClass = \"fa added-sorcode\";\n    }\n    \n    currentLocation.sSORCodesQuantity = '(' + sorCodesQuantity + ')';\n  } else {\n    currentLocation.sSORCodesQuantity = \"\";\n    currentLocation.sLocationClass = \"\";\n  }\n}\n\ncti.store.jobs.jobSORLocations = sorLocations;"},"_auto_id_":"41cb1fbc-c6ba-47fa-bf8a-680db3df9627"}]}],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"3b70d9f4-37a4-4f42-9119-eeab16a78703","content":"<h4 class=\"title\">SOR Select Location</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"435357a4-1a0e-4481-ab0f-4e9ee3d662aa","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"VehicleDetails","componentInstanceId":"08de0ec8-8c52-40cc-bd23-f8d4351ede39","function":"open"},"_auto_id_":"8edc7351-674b-41f9-b15a-9588c35f016f"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"112824d1-3674-4ea7-b7fc-fbd6fd70a904","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"efe03a67-b945-4e47-a2f8-8acff85ee95f"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"469b67b2-1802-4da2-a185-bdf67097ca43","content":"Job List","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"9a663a92-de85-4c38-95a1-6cb80b3fc8f6"}],"left-icon":"fa-list"},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"55d39fce-d298-472d-b48d-749271d8278e","content":"Logout","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"left-icon":"fa-sign-out","actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"5755e218-e08c-49ab-9333-c1e907f22455"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"01f189a7-17c3-4a98-b6ce-c3dae6722c22","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"203ee708-a173-427d-98c0-08a047647f88"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"08de0ec8-8c52-40cc-bd23-f8d4351ede39","attributes":{},"actions":[],"expressions":{}}],"_auto_id_":"d82ec700-9631-4989-9539-4e3b5889926d","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"list_location","type":"content","item-type":"list","_auto_id_":"4e49a85f-c9e2-4fc7-aacd-007c19d4af4e","search":"","classes":"","theme":"bootstrap","expressions":{},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"debugger;\ncti.store.variables.lastSORSelectPage = cti.store.state.currentPage;\ncti.store.variables.selectedLocation = {{$data.$item}};\n\nvar sorCodes = cti.store.jobs.selectedJob.aItemGroups;\nvar selectedLocation = cti.store.variables.selectedLocation;\nvar exists = false;\n\nfor(var i in sorCodes) {\n  if(sorCodes[i].sLocation == selectedLocation.sLocation) {\n    exists = true;\n    break;\n  }\n}\n\nif(exists) {\n  cti.store.variables.menuOption = \"schedules\";\n} else {\n  if(selectedLocation.sSORCodesQuantity != 0) {\n    cti.store.variables.menuOption = \"schedules\";\n  } else {\n    cti.store.variables.menuOption = \"search\";\n  }\n}\n\ndelete cti.store.variables.sorCodeSearchResults;\ncti.utils.callAction('go-to-page', { \"name\": \"SORCodes\" });\n\n$success();"},"_auto_id_":"e4bdba8b-dd66-4c83-8d2b-88b8d3c77471","actions":[]}],"model":"$store.jobs.jobSORLocations","dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"list_location_html","_auto_id_":"dab8be94-bf2c-4240-9d2e-07a8724acfd1","content":"<div class=\"list-item-container\">\n  <div class=\"list-location\">{{$data.$item.sDescription}} <span style=\"color:#0072C6\">{{$data.$item.sSORCodesQuantity}}</span></div>\n  <div class=\"{{$data.$item.sLocationClass}}\"></div>\n</div>"}]},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"99c867f7-971b-430c-b21e-8e8000b4f797","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"40c34912-6aec-454d-b8eb-dca9e406216c","content":"Back","theme":"default","expressions":{"disabled":"$form.invalid"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var lastPage = cti.store.variables.lastSORPage;\ncti.utils.callAction('go-to-page', { \"name\": lastPage });"},"_auto_id_":"d1cc2d6e-357a-4794-bd3c-17797297e07a"}],"classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"6363490d-21ef-4eda-b57a-ff58107721d1","content":"Next","theme":"default","expressions":{"show":"$store.variables.lastSORPage === \"CustomerSignature\""},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var sorCodesOnJob = cti.store.jobs.selectedJob.jobsorcodes;\nvar result = true;\n\nfor(var i in sorCodesOnJob) {\n  var currentSor = sorCodesOnJob[i];\n  \n  if(currentSor.totaltodate != currentSor.estimated) {\n    result = false\n    break;\n  }\n}\n\nresult = true;\n\nif(result) {\n  cti.fnNavigateVanStock(cti.store.state.currentPage);\n} else {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\" : \"app_sorcodesfailed\",\n      \"item-type\" : \"app-notification\",\n      \"style\" : \"error\",\n      \"title\" : \"Warning\",\n      \"text\" : \"There are still SOR Codes that need completing on the job.\"\n    }\n  );\n}"},"_auto_id_":"5144c824-c173-4447-a06c-11e9c11e7999"}]}],"expressions":{}}],"_auto_id_":"163427c0-5d98-4380-b0ff-976be5f11fbb","expressions":{}}]},{"start":false,"name":"SORCodes","config":[{"name":"On-Loaded Event","type":"event","item-type":"onloaded","_auto_id_":"8a5400a3-797c-4dee-aa69-7b0912d83230","actions":[{"event":"onload","type":"inline-function","data":{"sync":true,"code":"// Example of setting up handlers do deal with quantity changes from the numeric-toggler components\nfunction valueChangeHandler(e) {\n  debugger;\n \te = e || window.event;\n\tvar targ = e.target || e.srcElement;\n    console.log(targ.id + ' has new value = ' + targ.quantity);\n}\n\nvar togglers = document.getElementsByTagName(\"numeric-toggler\");\nfor (var i = 0; i < togglers.length; i++) {\n  togglers[i].removeEventListener('changed', valueChangeHandler);\n  togglers[i].addEventListener('changed', valueChangeHandler, true);\n}\n$success();"},"_auto_id_":"c7affc47-9c33-46e1-970e-4df2eec6cb23"},{"event":"onload","type":"call-function","data":{"name":"fnSearchPanel","params":{"menuOption":"{{$store.variables.menuOption}}"}},"_auto_id_":"cf5b5f67-903f-4afd-8fb2-8d3903d46f88"}]}],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"bd8c1703-d088-4bc6-a4bd-a9899c2efdf9","content":"<h4 class=\"title\">SOR Codes</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"1a9986e5-459b-4bdf-bfdc-f4249663da2a","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"VehicleDetails","componentInstanceId":"652dd14b-bd09-45bc-8dc1-81c85ca7ab07","function":"open"},"_auto_id_":"34476410-3ce2-4413-86e9-6870b5ca141c"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"fe2b32fa-006d-40b5-aaca-18ceb47f1f37","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle"},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"bfa50128-d368-4653-b2ec-c97b034c0a81","content":"Job List","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"c218d662-7379-4412-b179-13fe83fa805b"}],"left-icon":"fa-list"},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"ae33a7a9-aedd-48c2-8999-f3f646be26da","content":"Logout","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"left-icon":"fa-sign-out","actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"b999c6ce-fa84-4f3a-bd55-b51f38b64bc1"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"652dd14b-bd09-45bc-8dc1-81c85ca7ab07","attributes":{},"actions":[],"expressions":{}}],"_auto_id_":"0b06e43c-aae5-47e2-b34b-47247cb7a08b","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"html_sorlocation","type":"content","item-type":"html","_auto_id_":"44dfe4fa-34ef-4dd1-949d-6e8a9968fd9b","content":"<h4>SOR Code Location: <span style=\"color:#0072C6;\">{{'$store.variables.selectedLocation.sDescription'|store}}</span></h4>\n<hr>\n<div id=\"panel\" class=\"sor-schedules-panel\">\n  <div id=\"schedules\" class=\"sor-schedules-schedules\" onclick=\"cti.fnSearchPanel('schedules');\">Schedules</div>\n  <div id=\"search\" class=\"sor-schedules-search\" onclick=\"cti.fnSearchPanel('search');\">Search</div>\n</div>","expressions":{}},{"name":"SearchAllSORCodes","type":"component","item-type":"web-component","content":[],"componentId":"55b24a7c-9cde-4da4-95b2-8ab725ae8165","_auto_id_":"37052d11-d5cf-46b3-b86b-749e585e671f","attributes":{"sourceObjectArrayName":"","displayArrayName":"cti.store.variables.sorCodeSearchResults","displayListIfNoSearch":0,"maxResults":30,"minCharacters":3,"locationFilter":""},"expressions":{"show":"$store.variables.menuOption === \"search\""},"actions":[]},{"name":"html_sorcodes","type":"content","item-type":"html","_auto_id_":"fbbe1ad7-e0e7-41c7-81c5-c93ce7b6cbd3","content":"<br/>\n<div style=\"display:inline-block;width: 100%;padding-left: 27px;font-weight:bold\">\n  <div style=\"display:inline-block\">SOR Code</div>\n  <div style=\"display:inline-block;float:right;padding-right: 56px;\">Item</div>\n</div>\n<hr>\n","expressions":{"show":"$store.variables.menuOption === \"search\""}},{"name":"htmlSearchHint","type":"content","item-type":"html","_auto_id_":"70d652d5-3556-429a-b52f-2c2fd2c3d49b","content":"<p>Please use the search facility above to find Schedule Of Rates codes that your require. The search facility is free text.</p>","expressions":{"show":"($store.variables.sorCodeSearchResults===undefined || $store.variables.sorCodeSearchResults.length==0) && $store.variables.menuOption === \"search\""}},{"name":"list_sorcodes","type":"content","item-type":"list","_auto_id_":"41abdd29-6210-4217-9298-044d2d57d36d","search":"","classes":"","theme":"bootstrap","expressions":{"show":"$store.variables.menuOption === \"search\""},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"debugger;\nvar sorCodes = cti.store.jobs.selectedJob.aItemGroups;\nvar code = {{$data.$item}};\nvar exisits = false;\n\nvar codeObj = {\n  \"sID\": code.sAttrib1 || \"\",\n  \"sCode\": code.sCode || \"\",\n  \"sPriceBook\": \"\",\n  \"nQtyRequired\": 1,\n  \"nQtyDoneThisVisit\": 0,\n  \"nQtyDoneToDate\": 0,\n  \"nQtyRemaining\": 1,\n  \"sLocation\": cti.store.variables.selectedLocation.sLocation || \"NOLOCATION\",\n  \"sDescription\": code.sShortDescr || \"\",\n  \"sLongDescription\": code.sLongDescr || \"\",\n  \"sUnitOfMeasure\": code.sStockUnit || \"\",\n  \"sSpecialInstruction\": \"\",\n  \"aAdditionalData\": code.aAdditionalData || []\n};\n\nfor(var i in sorCodes) {\n  if(sorCodes[i].sCode == codeObj.sCode) {\n    exisits = true;\n    break;\n  }\n}\n\nif(!exisits) {\n  sorCodes.push(codeObj);\n  var lastPage = cti.store.variables.lastSORSelectPage;\n  cti.utils.callAction('go-to-page', { \"name\": lastPage });\n} else {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\" : \"app_sorcodematch\",\n      \"item-type\" : \"app-notification\",\n      \"style\" : \"error\",\n      \"title\" : \"Warning\",\n      \"text\" : \"You have already added this SOR Code to the Job.\"\n    }\n  );\n}"},"_auto_id_":"d9c5bfd6-de00-4869-9dfb-ed0a92e26a5f"}],"model":"$store.variables.sorCodeSearchResults","dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"list_sorcodes_html","_auto_id_":"d3a3a30e-8589-4ff7-a902-f4f5cc8e6c0b","content":"<div style=\"display:block;width:100%\">\n  <div style=\"padding-bottom:10px;font-weight:bold;\">SOR Code: {{$data.$item.sCode}}</div>\n  <div>{{$data.$item.sShortDescr}}</div>\n</div>"}]},{"name":"SearchJobSORCodes","type":"component","item-type":"web-component","content":[],"componentId":"55b24a7c-9cde-4da4-95b2-8ab725ae8165","_auto_id_":"506ab6a8-0172-4024-a0e6-ae59ed29f1ee","attributes":{"sourceObjectArrayName":"cti.store.jobs.selectedJob.aItemGroups","displayArrayName":"cti.store.variables.sorCodeJobSearchResults","displayListIfNoSearch":1,"maxResults":30,"minCharacters":3,"locationFilter":""},"expressions":{"show":"$store.variables.menuOption === \"schedules\""},"actions":[]},{"name":"html_sorcodes_schedules","type":"content","item-type":"html","_auto_id_":"21ad5add-8174-48a9-bebf-b7387683a5d4","content":"<br>\n<p>Please confirm quantities for the below SOR codes added to this job.</p>\n<hr>","expressions":{"show":"$store.variables.menuOption === \"schedules\""}},{"name":"list_sorsummary","type":"content","item-type":"list","_auto_id_":"cb539320-2cf6-46a8-a7a5-5ab144a3b043","search":"","classes":"","expressions":{"show":"$store.variables.menuOption === \"schedules\""},"theme":"bootstrap","model":"$store.variables.sorCodeJobSearchResults","actions":[],"dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"list_sorsummary_html","_auto_id_":"8e8fdc44-d8f3-4498-be7a-a55523f15705","content":"<div class=\"inlineblock-outer\">\n    <div class=\"inlineblock-outer\">\n        <div class=\"sor-header\">{{$data.$item.sCode}}</div>\n        <div class=\"estimated\">Estimated: {{$data.$item.nQtyRequired}}</div>\n    </div>\n    <div>{{$data.$item.sDescription}}</div>\n</div>\n<hr>\n<div class=\"inlineblock-default inlineblock-toggle\">\n    <div class=\"inlineblock-default\">\n        <div class=\"qty-text\" for=\"name\">Quantity</div>\n        <div class=\"remaining-text\" for=\"name\">Remaining</div>\n    </div>\n    <div class=\"inlineblock-default\">\n        <numeric-toggler class=\"qty-block\" id=\"quantity-{{$data.$item.sCode}}\" initialQuantity=\"0\" canDecrement=false></numeric-toggler>\n        <numeric-toggler class=\"remaining-block\" id=\"remaning-{{$data.$item.sCode}}\" initialQuantity=\"0\" canDecrement=false></numeric-toggler>\n    </div>\n</div>"}]},{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"08f2878c-de68-41c1-8291-c5c431e10676","content":"Back","theme":"default","expressions":{"disabled":"$form.invalid"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction('go-to-page', { \"name\": \"SORLocationSelect\" });"},"_auto_id_":"4bc7f928-5e53-4723-90ea-d9d5f1665cee"}],"classes":"button-bar-btn"}],"_auto_id_":"111aed0d-21d8-401f-89d6-3a598cf677ee","expressions":{}}]},{"start":false,"name":"VanLocationSelect","config":[{"name":"On-Loaded Event","type":"event","item-type":"onloaded","_auto_id_":"eb8f577d-0d62-4da6-8dcb-412c2fd03052","actions":[{"event":"onload","type":"inline-function","data":{"sync":true,"code":"debugger;\nvar locations = cti.store.jobs.jobLocations;\nvar vanLocations = JSON.parse(JSON.stringify(locations));\nvar vanStockOnJob = cti.store.jobs.selectedJob.aVanStock;\n\nif(cti.store.jobs.selectedJob.aVanStock == undefined) cti.store.jobs.selectedJob.aVanStock = [];\n\nfor(var i in vanLocations) {\n  var vanStockQuantity = 0;\n  var currentLocation = vanLocations[i];\n  \n  if(currentLocation.sVanStockQuantity == undefined) currentLocation.sVanStockQuantity = {};\n  \n  for(var k in vanStockOnJob) {\n    if(currentLocation.sLocation == vanStockOnJob[k].sLocation) {\n      vanStockQuantity++;\n    }\n  }\n\n  if(vanStockQuantity > 0) {\n    currentLocation.sLocationClass = \"fa added-sorcode\";\n    \n    currentLocation.sVanStockQuantity = '(' + vanStockQuantity + ')';\n  } else {\n    currentLocation.sVanStockQuantity = \"\";\n    currentLocation.sLocationClass = \"\";\n  }\n}\n\ncti.store.jobs.locationsVanStock = vanLocations;"},"_auto_id_":"bd7cd106-17c7-4373-ad52-fd5c7386b65f","actions":[]}]}],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"97c8b480-d3a2-4462-8fa6-184bb57b3dce","content":"<h4 class=\"title\">Van Stock Select Location</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"3dbf88e9-cd0b-412a-9b80-b372e35cb474","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"VehicleDetails","componentInstanceId":"4a45d9dd-1e30-4f52-86c8-81d0cfbab26a","function":"open"},"_auto_id_":"e875e6ec-76a9-46f5-a7ab-842641467172"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"779d2e60-06a0-4cf2-b25c-5fe1c0f75216","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"32ac459f-80d7-4bd8-ab66-4469ee3de696"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"cd73a980-58c2-4d8c-a86e-d14befca20f7","content":"Job List","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"9e662f77-3d2d-4ebf-ab6b-1579a1379d89"}],"left-icon":"fa-list"},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"6eac6285-b43e-4c14-a7b1-d36ba7d0b181","content":"Logout","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"left-icon":"fa-sign-out","actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"55f79f78-db3d-47b6-a3d5-6b79ea1208bb"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"4a45d9dd-1e30-4f52-86c8-81d0cfbab26a","attributes":{},"actions":[],"expressions":{}}],"_auto_id_":"94939e7d-94da-4e61-8213-0fb9dfc7ba1d","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"list_location","type":"content","item-type":"list","_auto_id_":"0d9e776a-b5c4-47c5-af4a-f31c0826214f","search":"","classes":"","theme":"bootstrap","expressions":{},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.lastVanSelectPage = cti.store.state.currentPage;\ncti.store.variables.selectedLocation = {{$data.$item}};\n\nvar vanStock = cti.store.jobs.selectedJob.aVanStock;\nvar selectedLocation = cti.store.variables.selectedLocation;\nvar exists = false;\n\nfor(var i in vanStock) {\n  if(vanStock[i].sLocation == selectedLocation.sLocation) {\n    exists = true;\n    break;\n  }\n}\n\nif(exists) {\n  cti.store.variables.menuOption = \"schedules\";\n} else {\n  if(selectedLocation.sVanStockQuantity != 0) {\n    cti.store.variables.menuOption = \"schedules\";\n  } else {\n    cti.store.variables.menuOption = \"search\";\n  }\n}\n\ndelete cti.store.variables.vanStockSearchResults;\ncti.utils.callAction('go-to-page', { \"name\": \"VanStockCodes\" });\n\n$success();"},"_auto_id_":"6d0c7f56-3658-4d65-adb0-2a9abc7fee86","actions":[]}],"model":"$store.jobs.locationsVanStock","dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"list_location_html","_auto_id_":"b8a9d0ec-f57a-4998-af75-3b47eff515a0","content":"<div class=\"list-item-container\">\n  <div class=\"list-location\">{{$data.$item.sDescription}} <span style=\"color:#0072C6\">{{$data.$item.sVanStockQuantity}}</span></div>\n  <div class=\"{{$data.$item.sLocationClass}}\"></div>\n</div>"}]},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"db2dd67c-b07c-4d22-831a-5ee6dd54d196","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"98f4192d-a4f8-4d89-ae07-281ff9991fc3","content":"Back","theme":"default","expressions":{"disabled":"$form.invalid"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var lastPage = cti.store.variables.lastVanStockPage;\ncti.utils.callAction('go-to-page', { \"name\": lastPage });"},"_auto_id_":"90f7262f-9364-45cc-a954-570fdc875d44"}],"classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"1b36d39f-716d-45a6-8583-8ad5cfe75809","content":"Next","theme":"default","expressions":{"show":"$store.variables.lastVanStockPage === \"SORLocationSelect\""},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var vanStockOnJob = cti.store.jobs.selectedJob.jobvanstock;\n\ncti.utils.callAction('go-to-page', { \"name\": \"SpecialPurchases\" });"},"_auto_id_":"34fcc4e4-afc4-4a46-b915-52daab7daac7"}]}],"expressions":{}}],"_auto_id_":"e3d59db4-2ed8-4f29-9b48-5eaab9e996a2","expressions":{}}]},{"start":false,"name":"VanStockCodes","config":[{"name":"On-Loaded Event","type":"event","item-type":"onloaded","_auto_id_":"96531333-33f0-47e5-b2c4-5c0795ee7ea2","actions":[{"event":"onload","type":"call-function","data":{"name":"fnSearchPanel","params":{"menuOption":"{{$store.variables.menuOption}}"}},"_auto_id_":"66b6871c-288a-4705-8d60-74863b890082"}]}],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"84495cfd-346b-46e9-a89b-f4a76bf3060e","content":"<h4 class=\"title\">Van Stock</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"3bb1ae0a-55d9-44c6-a07b-82448ebebdd9","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"VehicleDetails","componentInstanceId":"2f659247-5b8c-4994-a47d-7fd7dce0cea3","function":"open"},"_auto_id_":"46506fcf-928b-4b25-8c0c-b496d5d9c5d5"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"268134be-130f-4544-8e04-c843233ab0af","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"3ebeb07c-0fb3-4c5c-9098-adc3c0ed4d02"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"f7c1ee89-a607-4b02-9bb1-3ac31731d7a6","content":"Job List","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"7cb0ef08-2aa5-4546-941b-3eeded5a777f"}],"left-icon":"fa-list"},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"983fcfc9-1c50-46e9-96e7-6572dd861ae7","content":"Logout","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"left-icon":"fa-sign-out","actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"1f36635d-a2ba-45a8-9fb4-7f38a9cbe908"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"2f659247-5b8c-4994-a47d-7fd7dce0cea3","attributes":{},"actions":[],"expressions":{}}],"_auto_id_":"293ac4b9-5d1c-41d9-a3eb-d552cc589240","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"html_vanstocklocation","type":"content","item-type":"html","_auto_id_":"41a52e32-d9a8-4253-8834-25f9894c2922","content":"<h4>Van Stock Location: <span style=\"color:#0072C6;\">{{'$store.variables.selectedLocation.location'|store}}</span></h4>\n<hr>\n<div id=\"panel\" class=\"sor-schedules-panel\">\n  <div id=\"schedules\" class=\"sor-schedules-schedules\" onclick=\"cti.fnSearchPanel('schedules');\">Van Stock</div>\n  <div id=\"search\" class=\"sor-schedules-search\" onclick=\"cti.fnSearchPanel('search');\">Search</div>\n</div>","expressions":{}},{"name":"SearchAllVanStockCodes","type":"component","item-type":"web-component","content":[],"componentId":"55b24a7c-9cde-4da4-95b2-8ab725ae8165","_auto_id_":"14715663-a2a8-4f5d-babe-38acd6be58ae","attributes":{"sourceObjectArrayName":"cti.store.offlineApi.AccuServOffline.vanstock. aOperativeVanStock","displayArrayName":"cti.store.variables.vanStockSearchResults","displayListIfNoSearch":0,"maxResults":30,"minCharacters":3,"locationFilter":""},"expressions":{"show":"$store.variables.menuOption === \"search\""},"actions":[]},{"name":"html_vanstockheader","type":"content","item-type":"html","_auto_id_":"70eecac3-65b7-4111-be39-ad4390d47a88","content":"<br/>\n<div style=\"display:inline-block;width: 100%;padding-left: 27px;font-weight:bold\">\n  <div style=\"display:inline-block\">Van Stock Code</div>\n  <div style=\"display:inline-block;float:right;padding-right: 56px;\">Item</div>\n</div>\n<hr>\n","expressions":{"show":"$store.variables.menuOption === \"search\""}},{"name":"htmlSearchHint","type":"content","item-type":"html","_auto_id_":"8c9dd287-8768-4cfb-af14-57b5cdb40a61","content":"<p>Please use the search facility above to find Van Stock codes that your require. The search facility is free text.</p>","expressions":{"show":"($store.variables.sorCodeSearchResults===undefined || $store.variables.sorCodeSearchResults.length==0) && $store.variables.menuOption === \"search\""}},{"name":"list_vanstock","type":"content","item-type":"list","_auto_id_":"41078491-84e2-46d5-99eb-13cfb5162264","search":"","classes":"","theme":"bootstrap","expressions":{"show":"$store.variables.menuOption === \"search\""},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"debugger;\nif(cti.store.jobs.selectedJob.aVanStock == undefined) cti.store.jobs.selectedJob.aVanStock = [];\n\nvar vanStock = cti.store.jobs.selectedJob.aVanStock;\nvar code = {{$data.$item}};\nvar exisits = false;\n\nvar uni = vanStock.length + 1;\n\nvar codeObj = {\n  \"sID\": code.sVanRegNo,\n  \"sCode\": code.sStockCode,\n  \"nQtyUsed\": 1,\n  \"sSpecialInstruction\": code.sStockDescription,\n  \"iUniqueIdentifer\": uni,\n  \"sLocation\" : cti.store.variables.selectedLocation.sLocation\n};\n\nfor(var i in vanStock) {\n  if(vanStock[i].sCode == codeObj.sCode) {\n    exisits = true;\n    break;\n  }\n}\n\nif(!exisits) {\n  vanStock.push(codeObj);\n  var lastPage = cti.store.variables.lastVanSelectPage;\n  cti.utils.callAction('go-to-page', { \"name\": lastPage });\n} else {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\" : \"app_sorcodematch\",\n      \"item-type\" : \"app-notification\",\n      \"style\" : \"error\",\n      \"title\" : \"Warning\",\n      \"text\" : \"You have already added this Van Stock Code to the Job.\"\n    }\n  );\n}"},"_auto_id_":"7dbe92b2-6254-4989-a05d-f9781aa1e612"}],"model":"$store.variables.vanStockSearchResults","dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"list_vanstock_html","_auto_id_":"cb9dbd4b-8dd0-43bf-a363-32a9b647a989","content":"<div style=\"display:block;width:100%\">\n  <div style=\"padding-bottom:10px;font-weight:bold;\">Van Stock: {{$data.$item.sStockCode}}</div>\n  <div>{{$data.$item.sStockDescription}}</div>\n</div>"}]},{"name":"SearchJobVanStockCodes","type":"component","item-type":"web-component","content":[],"componentId":"55b24a7c-9cde-4da4-95b2-8ab725ae8165","_auto_id_":"8d742a88-9c0d-4b70-b7bd-1b8ef96568eb","attributes":{"sourceObjectArrayName":"cti.store.jobs.selectedJob.aVanStock","displayArrayName":"cti.store.variables.vanStockJobSearchResults","displayListIfNoSearch":1,"maxResults":30,"minCharacters":3,"locationFilter":""},"expressions":{"show":"$store.variables.menuOption === \"schedules\""},"actions":[]},{"name":"html_vanstockcodesadded","type":"content","item-type":"html","_auto_id_":"091f6a3a-7ef5-4965-a514-98f8c17922d4","content":"<br>\n<p>Please confirm quantities for the below Van Stock codes added to this job.</p>\n<hr>","expressions":{"show":"$store.variables.menuOption === \"schedules\""}},{"name":"list_vanstocksummary","type":"content","item-type":"list","_auto_id_":"dee3e2ef-ff22-4580-83a0-8ba38d85992d","search":"","classes":"","expressions":{"show":"$store.variables.menuOption === \"schedules\""},"theme":"bootstrap","model":"$store.variables.vanStockJobSearchResults","actions":[],"dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"list_vanstocksummary_html","_auto_id_":"2e7ca085-2168-4164-9660-b78810e6de3d","content":"<div class=\"inlineblock-outer\">\n    <div class=\"inlineblock-outer\">\n        <div class=\"sor-header\">{{$data.$item.sStockCode}}</div>\n    </div>\n    <div>{{$data.$item.sStockDescription}}</div>\n</div>\n<hr>\n<div class=\"inlineblock-default inlineblock-toggle\">\n    <div class=\"inlineblock-default\">\n        <div class=\"qty-text\" for=\"name\">Quantity</div>\n        <div class=\"remaining-text\" for=\"name\">Remaining</div>\n    </div>\n    <div class=\"inlineblock-default\">\n        <numeric-toggler class=\"qty-block\" id=\"quantity-{{$data.$item.sStockCode}}\" initialQuantity=\"0\" canDecrement=false></numeric-toggler>\n        <numeric-toggler class=\"remaining-block\" id=\"remaning-{{$data.$item.sStockCode}}\" initialQuantity=\"0\" canDecrement=false></numeric-toggler>\n    </div>\n</div>"}]},{"name":"previous_btn","type":"button","item-type":"button","_auto_id_":"a501c120-5453-42fb-ab7c-eca9a3096d4a","content":"Back","theme":"default","expressions":{"disabled":"$form.invalid"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction('go-to-page', { \"name\": \"VanLocationSelect\" });"},"_auto_id_":"5b6a9b31-2a29-4dcd-9172-d0d28b081516"}],"classes":"button-bar-btn"}],"_auto_id_":"a93eff0d-d41a-40fc-bcec-00071c6f2bc1","expressions":{}}]},{"start":false,"name":"SpecialPurchases","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"cd91eb49-5053-4a39-87b4-94c05389eb2d","content":"<h3 class=\"title\">OTC Purchases</h3>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"592b8f88-65b9-48bf-8175-ee15197fd015","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"SpecialPurchases","componentInstanceId":"7fef754b-d586-4493-a200-855e51f4d3af","function":"open"},"_auto_id_":"c28adaef-4630-450b-bdfd-7ea80bc2be61"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"07ac675b-ca3e-48d2-962b-155f51a362ef","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"868bba34-a1be-45fe-99bf-d23517dcf6c5"}]},{"name":"btnVanStockCodes","type":"button","item-type":"button","_auto_id_":"8edeabb4-d7ff-4ab5-9f22-5e4aea1dfd2b","content":"Van Stock Codes","theme":"default","expressions":{},"left-icon":"fa-truck","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateVanStock","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"942a9e39-8022-4388-9753-21118c04028f"}]},{"name":"btnSORCodes","type":"button","item-type":"button","_auto_id_":"c5722c9d-c09c-469c-8b7d-4d72695f7166","content":"SOR Codes","theme":"default","expressions":{},"left-icon":"fa-barcode","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSORCodes","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"feae706c-8504-40de-aa1a-47fb4435bf81"}]},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"fa589497-ef48-479b-bcb5-7e3927dc89e1","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"61632dc6-1ee4-44d1-af3d-0247d914bc62"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"f49eb2ae-5ec9-4cbe-bf00-436bd87e74c9","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"75e889d7-7db4-4b28-b879-4911b2b6f470"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"c582d9a3-45a6-4146-b2b2-086422aaf1a8","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"361db3d8-0691-4015-ac25-a47d5a0c7feb"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"7fef754b-d586-4493-a200-855e51f4d3af","attributes":{},"expressions":{}}],"_auto_id_":"3539e05d-d92a-4b97-9d59-a187b7233e3f","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"7aa56b42-cdd7-44b1-8205-3bb6366a8f5f","content":[{"name":"html_specialorderheader","type":"content","item-type":"html","_auto_id_":"577361ef-6379-4f6a-b5bd-bfea587deed7","content":"<h4 style=\"margin-bottom:40px;\">Over The Counter Purchases</h4>\n<p>If you require a part to complete the job, please raise a PO for it here.</p>","expressions":{}},{"name":"specialorder_btn","type":"button","item-type":"button","_auto_id_":"5e1002d0-cdbd-4707-8980-8abc9ec83969","content":"Special Order","theme":"default","expressions":{"show":"$store.variables.specialOrder != true"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.specialOrder = true;\ncti.utils.updatePage();"},"_auto_id_":"b951bc85-f993-4716-bdc4-3342b99d6564"}],"classes":"confirm-bar-btn"},{"name":"listHeader","type":"content","item-type":"html","_auto_id_":"d7f19b62-74a2-4eb4-81f5-0ce3cf872ac4","content":"<h4 style=\"margin-top:40px;\">List of Over The Counter purchases requested</h4>","expressions":{"show":"$store.jobs.selectedJob.jobSpecialOrders != undefined"}},{"name":"specialOrdersList","type":"content","item-type":"list","_auto_id_":"8bae6cef-038e-4edc-bbae-e5f0a594010b","search":"","classes":"","expressions":{"show":"$store.variables.specialOrder != true"},"model":"$store.jobs.selectedJob.aSpecialOrders","theme":"bootstrap","actions":[],"dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"specialOrdersList_html","_auto_id_":"dd3f9dbf-d939-4817-8999-b1643be0b86d","content":"<div>Job Number: {{$data.$item.orderJobNumber}}</div>\n<div>Supplier: {{$data.$item.orderSupplier}}</div>\n<div>Value: {{$data.$item.orderValue}}</div>\n<div>Description: {{$data.$item.orderDescription}}</div>\n<div>Date: {{$data.$item.orderDateTime}}</div>"}]},{"name":"html_jobnumber","type":"content","item-type":"html","_auto_id_":"902fd4a1-2af1-42d8-b4eb-f5336fa9a7ec","content":"<h4>Job No. {{'$store.jobs.selectedJob.aAccuServJobID.sJobNo'|store}}</h4>","expressions":{"show":"$store.variables.specialOrder == true"}},{"name":"orderSupplier","type":"choice","item-type":"select","_auto_id_":"f5e87259-5ece-4ae6-97da-1fee91e6759c","label":"Order Supplier:","required":true,"options":[{"label":"Option 1","value":1},{"label":"Option 2","value":2},{"label":"Option 3","value":3}],"expressions":{"show":"$store.variables.specialOrder == true"},"message":"This is a required field"},{"name":"orderValue","type":"user-input","item-type":"number","_auto_id_":"00927ac7-622e-4b06-ae49-e35a472264c8","label":"Order Value:","required":true,"decimals":2,"expressions":{"show":"$store.variables.specialOrder == true"},"message":"This is a required field"},{"name":"orderDescription","type":"user-input","item-type":"text","_auto_id_":"0dff18f9-4a6a-4809-8256-324a098a6a81","label":"Order Description:","required":true,"multiline":true,"debounce":250,"expressions":{"show":"$store.variables.specialOrder == true"},"message":"This is a required field"},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"1fb607bc-3dd8-4495-ae57-af5253f79e52","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"196e0061-5c49-4a68-b2b8-38df9d7d8cb2","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"VanLocationSelect","isConditional":false}}],"expressions":{"show":"$store.variables.specialOrder == false || $store.variables.specialOrder === undefined"},"theme":"default","classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"d2849328-14d2-448b-82f6-0b6e70a812c6","content":"Next","theme":"default","expressions":{"show":"$store.variables.specialOrder == false || $store.variables.specialOrder === undefined"},"classes":"button-bar-btn","actions":[{"event":"click","type":"go-to-page","data":{"name":"Completion","isConditional":false},"_auto_id_":"564e7042-aab0-4476-aaae-4d5f89988ee8"}]},{"name":"cancel_btn","type":"button","item-type":"button","_auto_id_":"d788bd16-4bb7-458e-864d-b33dd37ef844","content":"Cancel","theme":"default","expressions":{"show":"$store.variables.specialOrder == true"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.destroyPageData('SpecialPurchases');\ncti.store.variables.specialOrder = false;\ncti.utils.updatePage();"},"_auto_id_":"6195d49e-2065-4b9b-9cf5-acca6b8a2b9d"}],"classes":"button-bar-btn"},{"name":"placeorder_btn","type":"button","item-type":"button","_auto_id_":"fb658566-9e20-41e1-9dbd-61b155f42028","content":"Request","theme":"default","expressions":{"show":"$store.variables.specialOrder == true","disabled":"$form.invalid"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"debugger;\nif(cti.store.jobs.selectedJob.aSpecialOrders == undefined) cti.store.jobs.selectedJob.aSpecialOrders = [];\n\nvar orderDetail = {\n  \"orderJobNumber\": cti.store.jobs.selectedJob.aAccuServJobID.sJobNo,\n  \"orderSupplier\": cti.store.pages.SpecialPurchases.orderSupplier.label,\n  \"orderValue\": cti.store.pages.SpecialPurchases.orderValue,\n  \"orderDescription\": cti.store.pages.SpecialPurchases.orderDescription,\n  \"orderDateTime\": moment().format()\n};\n\ncti.store.jobs.selectedJob.aSpecialOrders.push(orderDetail);\n\ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\" : \"app_specialordersent\",\n    \"item-type\" : \"app-notification\",\n    \"style\" : \"info\",\n    \"title\" : \"Special Order Sent!\",\n    \"text\" : \"You have requested a Special Order from \" + cti.store.pages.SpecialPurchases.orderSupplier.label + \" for Job Number \" + cti.store.jobs.selectedJob.aAccuServJobID.sJobNo\n  }\n);\n\ncti.utils.destroyPageData('SpecialPurchases');\ncti.store.variables.specialOrder = false;\ncti.utils.updatePage();"},"_auto_id_":"1b3f7e8a-a949-4064-83ca-69f7bbc35f65"}],"classes":"confirm-bar-btn"}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"Completion","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"37c4e31a-9d27-4e23-a7a5-e61da4479d55","content":"<h3 class=\"title\">Complete Job</h3>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"b4611b6b-98c0-4e78-8ec9-a73a50f0f984","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"Completion","componentInstanceId":"08aead8a-9c5d-4669-a6f9-b46a1c557626","function":"open"},"_auto_id_":"5df3a95b-583b-4833-bee3-5a7f66d31543"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"dcd22eaa-2efb-4be9-9531-397c6bf89491","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"ba8cc4a9-3082-4166-9d5f-fede6920a3f9"}]},{"name":"btnVanStockCodes","type":"button","item-type":"button","_auto_id_":"187ec6b7-892a-4c4f-aa37-5b06392beb4c","content":"Van Stock Codes","theme":"default","expressions":{},"left-icon":"fa-truck","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateVanStock","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"62707925-29f1-40a1-beb3-730832fbc4b6"}]},{"name":"btnSORCodes","type":"button","item-type":"button","_auto_id_":"019ecd1e-0c92-4596-b6d3-658d548d7822","content":"SOR Codes","theme":"default","expressions":{},"left-icon":"fa-barcode","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSORCodes","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"3911ff55-efde-4d80-b985-5dd8d7d38798"}]},{"name":"btnJobMap","type":"button","item-type":"button","_auto_id_":"38dc6d4b-755a-4c9f-ab43-28f178b461ec","content":"Job Map","theme":"default","expressions":{},"left-icon":"fa-map-marker","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobMap","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"3c336e36-59b0-4952-bafe-8d34e35d009a"}]},{"name":"btnJobHistory","type":"button","item-type":"button","_auto_id_":"c2d8fde9-9c37-4ceb-b6e5-d98b8d6de6e1","content":"Job History","theme":"default","expressions":{},"left-icon":"fa-history","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobHistory","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"a90be397-648c-42eb-96f3-d7705b85139e"}]},{"name":"btnJobSummary","type":"button","item-type":"button","_auto_id_":"30511c63-a476-4263-b569-c937bb666b5c","content":"Job Summary","theme":"default","expressions":{},"left-icon":"fa-file-text","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateJobSummary","params":{"lastPage":"{{$store.state.currentPage}}"}},"_auto_id_":"035b28e7-14b4-4eb7-b153-16b23c7081b7"}]}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"08aead8a-9c5d-4669-a6f9-b46a1c557626","attributes":{},"expressions":{}}],"_auto_id_":"a2920a3a-924d-470d-a756-449fc179319e","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","_auto_id_":"72153b47-c86e-4042-a959-d2990ab9a63b","content":[{"name":"operativeComments","type":"user-input","item-type":"text","_auto_id_":"8933982d-5bf7-4b6b-8628-faa2cc56fec1","label":"Operative Comments:","required":true,"multiline":true,"debounce":250,"expressions":{"show":"$store.variables.confirmJobComplete != true"},"message":"This is a required field"},{"name":"operativeSignature","type":"user-input","item-type":"signature","_auto_id_":"8824c457-5f83-4005-90ca-8bba098ac3e9","label":"Signature: ","required":true,"expressions":{"show":"$store.variables.confirmJobComplete != true"},"message":"This is a required field"},{"name":"confirmJobCompletion","type":"content","item-type":"html","_auto_id_":"0a411f5e-8a0d-434b-93c0-327b031211e2","content":"<h3 style=\"\n    text-align: center;\n    margin-top: 20px;\n    color: green;\n\">Confirmation</h3>\n<p style=\"\n    text-align: center;\n    color: green;\n\">The task is now complete and ready to be sent. Once sent, no further changes can be made.</p>\n<p style=\"\n    text-align: center;\n    color: green;\n    font-weight: bold;\n\">Are you sure you wish to send the task?</p>","expressions":{"show":"$store.variables.confirmJobComplete == true"}},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"a5b544fe-2596-496d-b2df-a5d1a8591292","extends":{"type":"area","item-type":"row"},"content":[{"name":"previous_btn","type":"button","item-type":"nav-button","_auto_id_":"3ef2550b-78ec-4c30-b78e-6e491cd09375","extends":{"type":"button","item-type":"button"},"content":"Previous","actions":[{"event":"click","type":"go-to-page","data":{"name":"SpecialPurchases","isConditional":false}}],"expressions":{"show":"$store.variables.confirmJobComplete != true"},"theme":"default","classes":"button-bar-btn"},{"name":"next_btn","type":"button","item-type":"button","_auto_id_":"3936b219-7779-4b5d-8fb5-b694ac27807e","content":"Complete Job","theme":"default","expressions":{"disabled":"$form.invalid","show":"$store.variables.confirmJobComplete != true"},"classes":"confirm-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.confirmJobComplete = true;\ncti.utils.updatePage();"},"_auto_id_":"62bca83b-bd1c-4dfb-8aff-c34dbf690201"}]},{"name":"no_btn","type":"button","item-type":"button","_auto_id_":"4d7da1f8-ae85-4ceb-9fa0-b00314d767e2","content":"No","theme":"default","expressions":{"show":"$store.variables.confirmJobComplete == true"},"classes":"button-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.variables.confirmJobComplete = undefined;\ncti.utils.updatePage();"},"_auto_id_":"8ee3d453-6b24-4474-8056-2b309bfdb8b8"}]},{"name":"yes_btn","type":"button","item-type":"button","_auto_id_":"880df185-f42d-45ed-9519-06f0589b65c2","content":"Yes","theme":"default","expressions":{"show":"$store.variables.confirmJobComplete == true"},"classes":"confirm-bar-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.utils.callAction('call-actionflow', { \"name\": \"JobCompleteEvent\" });"},"_auto_id_":"7cdc3c68-858f-4ce9-b709-bcd63450f613"}]}],"expressions":{}}],"expressions":{}}]},{"start":false,"name":"JobSummary","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"c4845e67-9f08-4c6e-8b29-d1a127e0ecd2","content":"<h4 class=\"title\">Job Summary</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"01624c34-e4cf-4599-b951-6b2b1ecede26","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"JobSummary","componentInstanceId":"4962b4e2-1b57-49da-9439-afb703878036","function":"open"},"_auto_id_":"ee8fa8f6-8d93-458d-983e-c57b97d1ef77"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"398d66fc-607a-45c8-8a4f-2964fde883a6","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"c8d8d6c8-d676-43f7-810e-d52903d7eb52"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"67da2a6c-181c-4af0-856d-28989b4ade0e","content":"Job List","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"bf310cdf-9d59-4b18-979c-38ca0f54268c"}],"left-icon":"fa-list"},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"df632620-7d0d-442a-a92b-f49492bb4efe","content":"Logout","theme":"default","expressions":{"show":"$store.variables.jobStarted == false"},"left-icon":"fa-sign-out","actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"43979275-59b2-4ed3-8512-97e13f4b65d3"}]},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"b6caaf4b-6e6d-4ec3-92d9-a04ef4c21fe0","attributes":{},"expressions":{}}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"4962b4e2-1b57-49da-9439-afb703878036","attributes":{},"expressions":{},"actions":[]}],"_auto_id_":"451f3f84-ca3e-4ac0-baae-f39a55231b70","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"html_jobaccessdetail","type":"content","item-type":"html","_auto_id_":"e593e9b4-853d-44a4-9011-17528ebd47ee","content":"<h4 style=\"font-weight:bold;\">AccuServ Job ID Details</h4>\n<div>\n\t<p>Job Number: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.aAccuServJobID.sJobNo'|store}}</span></p>\n  \t<p>Operative ID: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.aOperativeDetail.sOperativeName'|store}}</span></p>\n  \t<p>Contract: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.sContract'|store}}</span></p>\n</div>\n<hr>\n<h4 style=\"font-weight:bold;\">Tenant Details</h4>\n<div>\n\t<p>Name: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.aPropertyDetail.sTenant_Name'|store}}</span></p>\n\t<p>Home: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.aPropertyDetail.sHome_No'|store}}</span></p>\n\t<p>Mob:  <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.aPropertyDetail.sMobile_No'|store}}</span></p>\n  \t<p>Address: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.aPropertyDetail.sAddress_1'|store}}</span></p>\n\t<p>         <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.aPropertyDetail.sAddress_4'|store}}</span></p>\n\t<p>         <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.aPropertyDetail.sPostcode'|store}}</span></p>\n</div>\n<hr>\n<h4 style=\"font-weight:bold;\">Job Detail</h4>\n<div>\n  <p>{{'$store.jobs.selectedJob.sProblemSummary'|store}} - {{'$store.jobs.selectedJob.sProblemDetail'|store}}</p>\n  <p>Expected Duration: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.sExpected_Duration'|store}} minutes</span></p>\n  <p>Attend On Date/Time: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.dAttendOnDate'|store}} {{'$store.jobs.selectedJob.iAttendOnHrs'|store}}:{{'$store.jobs.selectedJob.iAttendOnMins'|store}}</span></p>\n  <p>Appointment Slot: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.sAssignedType'|store}}</span></p>\n  <p>Job Target Date/Time: <span style=\"color:#0072C6\">{{'$store.jobs.selectedJob.dJobTargetDate'|store}} {{'$store.jobs.selectedJob.iJobTargetHrs'|store}}:{{'$store.jobs.selectedJob.iJobTargetMins'|store}}</span></p>\n</div>","expressions":{}},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"5f6294d9-d259-4d63-9605-fbea723aa63f","extends":{"type":"area","item-type":"row"},"content":[{"name":"back_btn","type":"button","item-type":"button","_auto_id_":"c173182b-6ae1-4513-adf1-0b74b2021637","content":"Back","theme":"default","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"debugger;\nvar lastPage = cti.store.variables.jobSummaryLastPage;\ncti.utils.callAction('go-to-page', { \"name\": lastPage });"},"_auto_id_":"30cb4e5c-8434-41a2-9677-3d195c46ed99","actions":[]}],"expressions":{},"classes":"button-bar-btn"}],"expressions":{}}],"_auto_id_":"bbee4da1-0919-43e5-9dbe-1424365d61df"}]},{"start":false,"name":"SupportInfo","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"65839cf5-77ab-4fa3-a88b-aa47cdaf2389","content":"<h4 class=\"title\">Support Information</h4>","expressions":{}}],"_auto_id_":"18af08c4-6851-4fa3-85ed-6f5f3c49a546","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"html_jobaccessdetail","type":"content","item-type":"html","_auto_id_":"4a6b3806-3ade-4ec9-b0d4-295d982a1c02","content":"<h4 style=\"font-weight:bold;\">Current user information</h4>\n<div>\n\t<p>Current user: {{'$store.currentProfile.username'|store}}</p>\n\t<p>Login token expires: {{'$store.variables.supportInfo.tokenExpiry'|store}}</p>\n\t<p>Session expires: {{'$store.variables.supportInfo.sessionExpiry'|store}}</p>\n</div>\n<hr>\n<h4 style=\"font-weight:bold;\">Application information</h4>\n<div>\n\t<p>Version: {{'$store.schema.version'|store}}</p>\n</div>\n<hr>\n<h4 style=\"font-weight:bold;\">Event history</h4>","expressions":{}},{"name":"list_eventLog","type":"content","item-type":"list","_auto_id_":"192abec9-096f-4e03-962a-56fac7f38afe","search":"","classes":"","model":"$store.log","actions":[],"expressions":{},"theme":"bootstrap","dataSource":"dynamic","data":"","listItemClasses":"","content":[{"type":"content","item-type":"html","name":"list_eventLog_html","_auto_id_":"8ab7a0ce-876b-48dc-adf1-fe22d8bbd95d","content":"<div class=\"list-item-container\">\n  <div class=\"list-item-head\">{{$data.$item.time}} <span class=\"log-{{$data.$item.type}}\"><b>{{$data.$item.type}}</b></span></div>\n  <div class=\"list-item-detail\">{{$data.$item.message}}</div>\n</div>"}]},{"name":"button_bar","type":"area","item-type":"button-bar","_auto_id_":"98b8c298-ab37-473d-a8a8-ed81462ac9c9","extends":{"type":"area","item-type":"row"},"content":[{"name":"back_btn","type":"button","item-type":"button","_auto_id_":"1d9cf413-155d-4846-8034-859307aa9494","content":"Back","theme":"default","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"delete cti.store.variables.supportInfo;\ncti.utils.callAction('go-to-page', { \"name\": cti.store.variables.supportInfoLastPage });"},"_auto_id_":"c08437e4-39d5-4ce2-a902-101130c9b3b2","actions":[]}],"expressions":{},"classes":"button-bar-btn"}],"expressions":{}}],"_auto_id_":"8aa6d36d-b5b8-4d31-8a52-a1092da26fdf"}]},{"start":false,"name":"PauseTask","config":[],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"html_header","type":"content","item-type":"html","_auto_id_":"48e28fcc-6ddf-4970-b012-e6d6f075a0df","content":"<h4 class=\"title\">Pause Task</h4>","expressions":{}},{"name":"menu_btn","type":"button","item-type":"button","_auto_id_":"014bbc8b-a170-4c01-9649-af47825b4ed4","content":"","theme":"default","expressions":{},"classes":"header-button","right-icon":"fa-bars","actions":[{"event":"click","type":"call-component-function","data":{"page":"JobSummary","componentInstanceId":"0519b892-21f2-40ec-b43f-b55b0c7604bd","function":"open"},"_auto_id_":"4be9300e-f769-43b1-a8a7-02d35c68f23f"}]},{"name":"ContextMenu","type":"component","item-type":"web-component","content":[{"name":"btnVersion","type":"button","item-type":"button","_auto_id_":"5129c556-e46e-4e55-93c2-20179edafc8e","content":"Version {{'$store.schema.version' | store}}","theme":"default","expressions":{},"left-icon":"fa-info-circle","actions":[{"event":"click","type":"call-function","data":{"name":"fnNavigateSupportInfo"},"_auto_id_":"a8df20a1-1699-4f06-bef8-35efd68e1431"}]},{"name":"btnJobList","type":"button","item-type":"button","_auto_id_":"150246c2-c6f0-46c8-a7e0-7949f5333f4a","content":"Job List","theme":"default","expressions":{"show":"$store.payloads.pauseTask.bPauseTask != true"},"actions":[{"event":"click","type":"call-function","data":{"name":"fnClearJobData","params":{"page":"JobList"}},"_auto_id_":"b43f4b47-fb3d-4c35-aef7-3f93f5cd9a28"}],"left-icon":"fa-list"},{"name":"btnLogout","type":"button","item-type":"button","_auto_id_":"f0adb631-3374-4dc0-bf11-13c655695a5c","content":"Logout","theme":"default","expressions":{"show":"$store.payloads.pauseTask.bPauseTask != true"},"left-icon":"fa-sign-out","actions":[{"event":"click","type":"call-function","data":{"name":"fnLogout"},"_auto_id_":"ab5621b9-5a25-4284-a146-5c107cd54f2b"}]},{"name":"ActivitySpinner","type":"component","item-type":"web-component","content":[],"componentId":"649dedf7-f246-460b-841c-df3adbdf6522","_auto_id_":"341ced10-8005-4e4a-a071-79a2d80f3c20","attributes":{},"expressions":{}}],"componentId":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","_auto_id_":"0519b892-21f2-40ec-b43f-b55b0c7604bd","attributes":{},"expressions":{},"actions":[]}],"_auto_id_":"fa354505-b53c-4af6-8afe-9d6e57dcf58f","expressions":{},"classes":""},{"name":"scrollable","type":"area","item-type":"scrollable","content":[{"name":"pauseTaskInfo","type":"content","item-type":"html","_auto_id_":"6c6cc9b3-c8c2-4aac-a04b-438a46aba761","content":"<p>Please select the Pause Task button below if you would like to record Non-Productive time (i.e. lunch break)</p>","expressions":{"show":"$store.payloads.pauseTask.bPauseTask != true"}},{"name":"activityCategory","type":"choice","item-type":"select","_auto_id_":"e45a7bd6-f2e8-488a-813b-86aa1ce71454","label":"Activity Category:","required":true,"options":[{"label":"Break","value":"Break"}],"expressions":{"show":"$store.payloads.pauseTask.bPauseTask != true"},"message":"This is a required field"},{"name":"activityType","type":"choice","item-type":"select","_auto_id_":"3f0e85d8-f04b-4e7b-b9bc-4d7ca9386c81","label":"Activity Type:","required":true,"options":[{"label":"Lunch","value":"Lunch"}],"expressions":{"show":"$store.payloads.pauseTask.bPauseTask != true"},"message":"This is a required field"},{"name":"activityDuration","type":"choice","item-type":"select","_auto_id_":"c7c3e9d0-6461-4bcf-8a59-56ae02ed6473","label":"Estimated Duration:","required":true,"options":[{"label":"00:15","value":"15"},{"label":"00:30","value":"30"},{"label":"00:45","value":"45"},{"label":"01:00","value":"60"},{"label":"01:15","value":"75"},{"label":"01:30","value":"90"},{"label":"01:45","value":"105"},{"label":"02:00","value":"120"}],"expressions":{"show":"$store.payloads.pauseTask.bPauseTask != true"},"message":"This is a required field","actions":[]},{"name":"operativeComments","type":"user-input","item-type":"text","_auto_id_":"fe8f32b7-68e9-4bba-8626-3a307d2eaa68","label":"Operative Comments:","required":true,"multiline":true,"debounce":250,"expressions":{"show":"$store.payloads.pauseTask.bPauseTask != true"},"message":"This is a required field"},{"name":"pauseTask","type":"button","item-type":"button","_auto_id_":"ba312b80-ca4e-4114-869b-7c6de0466efb","content":"Pause Task","theme":"default","expressions":{"disabled":"$form.invalid","show":"$store.payloads.pauseTask.bPauseTask != true"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"cti.store.payloads.pauseTask = {\n  \"bPauseTask\" : true,\n  \"dtPauseDateTime\" : moment().locale('en').format('HH:MM DD-MM-YYYY'),\n  \"dtEndDateTime\" : \"\",\n  \"sActivityCategory\" : cti.store.pages.PauseTask.activityCategory.value,\n  \"sActivityType\" : cti.store.pages.PauseTask.activityType.value,\n  \"tEstimatedTime\" : cti.store.pages.PauseTask.activityDuration.value,\n  \"sComments\" : cti.store.pages.PauseTask.operativeComments\n};\n\n// TODO - Send on break message\n\ncti.utils.updatePage();"},"_auto_id_":"f865e20a-cfd3-4471-8a09-e7caaa91ec91"}],"classes":"getmethere-btn"},{"name":"onPause","type":"content","item-type":"html","_auto_id_":"12d17e85-5f1c-44e0-8017-e77ac30bdd49","content":"<div class=\"pauseicon\">\n\t<i class=\"fa fa-coffee\"></i>\n</div>\n<h4 class=\"pauseheader\">You are currently on {{'$store.payloads.pauseTask.sActivityType'|store}}</h4>\n<p style=\"text-align:center\">Time {{'$store.payloads.pauseTask.sActivityType'|store}} Started: <span style=\"color:#0072C6\">{{'$store.payloads.pauseTask.dtPauseDateTime'|store}}</span></p>\n<p style=\"text-align:center\">Estimated Duration: <span style=\"color:#0072C6\">{{'$store.payloads.pauseTask.tEstimatedTime'|store}} minutes</span></p>\n<p style=\"text-align:center\">Comments: <span style=\"color:#0072C6\">{{'$store.payloads.pauseTask.sComments'|store}}</span></p>\n<hr>","expressions":{"show":"$store.payloads.pauseTask.bPauseTask == true"}},{"name":"endTask","type":"button","item-type":"button","_auto_id_":"8bdcdc58-b243-49c9-a766-fc408df305f9","content":"End Task","theme":"default","expressions":{"show":"$store.payloads.pauseTask.bPauseTask == true"},"actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var endTask = {\n  \"bPauseTask\" : false,\n  \"dtPauseDateTime\" : cti.store.payloads.pauseTask.dtPauseDateTime,\n  \"dtEndDateTime\" : moment().locale('en').format('HH:MM DD-MM-YYYY'),\n  \"sActivityCategory\" : cti.store.payloads.pauseTask.sActivityCategory,\n  \"sActivityType\" : cti.store.payloads.pauseTask.sActivityType,\n  \"tEstimatedTime\" : cti.store.payloads.pauseTask.tEstimatedTime,\n  \"sComments\" : cti.store.payloads.pauseTask.sComments\n};\n  \ncti.store.payloads.pauseTask = endTask;\n\ncti.utils.destroyPageData('PauseTask');\n\n// TODO - Send off break message\n\ncti.utils.callAction('go-to-page', { \"name\": \"JobList\" });"},"_auto_id_":"0aeea6bf-19dc-4efe-8569-afa6ea9a8a1a"}],"classes":"getmethere-btn"}],"_auto_id_":"6f46dd0a-9074-4261-add8-a05e143d5e63"}]}],"actionflows":[{"content":[{"event":"click","type":"call-component-function","data":{"page":"Login","componentInstanceId":"cf76a6af-5a1e-4b46-8c07-2afbd2c50003","function":"show"},"_auto_id_":"393b9219-bbb8-4fef-840b-cbc99647c34f"},{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Fetch the loginHeaders to supply to the login request\ncti.store.variables.loginHeaders = window.appManager.newHeaderData();\n\n// Check and defined the payloads store\nif(cti.store.payloads == undefined) cti.store.payloads = {};\n\n// Create a login payload of the username and password to send to the login request\ncti.store.payloads.login = {\n  \"username\": cti.store.pages.Login.Username,\n  \"password\": cti.store.pages.Login.Password\n};\n\n$success();"},"_auto_id_":"6df841a4-159b-476e-8cba-91ccd46dc791","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"AccuServ","operation":"login","params":{"data":"{{$store.payloads.login}}","applicationkey":"{{$store.schema.metadata.applicationkey}}","messageid":"{{$store.variables.loginHeaders.messageid}}","messagedate":"{{$store.variables.loginHeaders.messagedate}}"}},"_auto_id_":"45854b79-3996-4381-a8cc-7e5d343b065d","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/*\tLogin method returns:\n\t{\n      \"token\": \"token-as-string\", -- String returned from API\n      \"errorCode\": 0, -- Returns 0 as success\n      \"errorMessage\": \"\", -- Empty if error code is 0\n      \"startOfDayRequired\": true, -- True or false based on first login\n      \"expiresIn\": 3600, -- defult TTL\n      \"jobsRequired\": 0, -- Number of jobs for the operative\n      \"messageid\": \"\" -- Unique message ID supplied from API\n    }\n*/\n\n// Create link to API for Google Maps\nvar google = document.getElementById('google');\n\n// Check if we haven't already added the script tag\nif(google == undefined) {\n  var googleMaps = document.createElement('script');\n  googleMaps.id = 'google';\n  googleMaps.src = 'https://maps.googleapis.com/maps/api/js?key=' + cti.store.schema.metadata.googleapikey;\n  document.body.appendChild(googleMaps);\n}\n\n// Hide variable set to hide elements not wanted yet in this version: Example vehicle reg\ncti.store.hide = false;\n\n// Just encoded at the mo, but we'll ultimately use an encrypted hash for an offline login check later. We'll only store this if the login succeeds\nvar username = cti.store.pages.Login.Username.toLowerCase();\nvar credentialHash = btoa(username + '==' + cti.store.pages.Login.Password);\nvar dt = new Date();\n\n// Make certain the password is cleared\ndelete cti.store.pages.Login.Password;\n\n// Grab the result so we can check if our login request was actually accepted\n// We'll put it in a holding object so we can delete the API store response\nvar loginResult = {\n  \"errorCode\": cti.store.api.AccuServ.login.errorCode,\n  \"errorMessage\": cti.store.api.AccuServ.login.errorMessage,\n  \"token\": cti.store.api.AccuServ.login.token,\n  \"startOfDayRequired\": cti.store.api.AccuServ.login.startOfDayRequired,\n  \"expiresIn\": cti.store.api.AccuServ.login.expiresIn,\n  \"jobsRequired\": cti.store.api.AccuServ.login.jobsRequired,\n  \"messageid\": cti.store.api.AccuServ.login.messageid,\n  \"maxLoginDuration\": cti.store.api.AccuServ.login.maxLoginDuration || (60 * 1)\n}\n\n// Delete API store response for Login\ndelete cti.store.api.AccuServ.login;\n\n// Check response for failure \n//\n// Proceed through workflow to Initialise if errorCode returns 0 \n// and startOfDayRequired == true\n// Proceed straight to JobList otherwise\nif(loginResult.errorCode == 0) {\n  cti.fnInitialiseModel();\n \n  // Is the user the same as the last logged in user?\n  if(cti.store.lastLogin !== undefined) {\n    // Different user - van stock is redundant\n    if(username != cti.store.lastLogin.username) {\n      window.appManager.logEvent('Different user logging in: ' + username);\n      delete cti.store.offlineApi.AccuServOffline.vanstock;\n      delete cti.store.staticData.vanStockLastRetrievedDate;\n    }\n    else if (window.appManager.areDatesEqual(cti.store.lastLogin.dateTime, dt)) {\n      window.appManager.logEvent('Logging back in: ' + username);\n    }\n    else {\n      window.appManager.logEvent('First login today: ' + username);\n    }\n  }\n  else  {\n    window.appManager.logEvent('New user logging in: ' + username);\n  }\n\n  // Store the user as the last user to login\n  cti.store.lastLogin = {\n    \"userHash\": credentialHash,\n    \"username\": username,\n    \"dateTime\": dt\n  };\n  \n  \t// PW I've pre-emptively supported the ability for the login method to tell us the maximum length of our\n    // session, during which we may keep re-acquiring a token to keep the session running. Once we reach this\n    // threshhold (maxLoginDuration; defaults to 14 hours from login), the user must fully login again.\n\tvar maxLoginDurationExpiry = new Date();\n\tmaxLoginDurationExpiry.setMinutes(maxLoginDurationExpiry.getMinutes() + loginResult.maxLoginDuration);\n\n  // Create a current profile for the user\n  cti.store.currentProfile = {\n    \"username\": username,\n    \"token\": loginResult.token,\n    \"dateTime\": dt,\n    \"maxLoginDurationExpiry\": maxLoginDurationExpiry,\n    \"jobsRequired\": loginResult.jobsRequired\n  };\n  \n  cti.fnUpdateAuthToken(loginResult.token, loginResult.expiresIn);\n\n  // TODO - Change back to full logic once testing finishes\n  //if (loginResult.startOfDayRequired) {\n  if (true) {\n    cti.utils.callAction('call-actionflow', { \"name\": \"Initialise\" });\n  } else {\n    cti.fnCloseSpinner();\n    cti.utils.callAction('call-actionflow', { \"name\": \"GetJobList\" });\n  }\n} else {\n  // We have failed to login, display returned error message\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\": \"api_response_error\",\n      \"title\": \"Login Failed\",\n      \"text\": loginResult.errorMessage || \"Please provide a valid Username and Password\"\n    }\n  );\n}\n\n// Delete loginHeaders payload object\ndelete cti.store.variables.loginHeaders;\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"4034f103-27c7-44bd-969a-9916f07ec492","actions":[]},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Make certain the password is cleared\ndelete cti.store.pages.Login.Password;\n\n// TODO Depending on the nature of the failure, we can allow the user to log in using cached credentials\n\n// Delete loginHeaders payload object\ndelete cti.store.variables.loginHeaders;\n\n// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"title\": \"Login failed\",\n    \"text\": \"We couldn't reach the AccuServ server to log you in. Please contact support\"\n  }\n);\nwindow.appManager.logEvent('Failed to process login request (API connection).', 'warning');\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"71161c91-2c2c-43c8-b041-8827f9904307","actions":[]}]}]}],"name":"Login"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Fetch the initialiseHeaders to supply to the initialise request\ncti.store.variables.initialiseHeaders = window.appManager.newHeaderData();\n\n$success();"},"_auto_id_":"d266ec9c-4f53-434a-8a22-3062883c0d4b","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"AccuServ","operation":"initialise","params":{"messageid":"{{$store.variables.initialiseHeaders.messageid}}","applicationkey":"{{$store.schema.metadata.applicationkey}}","messagedate":"{{$store.variables.initialiseHeaders.messagedate}}","authtoken":"{{$store.variables.initialiseHeaders.authtoken}}"}},"_auto_id_":"ba21dbf3-b9c7-49de-8a27-e5ab4e40f93b","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* Initialise Endpoint - Returns:\n    {\n      \"bSuccess\": true, -- True or false returned on success\n      \"sStatus\": \"\", -- Success message\n      \"sLineManager\": \"\", -- Line manager name\n      \"sLineManagerMobile\": \"\", -- Line manager telephone\n      \"nlastRecordedMileage\": 0, -- Last recorded mileage reading\n      \"bSORAttribDownloadRequired\": true, -- Boolean to determine SOR download\n      \"bSORDownloadRequired\": true, -- Boolean to determine SOR download\n      \"bVanDownloadRequired\": true, -- Boolean to determine Van stock download\n      \"sVanReg\": \"YS60OJP\", -- Vehicle reg\n      \"messageid\": \"\" -- Unique message ID supplied from API\n    }\n*/\n\n// Grab response\nvar resp = cti.store.api.AccuServ.initialise;\n\n// Check response for failure \n// Proceed through workflow to VehicleChecks if errorCode returns 0\nif(resp.bSuccess) {\n  // Store away Vehicle and stock specific data for future use\n  cti.store.staticData.sorCodesLastUpdate = resp.sorCodesLastUpdate;\n  cti.store.pages.VehicleChecks.vehicleRegistration = resp.sVanReg;\n  cti.store.pages.VehicleChecks.vehicleOdometer = resp.nlastRecordedMileage;\n  cti.store.staticData.vanStockLastUpdate = resp.vanStockLastUpdate;\n  cti.store.currentProfile.managerTelephone = resp.sLineManagerMobile;\n  cti.store.currentProfile.managerName = resp.sLineManager;\n\n  cti.utils.callAction('go-to-page', { \"name\": \"VehicleChecks\" });\n} else {\n  // Notify operative that the request failed \n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\": \"api_response_error\",\n      \"title\": \"Initialisation failed\",\n      \"text\": resp.sStatus || \"AccuServ was unable to provide your startup information. Please contact support\"\n    }\n  );\n  window.appManager.logEvent('Failed to process initialisation request (API connection). ' + (resp.sStatus || ''), 'warning');\n}\n\n// Delete initialiseHeaders payload object\ndelete cti.store.variables.initialiseHeaders;\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"07b92e0e-aa25-434a-9f29-3a99c449ebcd"},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Delete initialiseHeaders payload object\ndelete cti.store.variables.initialiseHeaders;\n\n// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"title\": \"Initialisation failed\",\n    \"text\": \"We couldn't reach the AccuServ server to get your information. Please contact support\"\n  }\n);\nwindow.appManager.logEvent('Failed to process initialisation request (API connection).', 'warning');\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"f767439a-78c7-4321-acd4-de2d02462756"}]}]}],"name":"Initialise"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Fetch the startOfDayHeaders to supply to the startofday request\ndebugger;\ncti.store.variables.startOfDayHeaders = window.appManager.newHeaderData();\n\n// Form the start of day request payload. Done inline here because it's the only place we need it\nvar tyresCheckOk= false,\n    oilCheckOk = false,\n    waterCheckOk = false,\n    lightsCheckOk = false;\n\nif(cti.store.pages.VehicleChecks.tyresCheckOk == \"1\") { tyresCheckOk = true; }\nif(cti.store.pages.VehicleChecks.oilCheckOk == \"1\") { oilCheckOk = true; }\nif(cti.store.pages.VehicleChecks.waterCheckOk == \"1\") { waterCheckOk = true; }\nif(cti.store.pages.VehicleChecks.lightsCheckOk == \"1\") { lightsCheckOk = true; }\n\ncti.store.payloads.startOfDay = {\n  \"sOperativeID\": cti.store.currentProfile.username,\n  \"sVanReg\": cti.store.pages.VehicleChecks.vehicleRegistration,\n  \"nVanMileage\": cti.store.pages.VehicleChecks.vehicleOdometer,\n  \"bTyresOK\": tyresCheckOk,\n  \"bOilOK\": oilCheckOk,\n  \"bWaterOk\": waterCheckOk,\n  \"bLightsOk\": lightsCheckOk\n}\n\n$success();"},"_auto_id_":"30666bcc-5200-4b83-9dd0-624130666201","actions":[{"event":"success","type":"call-offline-api","data":{"name":"AccuServOffline","operation":"startofday","params":{"applicationkey":"{{$store.schema.metadata.applicationkey}}","authtoken":"{{$store.variables.startOfDayHeaders.authtoken}}","messageid":"{{$store.variables.startOfDayHeaders.messageid}}","messagedate":"{{$store.variables.startOfDayHeaders.messagedate}}","data":"{{$store.payloads.startOfDay}}"}},"_auto_id_":"b056bc5f-d877-4698-a26c-86f60254c9a9","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* StartOfDay Endpoint - Returns:\n    {\n      \"bSuccess\": false, -- True or false returned on success\n      \"sStatus\": \"\", -- Success message \n      \"messageid\": \"\" -- Unique message ID supplied from API\n    }\n*/\ndebugger;\n// Grab response\nvar resp = cti.store.offlineApi.AccuServOffline.startofday;\n\n// Check response for failure \n// Notify user with popup warning if the Start of Day failed to send\n// Will retry with a TTL of 60 minutes\nif(!resp.bSuccess) {\n  // Notify operative that the request failed \n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\" : \"api_response_error\",\n      \"item-type\" : \"app-notification\",\n      \"style\" : \"error\",\n      \"title\" : \"Start of Day Checks Failed to Send\",\n      \"text\" : resp.sStatus || \"A problem occurred when trying to send Start of Day checks\"\n    }\n  );\n  window.appManager.logEvent('Problem submitting start of day checks: ' + resp.sStatus, 'warning');\n}\n\n// Delete startOfDayHeaders payload object\ndelete cti.store.variables.startOfDayHeaders;"},"_auto_id_":"43a7c794-94db-4e35-bafb-0203a423472e"},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Delete startOfDayHeaders payload object\ndelete cti.store.variables.startOfDayHeaders;\n\n// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"title\": \"Failed to submit Start of Day\",\n    \"text\": \"We couldn't reach the AccuServ server to supply your Start of Day checks. Please contact support\"\n  }\n);\nwindow.appManager.logEvent('Failed to submit start of day request (API connection).', 'warning');\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"94c160ef-9eff-483c-8d20-3d21fbcbff16","actions":[]}]}]}],"name":"StartOfDay"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Check to see if we have any SOR data currently, or if its outofdate and needs updating\nif(cti.store.staticData.sorCodesLastRetrievedDate == undefined || (cti.store.staticData.sorCodesLastRetrievedDate < cti.store.staticData.sorCodesLastUpdate)) {\n  // Fetch the sorHeaders to supply to the sordata request\n  cti.store.variables.sorHeaders = window.appManager.newHeaderData();\n  $success();\n} "},"_auto_id_":"9688ddd7-f068-4355-adf5-2feb943a34d9","actions":[{"event":"success","type":"call-offline-api","data":{"name":"AccuServOffline","operation":"sordata","params":{"applicationkey":"{{$store.schema.metadata.applicationkey}}","messageid":"{{$store.variables.sorHeaders.messageid}}","messagedate":"{{$store.variables.sorHeaders.messagedate}}","authtoken":"{{$store.variables.sorHeaders.authtoken}}"}},"_auto_id_":"828033e3-bbdc-4a8a-a911-99b6a40e7643","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* SORCodes Endpoint - Returns:\n    {\n      \"bSuccess\": true, -- True or false returned on success\n      \"sStatus\": \"\", -- Success message\n      \"aSORCodesDetail\": [] -- Array of SOR Codes\n    }\n*/\n\n// Grab response\nvar response = cti.store.offlineApi.AccuServOffline.sordata;\n\n// Check response for failure \n// Notify user with popup warning if the SOR Codes failed to be retrieved\n// Will retry with a TTL of 60 minutes\nif(response.bSuccess) {\n  // On success add the SOR data to new Pouch DB instance\n  window.appManager.saveToDatabase(\n    \"sordata\", \n    response.aSORCodesDetail, function(rev) {\n      // SOR data stored successfully\n      window.appManager.logEvent('Saved SOR data, revision: ' + rev);\n      delete cti.store.offlineApi.AccuServOffline.sordata;\n      $success();\n    }, function(reason, e) {\n      // Failed to store, but makes no difference to workflow\n      delete cti.store.offlineApi.AccuServOffline.sordata;\n      window.appManager.logError('Failed to save SOR data - ' + reason, e);\n      $success();\n    });\n\n  // Timestamp the sorCodesLastRetrievedDate\n  cti.store.staticData.sorCodesLastRetrievedDate = moment().format();\n} else {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\": \"api_response_error\",\n      \"title\": \"Failed to retrieve SOR information\",\n      \"text\": resp.sStatus || \"AccuServ was unable to provide Schedule or Rates lookup information.\"\n    }\n  );\n\twindow.appManager.logEvent('Failed to retrieve SOR data. ' + (resp.sStatus || ''), 'warning');\n}\n\n// Delete sorHeaders payload object\ndelete cti.store.variables.sorHeaders;"},"_auto_id_":"cd4c2642-c762-464e-be0c-03a5f17e0b97","actions":[]},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"title\": \"Failed to retrieve SOR information\",\n    \"text\": \"We couldn't reach the AccuServ server to fetch Schedule of Rates lookup information.\"\n  }\n);\nwindow.appManager.logEvent('Failed to retrieve SOR data (API connection).', 'warning');\n\n// Delete sorHeaders payload object\ndelete cti.store.variables.sorHeaders;"},"_auto_id_":"7102cc22-6125-4022-8619-bd78c6bfcb00"}]}]},{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Check to see if we have any Van Stock data currently, or if its outofdate and needs updating\nif(!cti.store.offlineApi.AccuServOffline.vanstock || cti.store.staticData.vanStockLastRetrievedDate < cti.store.staticData.vanStockLastUpdate) {\n  // Fetch the vanStockHeaders to supply to the vanstock request\n  cti.store.variables.vanStockHeaders = window.appManager.newHeaderData();\n  $success();\n} "},"_auto_id_":"7645de48-37aa-4316-8900-2c030cd1b6f0","actions":[{"event":"success","type":"call-offline-api","data":{"name":"AccuServOffline","operation":"vanstock","params":{"applicationkey":"{{$store.schema.metadata.applicationkey}}","token":"{{$store.currentProfile.token}}","authtoken":"{{$store.variables.vanStockHeaders.authtoken}}","messagedate":"{{$store.variables.vanStockHeaders.messagedate}}","messageid":"{{$store.variables.vanStockHeaders.messageid}}"}},"_auto_id_":"2e474b71-3b41-458e-9901-824b1f851326","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* VanStock Endpoint - Returns:\n    {\n      \"bSuccess\": true, -- True or false returned on success\n      \"sStatus\": \"\", -- Success message\n      \"aOperativeVanStock\": [] -- Array of operative van stock\n    }\n*/\n\n// Grab response\nvar resp = cti.store.offlineApi.AccuServOffline.vanstock;\n\n// Check response for failure \n// Notify user with popup warning if the Van Stock failed to be retrieved\n// Will retry with a TTL of 60 minutes\nif(resp.bSuccess) {\n  // Timestamp the vanStockLastRetrievedDate\n  cti.store.staticData.vanStockLastRetrievedDate = moment().format();\n} else {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\": \"api_response_error\",\n      \"title\": \"Failed to retrieve Van Stock\",\n      \"text\": resp.sStatus || \"AccuServ was unable to provide your Van Stock information.\"\n    }\n  );\n\twindow.appManager.logEvent('Failed to retrieve Van Stock. ' + (resp.sStatus || ''), 'warning');\n}\n\n// Delete vanStockHeaders payload object\ndelete cti.store.variables.vanStockHeaders;"},"_auto_id_":"e2fd36fa-e4e1-4f33-bab7-71deac95ffea"},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"title\": \"Failed to retrieve Van Stock\",\n    \"text\": \"We couldn't reach the AccuServ server to fetch your Van Stock information.\"\n  }\n);\nwindow.appManager.logEvent('Failed to retrieve Van Stock data (API connection).', 'warning');\n\n// Delete vanStockHeaders payload object\ndelete cti.store.variables.vanStockHeaders;"},"_auto_id_":"ea554dbb-562c-49fb-bfb6-2421943f134b"}]}]},{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Check to see if we have SOR/Van stock locations\nif(cti.store.jobs.jobLocations == undefined) cti.store.jobs.jobLocations = [];\n\n// If we don't have any, call the API for job locations\nif(cti.store.jobs.jobLocations.length === 0) {\n  // Fetch the jobLocationsHeaders to supply to the vanstock request\n  cti.store.variables.jobLocationsHeaders = window.appManager.newHeaderData();\n  $success();\n} "},"_auto_id_":"2614727a-7a45-4f11-aed7-332600516c7b","actions":[{"event":"success","type":"call-offline-api","data":{"name":"AccuServOffline","operation":"joblocations","params":{"applicationkey":"{{$store.schema.metadata.applicationkey}}","token":"{{$store.currentProfile.token}}","authtoken":"{{$store.variables.jobLocationsHeaders.authtoken}}","messagedate":"{{$store.variables.jobLocationsHeaders.messagedate}}","messageid":"{{$store.variables.jobLocationsHeaders.messageid}}"}},"_auto_id_":"7c0599a6-0c82-4900-bb97-73dc143b9b0c","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* joblocations Endpoint - Returns:\n    {\n      \"bSuccess\": true,\n      \"aJobLocationDetail\": [],\n      \"messageid\": \"\"\n    }\n*/\n\n// Grab response\nvar resp = cti.store.offlineApi.AccuServOffline.joblocations;\n\n// Check response for failure \nif(resp.bSuccess) {\n  var jobLocationsObj = JSON.parse(JSON.stringify(resp.aJobLocationDetail));\n  \n  cti.store.jobs.jobLocations = jobLocationsObj;\n} else {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\": \"api_response_error\",\n      \"title\": \"Failed to retrieve Locations\",\n      \"text\": resp.sStatus || \"AccuServ was unable to provide location lookup information.\"\n    }\n  );\n\twindow.appManager.logEvent('Failed to retrieve Locations static data. ' + (resp.sStatus || ''), 'warning');\n}\n\n// Delete jobLocationsHeaders payload object\ndelete cti.store.variables.jobLocationsHeaders;\n\n// Delete API response\ndelete cti.store.offlineApi.AccuServOffline.joblocations;"},"_auto_id_":"c9ce75ec-ddb3-4aef-818f-d84b7e29f7d9"},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"title\": \"Failed to retrieve Locations\",\n    \"text\": \"We couldn't reach the AccuServ server to fetch location lookup information.\"\n  }\n);\nwindow.appManager.logEvent('Failed to retrieve Locations static data (API connection).', 'warning');\n\ndelete cti.store.variables.jobLocationsHeaders;"},"_auto_id_":"342ff11d-82ac-4d66-95a1-85e92e887c9d"}]}]},{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Check to see if we have a Trades list\nif(cti.store.staticData.tradesList == undefined) cti.store.staticData.tradesList = [];\n\n// If we don't have any, call the API for job locations\nif(cti.store.staticData.tradesList.length === 0) {\n  // Fetch the tradesListHeaders to supply to the vanstock request\n  cti.store.variables.tradesListHeaders = window.appManager.newHeaderData();\n  $success();\n} "},"_auto_id_":"01bb8541-e2c1-4c4c-929c-237b0212742e","actions":[{"event":"success","type":"call-offline-api","data":{"name":"AccuServOffline","operation":"tradeslist","params":{"applicationkey":"{{$store.schema.metadata.applicationkey}}","token":"{{$store.currentProfile.token}}","authtoken":"{{$store.variables.tradesListHeaders.authtoken}}","messagedate":"{{$store.variables.tradesListHeaders.messagedate}}","messageid":"{{$store.variables.tradesListHeaders.messageid}}"}},"_auto_id_":"3528ec43-ea1d-4c1f-b176-9081d4be6e38","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* tradeslist Endpoint - Returns:\n    {\n      \"bSuccess\": true,\n      \"sStatus\": string\n      \"aAccuServTrades\": array,\n      \"messageid\": string\n    }\n*/\n\n// Grab response\nvar resp = cti.store.offlineApi.AccuServOffline.tradeslist;\n\n// Check response for failure \nif(resp.bSuccess) {\n  var tradesList = JSON.parse(JSON.stringify(resp.aAccuServTrades));\n  \n  cti.store.staticData.tradesList = tradesList;\n} else {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\": \"api_response_error\",\n      \"title\": \"Failed to retrieve Trades List\",\n      \"text\": resp.sStatus || \"AccuServ was unable to provide location lookup information.\"\n    }\n  );\n\twindow.appManager.logEvent('Failed to retrieve Trades List static data. ' + (resp.sStatus || ''), 'warning');\n}\n\n// Delete tradesListHeaders payload object\ndelete cti.store.variables.tradesListHeaders;\n\n// Delete API response\ndelete cti.store.offlineApi.AccuServOffline.tradeslist;"},"_auto_id_":"e953fd3f-f881-4698-8632-dde042b074b1"},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"title\": \"Failed to retrieve Locations\",\n    \"text\": \"We couldn't reach the AccuServ server to fetch location lookup information.\"\n  }\n);\nwindow.appManager.logEvent('Failed to retrieve Locations static data (API connection).', 'warning');\n\ndelete cti.store.variables.tradesListHeaders;"},"_auto_id_":"733e41f7-489c-402a-b27f-c8f784ad6cb9"}]}]},{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Check to see if we have Problem Summary data\nif(cti.store.staticData.problemSummaries == undefined) cti.store.staticData.problemSummaries = [];\n\n// If we don't have any, call the API for job locations\nif(cti.store.staticData.problemSummaries.length === 0) {\n  // Fetch the problemSummaryHeaders to supply to the vanstock request\n  cti.store.variables.problemSummaryHeaders = window.appManager.newHeaderData();\n  $success();\n} "},"_auto_id_":"c8ddfd33-958a-41cd-b7f3-b2d9f63ffc9b","actions":[{"event":"success","type":"call-offline-api","data":{"name":"AccuServOffline","operation":"problemsummaries","params":{"applicationkey":"{{$store.schema.metadata.applicationkey}}","token":"{{$store.currentProfile.token}}","authtoken":"{{$store.variables.problemSummaryHeaders.authtoken}}","messagedate":"{{$store.variables.problemSummaryHeaders.messagedate}}","messageid":"{{$store.variables.problemSummaryHeaders.messageid}}"}},"_auto_id_":"35e925d4-6bfc-4d2d-8a40-98d26e678deb","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* problemsummaries Endpoint - Returns:\n    {\n      \"bSuccess\": true,\n      \"sStatus\": string\n      \"aAccuServProblemSummaries\": array,\n      \"messageid\": string\n    }\n*/\n\n// Grab response\nvar resp = cti.store.offlineApi.AccuServOffline.problemsummaries;\n\n// Check response for failure \nif(resp.bSuccess) {\n  var problemSummaries = JSON.parse(JSON.stringify(resp.aAccuServProblemSummaries));\n  \n  cti.store.staticData.problemSummaries = problemSummaries;\n} else {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\": \"api_response_error\",\n      \"title\": \"Failed to retrieve Problem Summaries\",\n      \"text\": resp.sStatus || \"AccuServ was unable to provide location lookup information.\"\n    }\n  );\n\twindow.appManager.logEvent('Failed to retrieve Problem Summaries static data. ' + (resp.sStatus || ''), 'warning');\n}\n\n// Delete problemSummaryHeaders payload object\ndelete cti.store.variables.problemSummaryHeaders;\n\n// Delete API response\ndelete cti.store.offlineApi.AccuServOffline.problemsummaries;"},"_auto_id_":"b0bd1a08-a153-4669-9f6f-fb50f0d47cd2"},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"title\": \"Failed to retrieve Problem Summaries\",\n    \"text\": \"We couldn't reach the AccuServ server to fetch location lookup information.\"\n  }\n);\nwindow.appManager.logEvent('Failed to retrieve Problem Summaries static data (API connection).', 'warning');\n\ndelete cti.store.variables.problemSummaryHeaders;"},"_auto_id_":"368d2082-ca1e-4550-a2e9-53d776e24e7e"}]}]},{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Check to see if we have Result Summary data\nif(cti.store.staticData.resultSummaries == undefined) cti.store.staticData.resultSummaries = [];\n\n// If we don't have any, call the API for job locations\nif(cti.store.staticData.resultSummaries.length === 0) {\n  // Fetch the resultSummaryHeaders to supply to the vanstock request\n  cti.store.variables.resultSummaryHeaders = window.appManager.newHeaderData();\n  $success();\n} "},"_auto_id_":"0c47332f-79e1-48a1-9484-e6233fba89ce","actions":[{"event":"success","type":"call-offline-api","data":{"name":"AccuServOffline","operation":"resultsummaries","params":{"applicationkey":"{{$store.schema.metadata.applicationkey}}","token":"{{$store.currentProfile.token}}","authtoken":"{{$store.variables.resultSummaryHeaders.authtoken}}","messagedate":"{{$store.variables.resultSummaryHeaders.messagedate}}","messageid":"{{$store.variables.resultSummaryHeaders.messageid}}"}},"_auto_id_":"7bb94064-ead1-46f5-8b37-3020951113df","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* resultsummaries Endpoint - Returns:\n    {\n      \"bSuccess\": true,\n      \"sStatus\": string\n      \"aAccuServResultSummaries\": array,\n      \"messageid\": string\n    }\n*/\n\n// Grab response\nvar resp = cti.store.offlineApi.AccuServOffline.resultsummaries;\n\n// Check response for failure \nif(resp.bSuccess) {\n  var resultSummaries = JSON.parse(JSON.stringify(resp.aAccuServResultSummaries));\n  \n  cti.store.staticData.resultSummaries = resultSummaries;\n} else {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\": \"api_response_error\",\n      \"title\": \"Failed to retrieve Result Summaries\",\n      \"text\": resp.sStatus || \"AccuServ was unable to provide location lookup information.\"\n    }\n  );\n\twindow.appManager.logEvent('Failed to retrieve Result Summaries static data. ' + (resp.sStatus || ''), 'warning');\n}\n\n// Delete resultSummaryHeaders payload object\ndelete cti.store.variables.resultSummaryHeaders;\n\n// Delete API response\ndelete cti.store.offlineApi.AccuServOffline.resultsummaries;"},"_auto_id_":"93626ca5-1c2d-452e-bae0-4c39cead14ab"},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"title\": \"Failed to retrieve Result Summaries\",\n    \"text\": \"We couldn't reach the AccuServ server to fetch location lookup information.\"\n  }\n);\nwindow.appManager.logEvent('Failed to retrieve Result Summaries static data (API connection).', 'warning');\n\ndelete cti.store.variables.resultSummaryHeaders;"},"_auto_id_":"0d2a7fe0-37e8-4ddd-b468-acdb98f7b439"}]}]}],"name":"StaticData"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Load the spinner\nvar spinner = document.querySelectorAll('load-spinner');\nif(spinner && spinner.length > 0) { spinner[0].show(); }\n\n// Fetch the jobListHeaders to supply to the joblist request\ncti.store.variables.jobListHeaders = window.appManager.newHeaderData();\n\n// Fetch the current jobList from the store to send back to AccuServ\ncti.store.payloads.jobList = cti.fnMapExportJobList(cti.store.jobs.jobList);\n\n$success();"},"_auto_id_":"27c82a06-b84f-4c0b-a744-6d73e6cfd9ef","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"AccuServ","operation":"joblist","params":{"applicationkey":"{{$store.schema.metadata.applicationkey}}","authtoken":"{{$store.variables.jobListHeaders.authtoken}}","messageid":"{{$store.variables.jobListHeaders.messageid}}","messagedate":"{{$store.variables.jobListHeaders.messagedate}}","data":"{{$store.payloads.jobList}}"}},"_auto_id_":"804d5a80-57d5-415f-832c-c543bcf98740","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* JobList Endpoint - Returns:\n    {\n      \"bSuccess\": true, -- True or false returned on success \n      \"sStatus\": \"\", -- Success message\n      \"dAssignedDate\": \"\", -- Date jobs were assigned to the operative\n      \"aAccuServJobsSummaryList\": [], -- Job summary list\n      \"messageid\": \"\" -- Unique message ID supplied from API\n    }\n*/\n\n// On the fly HTTP request to get the lat/long from address supplied\nfunction httpGetLatLong(theUrl, callback) {\n  var geocodeRequest = new XMLHttpRequest();\n  geocodeRequest.onreadystatechange = function() { \n    if (geocodeRequest.readyState == 4 && geocodeRequest.status == 200)\n      callback(geocodeRequest.responseText);\n  }\n  geocodeRequest.open(\"GET\", theUrl, true);\n  geocodeRequest.send(null);\n}\n\n// Grab response\nvar resp = cti.store.api.AccuServ.joblist;\n\n// TODO Compare for entries in API resp jobList vs jobs.jobList\n// 1 If jobs.jobList is currently empty, no comparison to do\n// 2 If a job exists in jobs.jobList but not in resp.jobList we have lost a job. Inform the user that a job has been removed\n// 3 Overwrite jobs.jobList\n// 4 Clear the API results\n\n// Check response for failure \n// Proceed to JobList page if errorCode returns 0\nif(resp.bSuccess) {\n  // Re-package API response into the jobs store\n  var jobListResponse = JSON.parse(JSON.stringify(resp.aAccuServJobsSummaryList));\n  var jobListOnDevice = cti.store.jobs.jobList;\n  cti.store.jobs.mapLocations = [];\n  \n  if(jobListResponse.length === 0 && jobListOnDevice.length > 0) {\n    jobListOnDevice = cti.store.jobs.jobList;\n  } else {\n    cti.store.jobs.jobList = jobListResponse;\n    jobListOnDevice = jobListResponse;\n  }\n\n  // Check to see if any jobs have been returned\n  if(cti.store.jobs.mapLocations != undefined || cti.store.jobs.mapLocations > 0) {\n    // For every job that exists, loop through them and return a lat/long using the Google Geocode API\n    for(var i in jobListOnDevice) {\n      var geocodeApi = \"https://maps.googleapis.com/maps/api/geocode/json?address=\" + jobListOnDevice[i].sPostcode + \"&key=AIzaSyD7SEAfX-pd_mRgCJW6LHYWBlmwVMBVBF0\";\n\n      httpGetLatLong(geocodeApi, function(response) {\n        // On success response push results into a store array\n        var resp = JSON.parse(response);\n        var latlong = resp.results[0].geometry.location;\n\n        cti.store.jobs.mapLocations.push(latlong);\n      });\n    }\n  }\n  \n  // Navigate to the Job List page\n  cti.utils.callAction('go-to-page', { \"name\": \"JobList\" });\n  \n  // Check to see if we have any jobs, and if so call the GetJobDetailOffline workflow\n  if(jobListOnDevice.length > 0) { cti.utils.callAction('call-actionflow', { \"name\": \"GetJobDetailOffline\" }); }\n} else {\n  // Notify operative that the request failed \n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\" : \"api_response_error\",\n      \"item-type\" : \"app-notification\",\n      \"style\" : \"error\",\n      \"title\" : \"Error Retrieving Job List\",\n      \"text\" : resp.sStatus || \"A problem occured when trying to retrieve the Job List\"\n    }\n  );\n}\n\n// Delete jobListHeaders payload object\ndelete cti.store.variables.jobListHeaders;\n\n// Delete API response package\ndelete cti.store.api.AccuServ.joblist;\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"6820bdd0-5d94-4ef5-a2b8-45cf5831e0ab"},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"item-type\": \"app-notification\",\n    \"style\": \"error\",\n    \"title\": \"Job List Request to API Failed\",\n    \"text\": \"The request to fetch the Job List failed to reach the server. Please contact support\"\n  }\n);\n\n// Delete jobListHeaders payload object\ndelete cti.store.variables.jobListHeaders;\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"f43a6587-7fff-4eab-8401-6cc3ce7fda0a"}]}]}],"name":"GetJobList"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Fetchs the array index of a job from the jobList\nfunction findSummaryEntry(jobid) {\n  for (var k in cti.store.jobs.jobList) {\n    var thisJob = cti.store.jobs.jobList[k];\n    if (thisJob.aAccuServJobID.iJobEventNoKey == jobid) {\n      return k;\n    }\n  }\n  return undefined;\n}\n\n// Fetchs the array index of a job from the jobDetail\nfunction findDetailEntry(jobid) {\n  for (var k in cti.store.jobs.jobDetails) {\n    var thisJob = cti.store.jobs.jobDetails[k];\n    if (thisJob.aAccuServJobID.iJobEventNoKey == jobid) {\n      return k;\n    }\n  }\n  return undefined;\n}\n\n// Purge any detail records for which there isn't a summary\nfor (var k in cti.store.jobs.jobDetails) {\n  var thisJob = cti.store.jobs.jobDetails[k];\n  var summaryIndex = findSummaryEntry(thisJob.aAccuServJobID.iJobEventNoKey);\n  if (summaryIndex === undefined) {\n    cti.store.jobs.jobDetails.splice(k, 1);\n  }\n}\n\ncti.store.variables.jobDetailToFetch = undefined;\n\n// Locate the next summary we don't have detail for\nfor (var k in cti.store.jobs.jobList) {\n  var thisJob = cti.store.jobs.jobList[k];\n  var detailIndex = findDetailEntry(thisJob.aAccuServJobID.iJobEventNoKey);\n  if (detailIndex === undefined) {\n    cti.store.variables.jobDetailToFetch = {\n      \"iJobEventNoKey\" : thisJob.aAccuServJobID.iJobEventNoKey\n    };\n    break;\n  }\n}\n// Fetch jobdetail if we have any jobs to fetch\nif(cti.store.variables.jobDetailToFetch !== undefined) {\n  // Fetch the jobDetailHeaders to supply to the joblist request\n  cti.store.variables.jobDetailHeaders = window.appManager.newHeaderData();\n  $success();\n}"},"_auto_id_":"71347fa4-e705-4cc3-88b5-339dca209b6d","actions":[{"event":"success","type":"call-offline-api","data":{"name":"AccuServOffline","operation":"jobdetail","params":{"messageid":"{{$store.variables.jobDetailHeaders.messageid}}","messagedate":"{{$store.variables.jobDetailHeaders.messagedate}}","authtoken":"{{$store.variables.jobDetailHeaders.authtoken}}","applicationkey":"{{$store.schema.metadata.applicationkey}}","data":"{{$store.variables.jobDetailToFetch}}"}},"_auto_id_":"aae5af85-5890-48ab-a3fc-c850dbf3798c","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* Job Detail Endpoint - Returns:\n    { \n      \"jobdetail\"\n    }\n*/\n\n// Grab response\nvar jobDetails = cti.store.jobs.jobDetails;\nvar resp = cti.store.offlineApi.AccuServOffline.jobdetail;\nvar detailIndex = undefined;\n\n// Check response for failure\n// Package jobdetail in variable and discard selectedJobId before continuing\n// to TenantDetails if errorCode returns 0\nif(resp.bSuccess) {\n  for(var j in jobDetails) {\n    if(resp.sJobNo == jobDetails[j].sJobNo) {\n      detailIndex = j;\n      break;\n    }\n  }\n\n  var detailObj = JSON.parse(JSON.stringify(resp));\n  \n  if(detailIndex == undefined) {\n    jobDetails.push(detailObj);\n  } else {\n    jobDetails[detailIndex] = detailObj;\n  }\n  \n  // Re-set the jobDetail store\n  cti.store.jobs.jobDetails = jobDetails;\n}\n\n// Delete jobDetailHeaders payload object\ndelete cti.store.variables.jobDetailHeaders;\n\n// Delete API response package\ndelete cti.store.offlineApi.AccuServOffline.jobdetail;\n\n// Kick off action flow again to see if we need another job fetching\ncti.utils.callAction('call-actionflow', { \"name\": \"GetJobDetailOffline\" });"},"_auto_id_":"c90eef66-260c-4900-acfa-47a8ae5ca704","actions":[]},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"item-type\": \"app-notification\",\n    \"style\": \"error\",\n    \"title\": \"Job List Request to API Failed\",\n    \"text\": \"The request to fetch the Job List failed to reach the server. Please contact support\"\n  }\n);\n\n// Delete jobDetailHeaders payload object\ndelete cti.store.variables.jobDetailHeaders;\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"d32be868-3b2b-4206-a648-db58f2ef3cf8","actions":[]}]}]}],"name":"GetJobDetailOffline"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Load the spinner\nvar spinner = document.querySelectorAll('load-spinner');\nif(spinner && spinner.length > 0) { spinner[0].show(); }\n\n// Package jobId for API call\ncti.store.variables.jobDetailToFetch = {\n  \"iJobEventNoKey\" : cti.store.variables.selectedJobId\n};\n\n// Fetch the jobDetailHeaders to supply to the jobdetail request\ncti.store.variables.jobDetailHeaders = window.appManager.newHeaderData();\n$success();"},"_auto_id_":"5b3fe1f1-7428-418c-aba3-19136f60c485","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"AccuServ","operation":"jobdetail","params":{"messageid":"{{$store.variables.jobDetailHeaders.messageid}}","messagedate":"{{$store.variables.jobDetailHeaders.messagedate}}","authtoken":"{{$store.variables.jobDetailHeaders.authtoken}}","applicationkey":"{{$store.schema.metadata.applicationkey}}","data":"{{$store.variables.jobDetailToFetch}}"}},"_auto_id_":"f2fc8f76-a775-48eb-b58f-79f39380aff1","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* Job Detail Endpoint - Returns:\n    { \n      \"jobdetail\"\n    }\n*/\ndebugger;\n// Grab response\nvar jobDetails = cti.store.jobs.jobDetails;\nvar resp = cti.store.api.AccuServ.jobdetail;\nvar detailIndex = undefined;\n\n// Check response for failure\n// Package jobdetail in variable and discard selectedJobId before continuing\n// to TenantDetails if errorCode returns 0\nif(resp.bSuccess) {\n  for(var j in jobDetails) {\n    if(resp.sJobNo == jobDetails[j].sJobNo) {\n      detailIndex = j;\n      break;\n    }\n  }\n\n  var detailObj = JSON.parse(JSON.stringify(resp));\n  \n  if(detailIndex == undefined) {\n    jobDetails.push(detailObj);\n  } else {\n    jobDetails[detailIndex] = detailObj;\n  }\n  \n  // Re-set the jobDetail store\n  cti.store.jobs.jobDetails = jobDetails;\n  \n  // Append selectedJob object\n  cti.store.jobs.selectedJob = detailObj;\n} else {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\" : \"api_response_error\",\n      \"item-type\" : \"app-notification\",\n      \"style\" : \"error\",\n      \"title\" : \"Failed to fetch Job Detail data\",\n      \"text\" : resp.errorMessage\n    }\n  );\n}\n\n// Delete jobDetailHeaders payload object\ndelete cti.store.variables.jobDetailHeaders;\n\n// Delete API response package\ndelete cti.store.api.AccuServ.jobdetail;\n\n// Delete jobId parameter variable\ndelete cti.store.variables.jobDetailToFetch;\n\n// Navigate to Tenant Details page\ncti.utils.callAction('go-to-page', { \"name\": \"TenantDetails\" });\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"1a17dbcb-6c37-4b7d-8489-63b601cad491"},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Notify operative that the request failed \ndebugger;\ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"item-type\": \"app-notification\",\n    \"style\": \"error\",\n    \"title\": \"Job Detail Request to API Failed\",\n    \"text\": \"The request to fetch the Job Detail failed to reach the server. Please contact support\"\n  }\n);\n\n// Delete jobDetailHeaders payload object\ndelete cti.store.variables.jobDetailHeaders;\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"cd999520-e74a-45a0-9629-07b3d4d8388a"}]}]}],"name":"GetJobDetailOnline"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Fetch the jobHistoryHeaders to supply to the joblist request\ncti.store.variables.jobHistoryHeaders = window.appManager.newHeaderData();\n\n// Package parameter payload for jobhistory API call\nvar jobID = cti.store.jobs.selectedJob.aAccuServJobID;\ncti.store.payloads.jobHistory = {\n  \"jobID\": {\n    \"sJobNo\": jobID.sJobNo,\n    \"iEventNo\": jobID.iEventNo,\n    \"iJobEventNoKey\": jobID.iJobEventNoKey,\n    \"sSchedulerID\": \"\",\n    \"sOriginatorID\": \"\"\n  },\n  \"contractType\": \"CURRENT\",\n  \"noOfJobs\": 9\n};\n\nvar exists = false;\n\nif(cti.store.jobs.jobHistory) {\n  for(var i in cti.store.jobs.jobHistory) {\n    var job = cti.store.jobs.jobHistory[i];\n    \n    if(job.aAccuServJobID.iJobEventNoKey == jobID.iJobEventNoKey) {\n      exists = true;\n      break;\n    }\n  }\n}\n\nif(!exists) {\n  $success();\n}"},"_auto_id_":"caf974de-17ab-4ef3-9e40-01fa972ccb51","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"AccuServ","operation":"jobhistory","params":{"authtoken":"{{$store.variables.jobHistoryHeaders.authtoken}}","applicationkey":"{{$store.variables.jobHistoryHeaders.applicationkey}}","messageid":"{{$store.variables.jobHistoryHeaders.messageid}}","messagedate":"{{$store.variables.jobHistoryHeaders.messagedate}}","data":"{{$store.payloads.jobHistory}}"}},"_auto_id_":"dc067f43-45c0-4171-bde4-af5cda1ded14","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* Job History Endpoint - Returns:\n    {\n      \"bSuccess\": boolean,\n      \"sStatus\": string,\n      \"iNoOfJobsReturned\": int,\n      \"aAccuServJobsSummaryList\": [array]\n  \t}\n*/\n\n// Grab response\nvar resp = cti.store.api.AccuServ.jobhistory;\n\n// Check response for failure\n// Package jobhistory in variable and navigate\n// to JobHistory page if errorCode returns 0\nif(resp.bSuccess) {\n  var detailHistoryObj = JSON.parse(JSON.stringify(resp.aAccuServJobsSummaryList));\n  \n  cti.store.jobs.jobHistory = detailHistoryObj;\n  cti.utils.callAction('go-to-page', { \"name\": \"JobHistory\" });\n} else {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\" : \"api_response_error\",\n      \"item-type\" : \"app-notification\",\n      \"style\" : \"error\",\n      \"title\" : \"Failed to fetch Job History data\",\n      \"text\" : resp.sStatus\n    }\n  );\n}\n\n// Delete API response package\ndelete cti.store.api.AccuServ.jobhistory;\n\n// Delete jobHistoryHeaders payload object\ndelete cti.store.variables.jobHistoryHeaders;\n\n// Delete jobHistory payload object\ndelete cti.store.variables.jobHistory;\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"325beff4-c6dd-4780-b893-765fb5823929"},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"item-type\": \"app-notification\",\n    \"style\": \"error\",\n    \"title\": \"Job History Request to API Failed\",\n    \"text\": \"The request to fetch the Job History failed to reach the server. Please contact support\"\n  }\n);\n\n// Delete jobHistoryHeaders payload object\ndelete cti.store.variables.jobHistoryHeaders;\n\n// Delete jobHistory payload object\ndelete cti.store.variables.jobHistory;\n\n// Close spinner\ncti.fnCloseSpinner();"},"_auto_id_":"4da8a904-b6bf-4622-8e59-108f2938ff3b"}]}]}],"name":"GetJobHistory"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"if(cti.store.payloads.timeSlotsPayload == undefined) cti.store.payloads.timeSlotsPayload = {};\n\nvar data = {\n  \"tradeType\": cti.store.pages.FollowOnAppointment.followOnTradeReq.label,\n  \"earliestDate\": moment(cti.store.pages.FollowOnContinued.followOnDate).format(),\n  \"numberOfDays\": cti.store.pages.FollowOnContinued.followOnDays\n};\n\ncti.store.payloads.timeSlotsPayload = data;\n\n$success();"},"_auto_id_":"404de174-16e7-4361-9ee1-5a1beddef1fa","actions":[{"event":"success","type":"call-api","data":{"sync":true,"name":"CT","operation":"selectappointments","params":{"data":"{{$store.payloads.timeSlotsPayload}}"}},"_auto_id_":"b3fa1b53-5e80-474e-989e-06dea80c998b","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"debugger;\nvar resp = cti.store.api.CT.selectappointments.appointments;\nvar timeSlots = [];\n\nfor(var i in resp) {\n  var description;\n  var date = moment(resp[i].startTime);\n  var slot = resp[i].displayText;\n  \n  var timeSlot = moment(date).format('dddd DD-MMM-YYYY');\n  \n  description = timeSlot + ' ' + slot;\n  \n  var obj = {\n    id: resp[i].id,\n    description: description,\n    selected: false\n  }\n  \n  timeSlots.push(obj);\n}\n  \ncti.store.jobs.followOnTimeSlots = timeSlots;\n\ndelete cti.store.api.CT.selectappointments;\n\ncti.store.jobs.selectedJob.bFollowOnRequired = false;\ncti.store.jobs.selectedJob.sFollowOnRequiredDetail = undefined;\n\ncti.utils.updatePage();"},"_auto_id_":"96301aec-5986-44cf-8970-843d8d85081f"},{"event":"fail","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"api_failure_error","title":"Error","text":"Fetching Follow On Appointment data has failed"},"_auto_id_":"ab1d8cd5-576e-4e4c-acb8-3f3d67183de5"}]}]}],"name":"GetFollowOnSlots"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Do some init stuff\ncti.store.currentProfile.refreshingToken  = true;\nwindow.appManager.logEvent('Refreshing auth token', 'debug');\n\ncti.store.variables.apiHeaders.refreshtoken = window.appManager.newHeaderData();\n\n$success();\n"},"_auto_id_":"ff52825e-f9fd-4a00-b7e0-51fd2d0c7f23","actions":[{"event":"success","type":"call-offline-api","data":{"name":"AccuServOffline","operation":"refreshtoken","params":{"messageid":"{{$store.variables.apiHeaders.refreshtoken.messageid}}","messagedate":"{{$store.variables.apiHeaders.refreshtoken.messagedate}}","applicationkey":"{{$store.variables.apiHeaders.refreshtoken.applicationkey}}","authtoken":"{{$store.variables.apiHeaders.refreshtoken.authtoken}}"}},"_auto_id_":"144879f8-c13a-4bb4-a969-4d58286c2897","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/*\n\tExample legit response:\n    {\n      \"errorCode\": 0,\n      \"errorDesc\": \"\",\n      \"token\": \"A6BE4685-BAD2-4E80-BBB8-5AB37FF459C3\",\n      \"expiresIn\": 3600,\n      \"messageid\": \"34\"\n    }\n\n*/\nvar response = cti.store.offlineApi.AccuServOffline.refreshtoken;\nif (response.errorCode == 0) {\n  // Update the token - the function will take care of everything\n  cti.fnUpdateAuthToken(response.token, response.expiresIn);\n}\nelse {\n  window.appManager.logEvent('Failure to refresh auth token: ' + response.errorDesc, 'warning');\n\tcti.store.currentProfile.refreshingToken  = false;\n}\n\n\n"},"_auto_id_":"9b60b432-8925-4705-8843-8481bfe73047","actions":[]},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"// Typically a transport level failure or timeout\nwindow.appManager.logEvent('Failure to refresh auth token (API call failed)', 'warning');\ncti.store.currentProfile.refreshingToken  = false;\n"},"_auto_id_":"506bad22-ca4e-4c99-8aab-66d25450fed5"}]}]}],"name":"RefreshToken"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"var jobCollectionType = cti.store.variables.jobCollectionType;\nvar selectedJob = cti.store.jobs.selectedJob;\n\n// Fetch the jobDataCollectionHeaders to supply to the jobDataCollection request\ncti.store.variables.jobDataCollectionHeaders = window.appManager.newHeaderData();\n\n// Check the jobCollectionType to see what type of payload we need to package\nif(jobCollectionType === \"warnings\") {\n  cti.store.payloads.jobDataCollectionPayload = {\n    \"sCollectionName\": \"WarningsRead\",\n    \"dtCollectionDateTime\": moment().format(),\n    \"aAccuServJobID\": {\n      \"sJobNo\": selectedJob.aAccuServJobID.sJobNo,\n      \"iEventNo\": selectedJob.aAccuServJobID.iEventNo,\n      \"iJobEventNoKey\": selectedJob.aAccuServJobID.iJobEventNoKey,\n      \"sSchedulerID\": selectedJob.aAccuServJobID.sSchedulerID,\n      \"sOriginatorID\": selectedJob.aAccuServJobID.sOriginatorID\n    },\n    \"tPairs\": {\n      \"asKeys\": [\n        \"WarningsRead\"\n      ],\n      \"asValues\": [\n        \"Y\"\n      ]\n    }\n  };\n    \n  $success();\n} else if(jobCollectionType === \"riskassessment\") {\n  var riskAssessment = cti.store.payloads.riskAssessmentPayload;\n  \n  cti.store.payloads.jobDataCollectionPayload = {\n    \"sCollectionName\": \"RiskAssessment\",\n    \"dtCollectionDateTime\": moment().format(),\n    \"aAccuServJobID\": {\n      \"sJobNo\": selectedJob.aAccuServJobID.sJobNo,\n      \"iEventNo\": selectedJob.aAccuServJobID.iEventNo,\n      \"iJobEventNoKey\": selectedJob.aAccuServJobID.iJobEventNoKey,\n      \"sSchedulerID\": selectedJob.aAccuServJobID.sSchedulerID,\n      \"sOriginatorID\": selectedJob.aAccuServJobID.sOriginatorID\n    },\n    \"tPairs\": {\n      \"asKeys\": [\n        \"Q1\",\n        \"Q2\",\n        \"Q3\",\n        \"Q4\",\n        \"Q5\",\n        \"Q6\",\n        \"Q7\",\n        \"Q8\"\n      ],\n      \"asValues\": [\n        riskAssessment.questionOne,\n        riskAssessment.questionTwo,\n        riskAssessment.questionThree,\n        riskAssessment.questionFour,\n        riskAssessment.questionFive,\n        riskAssessment.questionSix,\n        riskAssessment.questionSeven,\n        riskAssessment.questionEight\n      ]\n    }\n  };\n    \n  $success();\n} else if(jobCollectionType === \"initialvisit\") {\n  cti.store.payloads.jobDataCollectionPayload = {\n    \"sCollectionName\": \"InitialVisitAssessment\",\n    \"dtCollectionDateTime\": moment().format(),\n    \"aAccuServJobID\": {\n      \"sJobNo\": selectedJob.aAccuServJobID.sJobNo,\n      \"iEventNo\": selectedJob.aAccuServJobID.iEventNo,\n      \"iJobEventNoKey\": selectedJob.aAccuServJobID.iJobEventNoKey,\n      \"sSchedulerID\": selectedJob.aAccuServJobID.sSchedulerID,\n      \"sOriginatorID\": selectedJob.aAccuServJobID.sOriginatorID\n    },\n    \"tPairs\": {\n      \"asKeys\": [\n        \"EstimatedTime\",\n        \"OperativeComment\"\n      ],\n      \"asValues\": [\n        selectedJob.iJobStartWorkEst,\n        cti.store.pages.StartingWork.workDescription\n      ]\n    }\n  };\n    \n  $success();\n} else if(jobCollectionType === \"tenantphoto\") {\n  cti.store.payloads.jobDataCollectionPayload = {\n    \"sCollectionName\": \"TenantPhotoConsent\",\n    \"dtCollectionDateTime\": moment().format(),\n    \"aAccuServJobID\": {\n      \"sJobNo\": selectedJob.aAccuServJobID.sJobNo,\n      \"iEventNo\": selectedJob.aAccuServJobID.iEventNo,\n      \"iJobEventNoKey\": selectedJob.aAccuServJobID.iJobEventNoKey,\n      \"sSchedulerID\": selectedJob.aAccuServJobID.sSchedulerID,\n      \"sOriginatorID\": selectedJob.aAccuServJobID.sOriginatorID\n    },\n    \"tPairs\": {\n      \"asKeys\": [\n        \"TenantPhotoConsent\",\n        \"TenantPhotoComment\"\n      ],\n      \"asValues\": [\n        selectedJob.bWorkPhoto,\n        selectedJob.bWorkPhotoComment\n      ]\n    }\n  };\n    \n  $success();\n}"},"_auto_id_":"b23a7e6f-e4c0-4862-918c-fc192fa00a1f","actions":[{"event":"success","type":"call-offline-api","data":{"name":"AccuServOffline","operation":"jobdatacollection","params":{"data":"{{$store.payloads.jobDataCollectionPayload}}","messageid":"{{$store.variables.jobDataCollectionHeaders.messageid}}","messagedate":"{{$store.variables.jobDataCollectionHeaders.messagedate}}","authtoken":"{{$store.variables.jobDataCollectionHeaders.authtoken}}","applicationkey":"{{$store.schema.metadata.applicationkey}}"}},"_auto_id_":"b8c6575f-c6c6-40db-abf5-df3afcfcdda8","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"/* jobdatacollection endpoint returns\n  {\n    \"bSuccess\": boolean,\n    \"sStatus\": string,\n    \"messageid\": string\n  }\n*/\n\nvar resp = cti.store.offlineApi.AccuServOffline.jobdatacollection;\nvar jobCollectionType = cti.store.variables.jobCollectionType;\n  \nif(resp.bSuccess) {\n  if(jobCollectionType === \"warnings\") {\n    cti.store.jobs.selectedJob.aPropertyDetail.aPropertyWarningsDataCollection = true;\n  }\n} else {\n  if(jobCollectionType === \"warnings\") {\n    cti.store.jobs.selectedJob.aPropertyDetail.aPropertyWarningsDataCollection = false;\n  }\n}\n\ndelete cti.store.variables.jobDataCollectionHeaders;\ndelete cti.store.variables.jobCollectionType;\ndelete cti.store.payloads.jobDataCollectionPayload;"},"_auto_id_":"bab35c28-1475-48fb-989c-23a765cfbffa"},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"/* jobdatacollection endpoint returns\n  {\n    \"bSuccess\": boolean,\n    \"sStatus\": string,\n    \"messageid\": string\n  }\n*/\n\nvar resp = cti.store.offlineApi.AccuServOffline.jobdatacollection;\n\ndelete cti.store.variables.jobDataCollectionHeaders;\ndelete cti.store.variables.jobCollectionType;\ndelete cti.store.payloads.jobDataCollectionPayload;"},"_auto_id_":"35b69b14-f4ee-49e3-863c-e95b78985745"}]}]}],"name":"JobDataCollection"},{"content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Fetch the jobCompleteHeaders to supply to the jobDataCollection request\ncti.store.variables.jobCompleteHeaders = window.appManager.newHeaderData();\ndebugger;\ncti.store.payloads.jobComplete == undefined;\nvar jobDetail = cti.store.jobs.selectedJob;\n\nif(jobDetail.aItemGroups == undefined) { jobDetail.aItemGroups = []; }\n\nfor(var i in jobDetail.aItemGroups) { \n  delete jobDetail.aItemGroups[i].$index;\n}\n\nif(jobDetail.aVanStock == undefined) jobDetail.aVanStock = [];\n\nfor(var i in jobDetail.aVanStock) { \n  delete jobDetail.aVanStock[i].$index;\n  delete jobDetail.aVanStock[i].sLocation;\n}\n\nvar jobCompleteObject = {\n  \"bSuccess\" : jobDetail.bSuccess,\n  \"sStatus\" : jobDetail.sStatus,\n  \"sResultSummary\" : jobDetail.sResultSummary,\n  \"sResultSummarySubReason\" : jobDetail.sResultSummary,\n  \"sResultDetail\" : jobDetail.sResultDetail,\n  \"dtArrivedOnDateTime\" : jobDetail.dtJobTravelEndedDateTime,\n  \"dArrivedOnDate\" : moment(jobDetail.dtJobTravelEndedDateTime).format('DD-MM-YYYY'),\n  \"iArrivedOnHrs\" : parseInt(jobDetail.iJobEndedTravelHrs),\n  \"iArrivedOnMins\" : parseInt(jobDetail.iJobEndedTravelMins),\n  \"dtFinishedOnDateTime\" : moment().format(),\n  \"dFinishedOnDate\" : moment().format('DD-MM-YYYY'),\n  \"iFinishedOnHrs\" : parseInt(moment().format(\"hh\")),\n  \"iFinishedOnMins\" : parseInt(moment().format(\"mm\")),\n  \"dtJobTargetDateTime\" : jobDetail.dtJobTargetDateTime,\n  \"dJobTargetDate\" : jobDetail.dJobTargetDate,\n  \"iJobTargetHrs\" : parseInt(jobDetail.iJobTargetHrs),\n  \"iJobTargetMins\" : parseInt(jobDetail.iJobTargetMins),\n  \"aAccuServJobID\" : {\n    \"sJobNo\": jobDetail.aAccuServJobID.sJobNo,\n    \"iEventNo\": jobDetail.aAccuServJobID.iEventNo,\n    \"iJobEventNoKey\": jobDetail.aAccuServJobID.iJobEventNoKey,\n    \"sSchedulerID\": jobDetail.aAccuServJobID.sSchedulerID,\n    \"sOriginatorID\": jobDetail.aAccuServJobID.sOriginatorID\n  },\n  \"aOperativeDetail\" : {\n    \"sOperativeID\" : jobDetail.aOperativeDetail.sOperativeID,\n    \"sOperativeName\" : jobDetail.aOperativeDetail.sOperativeName\n  },\n  \"aItemGroups\" : jobDetail.aItemGroups,\n  \"aStockItemsUsed\" : jobDetail.aVanStock,\n  \"aJobAdditionalDetail\" : jobDetail.aJobAdditionalDetail\n};\n\ncti.store.payloads.jobComplete = jobCompleteObject;\n\n$success();"},"_auto_id_":"8f4725b1-e742-4dd2-9c17-e1c2fa3a3567","actions":[{"event":"success","type":"call-offline-api","data":{"name":"AccuServOffline","operation":"jobcompletion","params":{"messageid":"{{$store.variables.jobCompleteHeaders.messageid}}","messagedate":"{{$store.variables.jobCompleteHeaders.messagedate}}","authtoken":"{{$store.variables.jobCompleteHeaders.authtoken}}","applicationkey":"{{$store.variables.jobCompleteHeaders.applicationkey}}","data":"{{$store.payloads.jobComplete}}"}},"_auto_id_":"37f89b20-e9cb-4d57-be94-f15772047e1a","actions":[{"event":"success","type":"inline-function","data":{"sync":true,"code":"debugger;\n\nvar resp = cti.store.offlineApi.AccuServOffline.jobcompletion;\n\nif(resp.bSuccess) {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\" : \"app_jobcomplete\",\n      \"item-type\" : \"app-notification\",\n      \"style\" : \"info\",\n      \"title\" : \"Job Complete\",\n      \"text\" : \"You have completed the following job: Job No. \" + cti.store.jobs.selectedJob.aAccuServJobID.sJobNo\n    }\n  );\n} else {\n  var jobFailed = JSON.parse(JSON.stringify(cti.store.payloads.jobComplete));\n  \n  if(cti.store.jobs.failedJobs == undefined) cti.store.jobs.failedJobs = [];\n  \n  cti.store.jobs.failedJobs.push(jobFailed);\n}\n\ndelete cti.store.payloads.jobComplete;\ndelete cti.store.variables.jobCompleteHeaders;\n  \ncti.fnClearJobData('JobList');"},"_auto_id_":"e06d43fa-c4c2-44b6-a1ca-4c8f03d42481","actions":[]},{"event":"fail","type":"inline-function","data":{"sync":true,"code":"debugger;\nvar jobFailed = JSON.parse(JSON.stringify(cti.store.payloads.jobComplete));\n\nif(cti.store.jobs.failedJobs == undefined) cti.store.jobs.failedJobs = [];\n\ncti.store.jobs.failedJobs.push(jobFailed);\n\ndelete cti.store.variables.jobCompleteHeaders;\ndelete cti.store.payloads.jobComplete;\n\ncti.fnClearJobData('JobList');"},"_auto_id_":"2be126dd-1848-4cc3-8490-cf744c4981fd"}]}]}],"name":"JobCompleteEvent"}],"dataflows":[],"config":[{"name":"Moment","type":"scripting","item-type":"js-asset","_auto_id_":"71d0d5ba-66f3-4f18-92d7-8dccfe84a1ba","fileName":"moment.js"},{"name":"jsAppManager","type":"scripting","item-type":"js-asset","_auto_id_":"72b58305-d80b-4bc9-8742-5e21e266b5b2","fileName":"appManager.js"},{"name":"cssMain","type":"style","item-type":"css","_auto_id_":"100b2d38-f561-4781-9daa-6e380e66b65f","content":"section.scrollable-item {\n    overflow-y: auto;\n}\n.md-list .scrollable {\n    overflow-y: hidden;\n}\n\n.h3-header { \n  text-align: center; \n}\n\n.p-text { \n  text-align: center; \n}\n\n.btn.disabled, .btn[disabled], fieldset[disabled] .btn {\n  pointer-events: none;\n  cursor: not-allowed;\n  filter: alpha(opacity=25);\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  opacity: 0.25;\n  color: black;\n}\n.required-asterix.fa-star { \n  color: transparent; \n}\n\n.fa-circle-o:before, .fa-dot-circle-o:before { \n  padding-right: 2vw; \n}\n\n.has-success .form-control {\n  border-color: #8E8A87!important;\n}\n\n.flexbox-container .navbar-default.row-item:last-child { \n  background-color: #fff; \n}\n\n.form-group.item-date .input-group-addon, .form-group.item-time .input-group-addon { \n  background-color: #dc4f10!important; \n}\n\n.md-checkbox { \n  font-size:1.4em; \n}\n\ndiv.cb-bias-last > div > div > div:first-child div.md-checkbox,\ndiv.cb-bias-first > div > div > div:nth-child(2) div.md-checkbox { \n  color:green !important; \n}\n\ndiv.cb-bias-first > div > div > div:first-child div.md-checkbox,\ndiv.cb-bias-last > div > div > div:nth-child(2) div.md-checkbox { \n  color:red !important; \n}\n\n.form-input-error { \n  color: #fff; \n}\n\n#toast-container { \n  position: fixed; z-index: 999999; margin-top: 200px; \n}\n\n#toast-container>div { \n  width: 94vw!important; margin-left: 4vw; \n}\n\n.container, .container-fluid {\n  font-size: 12pt!important;\n  padding-right: 0px;\n  padding-left: 0px;\n  margin-right: 14px;\n}\n\n.signature-frame .canvas-frame { \n  width: 330px; \n  border: 2px dotted #0072C6; \n}\n\n.completeheader { \n  text-align: center; \n  color: #228B22; \n}\n\n.abandonheader { \n  text-align: center; \n  color: #ff0000; \n}\n\n.check-fail-header { \n  text-align: center; \n  color: #ff0000; \n}\n\n.complete { \n  color: #228B22; \n}\n\n.has-error .control-label { \n  color: #000; \n}\n\n/* Generic list styling */\n\nul {\n  list-style:none;\n  padding:0;\n}\n.list-item-container {\n  width: 100%;\n  min-height:30px;\n}\n.list-item-head {\n  width:98%;\n}\n.list-item-head span {\n  /*font-size:0.8em;*/\n  font-style: italic;\n  font-variant: small-caps;\n  float:right;\n}\n.list-item-detail {\n  font-size:0.8em;\n  color:darkgrey;\n}\n\n.read-more {\n  margin-top: 5px;\n  color: #0072C6;\n  font-weight: bold;\n}\n\n/* Log display */\n.log-error {\n  color:red;\n}\n.log-warning {\n  color:orange;\n}\n.log-debug {\n  color:gray;\n}"},{"name":"cssButtons","type":"style","item-type":"css","_auto_id_":"518059d5-28a5-45f5-84b0-875b88e37ba5","content":".abandon-bar-btn, .abandon-bar-btn[disabled] {\n  background-color: #0072C6!important;\n  color: #fff!important;\n  width: 40vw;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n}\n.button-bar-btn, .button-bar-btn[disabled] {\n  background-color: #dc4f10!important;\n  color: #fff!important;\n  width: 40vw;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n}\n.confirm-bar-btn {\n  background-color: #0072C6!important;\n  color: #fff!important;\n  width: 40vw;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n}\n.login-button {\n  background-color: #dc4f10!important;\n  color: #fff!important;\n  width: 300px;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n  margin-bottom: 20px;\n  margin-top: 20px;\n}\n.travel-btn {\n  display: inline-block;\n  background-color: #0072C6!important;\n  color: #fff!important;\n  margin-bottom: 3vh;\n  width: 250px;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n}\n.getmethere-btn {\n  color: #fff!important;\n  background-color: #0072C6!important;\n  margin-bottom: 5vh;\n  width: 200px;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n}\n.takephoto-btn {\n  color: #fff!important;\n  background-color: #0072C6!important;\n  margin-bottom: 15px;\n  width: 200px;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n}\n.selecttime-btn, .selecttime-btn[disabled] {\n  color: #fff!important;\n  background-color: #0072C6!important;\n  margin-bottom: 20px;\n  width: 200px;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n}\n.bookappointment-btn {\n  color: #fff!important;\n  background-color: #0072C6!important;\n  width: 300px;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n}\n.fetchtime-btn {\n  color: #fff!important;\n  background-color: #228B22!important;\n  margin-bottom: 20px;\n  width: 200px;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n}"},{"name":"cssJobMap","type":"style","item-type":"css","_auto_id_":"7259638b-f10f-4155-beae-57db416fa6bc","content":"#map {\n  position: absolute;\n  left: 0;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n#JobMap section#scrollable {\n    position: absolute;\n    top: 520px;\n    width: 100vw;\n    /* height: 32vh; */\n    padding: 0;\n}\n\n#JobMap section#staticMap {\n    position: absolute;\n    left: 5vw;\n    top: 100px;\n    height: 400px;\n    width: 90vw;\n    padding: 0;\n}\n\n#JobMap section#scrollable div.scrollable {\n  margin: 0;\n  overflow-y: auto !important;\n}"},{"name":"cssFontAwesomeOverrides","type":"style","item-type":"css","_auto_id_":"38e67769-3928-4b44-9449-f1ba6f1f9603","content":"/* Vehicle Checks */\n.supervisor:before { content: \"\\f095\"; font-size: 30pt; }\n\n/* Jobs List */\n.high:before { content: \"\\f071\"; font-size: 20pt; }\n.med:before { content: \"\\f071\"; font-size: 20pt; }\n.low:before { content: \"\\f071\"; font-size: 20pt; }\n\n/* Tenant Details */\n.home:before { content: \"\\f095\"; font-size: 30pt; }\n.mobile:before { content: \"\\f10b\"; font-size: 32pt; }\n.booked:before { content: \"\\f271\"; font-size: 30pt; }\n\n/* Warnings */\n.DISABILITY:before { content: \"\\f007\"; font-size: 20pt; }\n.ASBESTOS:before { content: \"\\f015\"; font-size: 20pt; }\n.checked-warning:before { content: \"\\f046\"; font-size: 20pt; }\n.unchecked-warning:before { content: \"\\f096\"; font-size: 20pt; }\n\n/* Start Travel */\n.getmethere:before { content: \"\\f018\"; font-size: 50pt; }\n.started-ticked:before { content: \"\\f087\"; font-size: 35pt; }\n\n/* Arrived On Site */\n.checked-lone:before { content: \"\\f046\"; font-size: 15pt; }\n.unchecked-lone:before { content: \"\\f096\"; font-size: 15pt; }\n.arrived-ticked:before { content: \"\\f087\"; font-size: 35pt; }\n\n/* Risk Assessment */\n.racomplete:before { content: \"\\f087\"; font-size: 35pt; }\n.raabandon:before { content: \"\\f05e\"; font-size: 35pt; }\n\n/* Start Job */\n.startjob:before { content: \"\\f0ad\"; font-size: 35pt; }\n.complete:before { content: \"\\f087\"; font-size: 35pt; }\n\n/* SOR Code Selection */\n.required-sorcode:before { content: \"\\f071\"; font-size: 20pt; }\n.added-sorcode:before { content: \"\\f087\"; font-size: 20pt; }"},{"name":"cssSpinner","type":"style","item-type":"css","_auto_id_":"5b9f0752-6c62-4cfb-8897-22c19029a39c","content":"load-spinner {\n    display:block;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.7);\n    z-index:10000;\n    display: none;\n}\n    load-spinner.active {\n        display: block !important;\n    }\n\n/*\n#dc4f10\n*/\nload-spinner .spinner {\n    height:40px;\n    width:40px;\n    top:20%;\n    margin:auto;\n    animation: rotation 1.2s infinite linear;\n    border-left:6px solid rgba(255,255,255,.8);\n    border-right:6px solid rgba(255,255,255,.8);\n    border-bottom:6px solid rgba(255,255,255,.8);\n    border-top:6px solid rgba(220,79,16,.8);\n    border-radius:100%;\n}    \nload-spinner .header {\n    height:25%;\n}\nload-spinner .loading-message {\n    padding:10px 20px;\n    text-align:center;\n    font-size:20px;\n    color:white;\n}\n@keyframes rotation {\n    from {transform: rotate(0deg);}\n    to {transform: rotate(359deg);}\n}"},{"name":"cssContextMenu","type":"style","item-type":"css","_auto_id_":"1acd7998-b866-4ec1-82f2-eed702867abb","content":".context-menu {\n  display:inline-block;\n  width: 90vw;\n  padding-top: 2vh;\n}\n\n#title_bar.navbar-default {\n  background-color: #fff !important; \n  background: url('user-assets/logo.png') no-repeat;\n  max-height: 80px!important;\n  background-size: contain;\n  flex: inherit;\n  border-bottom: 1px solid #dc4f10;\n}\n\n#title_bar.navbar-default md-content[item-type=\"html\"] {\n  width:100%;\n  text-indent:60px;\n  font-size:16pt;\n  margin-top:8pt;\n  color: #dc4f10;  \n}\n\n.header-button {\n  color:#dc4f10 !important;\n  background-color: #fff !important;\n  margin-right:6px;\n  margin-top:6px;\n  border: none;\n}\n.header-button .fa {\n  font-size: 32px !important;\n}\n\n.title {\n  line-height: 16px;\n  padding-left: 12px;\n}\n\n.contextMenuBG {\n    position: absolute;\n    width: 100vw;\n    height: 100vh;\n    top: 0;\n    left: 0;\n    background-color: rgba(0, 0, 0, 0.3);\n    z-index: 999\n}\ncontext-menu .contextMenuBG .contextMenu {\n    position: absolute;\n    width: 60vw;\n    height: 100vh;\n    top: 0;\n    right: -60vw;\n    background-color: rgba(0, 0, 0, 0.6);\n    z-index: 1000;\n    -webkit-animation: slide .5s forwards\n}\n@-webkit-keyframes slide {\n    100% {\n        right: 0\n    }\n}\n@keyframes slide {\n    100% {\n        right: 0\n    }\n}\ncontext-menu .contextMenuBG .contextMenu div {\n    margin: 0;\n    border-bottom: 1px solid white\n}\ncontext-menu .contextMenuBG .contextMenu div a,\ncontext-menu .contextMenuBG .contextMenu div a:hover {\n    color: white !important;\n    border: none;\n    background-color: transparent !important;\n    width: 100%;\n    padding: 3vh 0;\n    text-align: left;\n    margin-left: 3vw\n}\ncontext-menu .contextMenuBG .contextMenu div a span span:before {\n    margin-right: 3vw;\n    width: 8vw;\n    display: inline-block;\n    text-align: center\n}\ncontext-menu[popup=\"true\"] .contextMenuBG {\n    background-color: transparent\n}\ncontext-menu[popup=\"true\"] .contextMenu {\n    position: absolute;\n    z-index: 1000;\n    background-color: white;\n    border: 1px solid #d3d3d3;\n    height: initial;\n    -webkit-animation: none\n}\ncontext-menu[popup=\"true\"] .contextMenuBG .contextMenu div {\n    border-top: 1px solid #d3d3d3\n}\ncontext-menu[popup=\"true\"] .contextMenuBG .contextMenu div:first-child {\n    border-top: none\n}\ncontext-menu[popup=\"true\"] .contextMenuBG .contextMenu div a,\ncontext-menu[popup=\"true\"] .contextMenuBG .contextMenu div a:hover {\n    color: black !important;\n    margin-left: 0;\n    text-align: center;\n    padding: 2vh 0\n}\n\ncontext-menu .btn .fa { padding-right: 1vw; }\n\n#btnLogout  {\n  position: fixed;\n  bottom: 0;\n  border-top: 1px solid #fff;\n  margin: 0;\n  padding-left: 0px;\n  border-bottom: none!important;\n}\n\n#btnLogout > .btn .fa {\n  margin-left: 3vw!important;\n}"},{"name":"cssPhotoManager","type":"style","item-type":"css","_auto_id_":"64653dcc-00b1-4658-b698-345da36bb175","content":"#photoArea {\n  margin: 8px 4px;\n  min-height:20px;\n}\n\n.photo-row {\n  min-height:120px;\n  float:none;\n  border: 1px solid silver;\n  margin-top: 6px;\n}\n.photo-row div {\n  \n}\n.photo-container {\n  width:30%;\n  max-width:160px;\n  text-align:center;\n  display:inline-block;\n  padding:2px;\n}\n.photo-container > img {\n  width:100%;\n  height:auto;\n}\n.photo-info-container {\n  width:65%;\n  max-width:75%;\n  float:right;\n}\n.photo-actions {\n  float:right;\n  width: 120px;\n  text-align:center;\n}"},{"name":"cssLogin","type":"style","item-type":"css","_auto_id_":"e851d967-8e33-4c75-862b-7802703a03a6","content":"#Login .credentials-input { text-align: center; }\n#Login .form-input-error { color: transparent; }\n#Login .form-control { border: none; border-bottom: 1px solid black; text-align: center; }\n#Login .flexbox-container .navbar-default { background-color: #fff; }\n\n.app-title {\n  padding:8px;\n  text-align:center;\n  width:100%;\n}\n.version {\n  display:block;\n  font-size:0.7em;\n  color:grey;\n}\n.header-image {\n  padding-top: 10vh;\n  padding-bottom: 10vh;\n  text-align: center;\n  padding-right: 6vw;\n}"},{"name":"cssVehicleChecks","type":"style","item-type":"css","_auto_id_":"30e14c82-7179-42e7-82b5-603856c4d199","content":"#VehicleChecks .has-success .checkbox, .has-success .checkbox-inline, .has-success .control-label, .has-success .help-block, .has-success .radio, .has-success .radio-inline, .has-success.checkbox label, .has-success.checkbox-inline label, .has-success.radio label, .has-success.radio-inline label {\n    color: #000000;\n}\n#VehicleChecks .form-input-error { color: transparent; }\n\n.supervisor { color: #ff0000; padding-top: 3vh; }"},{"name":"cssJobsList","type":"style","item-type":"css","_auto_id_":"c1fd40e4-e3cf-4166-9ecb-7c75d59bd160","content":".info { display: inline-block; width: 100%; padding-top: 30px; }\n.details { display: inline-block; width: 100%; }\n.floatright { display: inline-block; float: right; }\n.description { display: inline-block; font-weight: bold; max-width: 75%; }\n.address { display: inline-block; max-width: 75%; }\n\n#list_joblist .list-group-item { padding: 20px 0px; margin-bottom: 0px; border-bottom: 1px solid #ddd!important; border: none; }\n\n.high {\n  color: #ff0000;\n  display: inline-block;\n  float: right;\n}\n.med {\n  color: #FFC200;\n  display: inline-block;\n  float: right;\n}\n.low {\n  color: #008000;\n  display: inline-block;\n  float: right;\n}"},{"name":"cssTenantDetails","type":"style","item-type":"css","_auto_id_":"0d7beccf-aa0f-4700-a819-c5876b3d12dc","content":"#TenantDetails .form-input-error { color: transparent; }\n#TenantDetails .form-group.item-date .input-group, .form-group.item-time .input-group {padding-top: 4vh;}\n#TenantDetails .form-control {text-align: left;}\n#TenantDetails .form-group.item-date .form-control, .form-group.item-time .form-control {border: none;}\n#TenantDetails .checkbox-element { margin: 0px 0 0;  padding: 5px 13px; }\n#TenantDetails .md-checkbox-container { text-align: left; }\n#TenantDetails .md-checkbox { padding: 0px 0px 0px 0px; }\n#TenantDetails .vehiclecheck-reg { padding-top: 5vh; }\n.inlineblock-default { display:inline-block;width: 100%; }\n\n#TenantDetails .container, .container-fluid { \n  padding-right: 0px; \n  padding-left: 0px; \n  margin-right: 0px; \n  margin-left: 0px; \n}\n\n.home {\n  color: #0072C6;\n  display: inline-block;\n  float: left;\n  margin-left: 30px;\n}\n.mobile {\n  color: #0072C6;\n  display: inline-block;\n  margin: 0 auto;\n}\n.booked {\n  color: #0072C6;\n  display: inline-block;\n  float: right;\n  margin-right: 30px;\n}\n\n.home-text {\n  color: #0072C6;\n  display: inline-block;\n  float: left;\n  margin-left: 6px;\n}\n.mobile-text {\n  color: #0072C6;\n  display: inline-block;\n  margin: 0px auto;\n  margin-right: 16px;\n}\n.booked-text {\n  color: #0072C6;\n  display: inline-block;\n  float: right;\n  margin-right: 16px;\n}"},{"name":"cssJobAccessDetails","type":"style","item-type":"css","_auto_id_":"02a3b544-f9fc-4e53-a661-4d290ef117eb","content":"#order_summary textarea.form-control { height: 20vh; }"},{"name":"cssJobHistory","type":"style","item-type":"css","_auto_id_":"f559baad-0d35-4b5c-95b4-a85af1188e55","content":"#JobHistory .content-block { margin-bottom: -17px; }\n\n#JobHistory .list-group-item { padding: 20px 0px; margin-bottom: 0px; border-bottom: 1px solid #ddd!important; border: none; }\n\n.left-list-header {\n  font-weight: bold;\n  display: inline-block;\n  float: left;\n}\n.center-list-header {\n  font-weight: bold;\n  display: inline-block;\n  margin: 0px auto;\n}\n.right-list-header {\n  font-weight: bold;\n  display: inline-block;\n  float: right;\n}"},{"name":"cssWarnings","type":"style","item-type":"css","_auto_id_":"447825a5-52e1-43b4-84df-e1ba11e23314","content":"#Warnings .list-group-item {\n    margin-bottom: 10px;\n    border: 2px solid #dc4f10;\n    border-radius: 35px;\n}\n#Warnings .list-group-item:first-child {\n    margin-bottom: 10px;\n    border: 2px solid #dc4f10;\n    border-radius: 35px;\n}\n#Warnings .list-group-item:last-child {\n    margin-bottom: 10px;\n    border: 2px solid #dc4f10;\n    border-radius: 35px;\n}\n\n.warning-short {\n  display:inline-block;\n  font-weight:bold;\n  margin-bottom: 20px;\n  margin-left: 10px;\n}\n\n.DISABILITY {\n  color: #0072C6;\n  display: inline-block;\n  float: left;\n}\n.ASBESTOS {\n  color: #FFC200;\n  display: inline-block;\n  float: left;\n}\n.checked-warning {\n  color: #228B22;\n  display: inline-block;\n  float: right;\n  padding: 10px;\n}\n.unchecked-warning {\n  color: #ff0000;\n  display: inline-block;\n  float: right;\n  padding:10px;\n}"},{"name":"cssStartTravel","type":"style","item-type":"css","_auto_id_":"a6275093-8d35-4942-bee9-4a61acc71d5a","content":".started-ticked { color: #228B22; }\n.starting { color: #228B22; text-align: center; }\n.getmethere {  color: #0072C6; margin-bottom: 0vh; }"},{"name":"cssArrivedOnSite","type":"style","item-type":"css","_auto_id_":"a38062a0-08c2-44dc-995e-c52ff06b097a","content":".arrived-ticked { color: #228B22; }\n.arriving { color: #228B22; text-align: center; }\n\n.lone-device-warning {\n  display: inline-block;\n  border: 2px solid #dc4f10;\n  border-radius: 35px;\n  width: 325px;\n  line-height: 71px;\n  height: 76px;\n}\n\n.checked-lone {\n  color: #228B22;\n  display: inline-block;\n}\n.unchecked-lone {\n  color: #ff0000;\n  display: inline-block;\n}"},{"name":"cssNoAccess","type":"style","item-type":"css","_auto_id_":"e11b1e36-2f52-4497-a595-c89b58881d41","content":".takephoto-btn {\n  color: #fff!important;\n  background-color: #0072C6;\n  margin-bottom: 5vh;\n  width: 60vw;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n}"},{"name":"cssRiskAssessment","type":"style","item-type":"css","_auto_id_":"39406114-e9cf-47a8-8819-9494fd048b8d","content":".racomplete { color: #228B22; padding-top: 3vh; }\n.raabandon { color: #ff0000; padding-top: 3vh; }"},{"name":"cssStartingWork","type":"style","item-type":"css","_auto_id_":"3ddf2fe4-7d46-411e-9e8e-93852f9f18fa","content":".startjob-btn {\n  color: #fff!important;\n  background-color: #0072C6;\n  width: 60vw;\n  height: 48px;\n  padding-top: 10px;\n  font-size: 1.2em;\n}\n.startjob-btn, .startjob-btn[disabled] {\n  color: #fff!important;\n  background-color: #0072C6;\n}\n\n.startjob { color: #0072C6; }\n\n.job-info-hide { display: none; }\n.job-info {\n  display: inline-block;\n  width: 100%;\n  margin-bottom: 10px;\n  padding: 19px;\n  background-color: lightgray;\n}\n\n.job-info-header {\n  display:inline-block;\n  font-weight:bold;\n  margin-bottom: 20px;\n}"},{"name":"cssFollowOnAppointment","type":"style","item-type":"css","_auto_id_":"1b0c7add-b060-4b9e-9867-97b38434f006","content":".timeslot-item-selected {\n  border: 1px solid #dc4f10;\n  font-weight: bold;\n  border-radius: 30px;\n  margin-left: -10px;\n  padding: 8px;\n}\n\n#FollowOnContinued .list-group-item { padding: 20px 20px; margin-bottom: 0px; border-bottom: 1px solid #ddd!important; border: none; }"},{"name":"cssSORLocationSelect","type":"style","item-type":"css","_auto_id_":"5aaa556c-c651-4ea2-b347-a20dcb16cc1f","content":"#SORLocationSelect  .list-group-item {\n  padding: 10px 10px;\n  margin-bottom: 0px;\n  border: 1px solid #dc4f10;\n  border-radius: 20px;\n  margin-bottom: 10px;\n}\n\n#SORLocationSelect .list-item-container {\n  text-align: center;\n  font-size: 1.4em;\n  display: inline-block;\n  width: 100%;\n}\n\n#SORLocationSelect .list-location {\n  display: inline-block;\n}\n\n.required-sorcode { \n  color: #FFC200;\n  display: inline-block;\n  float: right;\n  padding-top: 3px; \n}\n.added-sorcode { \n  color: #008000;\n  display: inline-block;\n  float: right;\n  padding-top: 3px; \n}"},{"name":"cssSORCodes","type":"style","item-type":"css","_auto_id_":"7aad6527-fa7e-4419-b7ba-a5a4f53b5da2","content":".sor-schedules-panel {\n  width: 100%;\n  display: inline-block;\n  min-height: 30px;\n  padding: 10px 10px;\n  border: 1px solid #dc4f10;\n  border-radius: 20px;\n  margin-bottom: 10px;\n  background: linear-gradient( to right, #dc4f10 0%, #dc4f10 50%, #fff 50%, #fff 100% );\n}\n\n.sor-schedules-schedules {\n  color: #fff;\n  width: 50%;\n  display: inline-block;\n  text-align: center;\n}\n.sor-schedules-search {\n  color: #dc4f10;\n  width: 40%;\n  display: inline-block;\n  text-align: center;\n}\n\n.sor-search-panel {\n  width: 100%;\n  display: inline-block;\n  min-height: 30px;\n  padding: 10px 10px;\n  border: 1px solid #dc4f10;\n  border-radius: 20px;\n  margin-bottom: 10px;\n  background: linear-gradient( to right, #fff 0%, #fff 50%, #dc4f10 50%, #dc4f10 100% );\n}\n\n.sor-search-schedules {\n  color: #dc4f10;\n  width: 50%;\n  display: inline-block;\n  text-align: center;\n}\n.sor-search-search {\n  color: #fff;\n  width: 40%;\n  display: inline-block;\n  text-align: center;\n}\n\n#list_sorsummary .list-group-item {\n    margin-bottom: 10px;\n    border: 2px solid #dc4f10;\n    border-radius: 35px;\n}\n#list_sorsummary .list-group-item:first-child {\n    margin-bottom: 10px;\n    border: 2px solid #dc4f10;\n    border-radius: 35px;\n}\n#list_sorsummary .list-group-item:last-child {\n    margin-bottom: 10px;\n    border: 2px solid #dc4f10;\n    border-radius: 35px;\n}\n\n#list_sorcodes .list-group-item {\n  padding: 10px 20px 20px 20px;\n  margin-bottom: 0px;\n  border-bottom: 1px solid #ddd!important;\n  height: 100px;\n  border: none;\n}\n\n.sor-header { display:inline-block; font-weight:bold; margin-bottom: 20px; padding: 5px; }\n.estimated { color: #0072C6; display: inline-block; float: right; margin-left: 6px; padding: 5px; }\n.qty-text { color: #0072C6; display: inline-block; float: left; margin-left: 30px; }\n.remaining-text { color: #0072C6; display: inline-block; float: right; margin-right: 30px; }\n.minus { color: #0072C6; display: inline-block; }\n.plus { color: #0072C6; display: inline-block; }\n.plus:before { content: \"\\f196\"; font-size: 20pt; }\n.minus:before { content: \"\\f147\"; font-size: 20pt; }\n.qty { color: #0072C6; display: inline-block; width: 30px; text-align: center; font-size: 20pt;}\n.remaining { color: #0072C6;display: inline-block;width: 30px;font-size: 20pt; }\n.qty-block { display: inline-block;float: left;margin-left: 31px; }\n.remaining-block { display: inline-block;float: right;margin-right:  38px; }\n.inlineblock-toggle { text-align:center;width:100%; }\n.inlineblock-outer { display:inline-block;width:100%; }\n.not-available { color: silver!important; }"},{"name":"cssVanLocationSelect","type":"style","item-type":"css","_auto_id_":"a4e53cf5-e511-4dfb-aca9-39c726615a7e","content":"#VanLocationSelect  .list-group-item {\n  padding: 10px 10px;\n  margin-bottom: 0px;\n  border: 1px solid #dc4f10;\n  border-radius: 20px;\n  margin-bottom: 10px;\n}\n\n#VanLocationSelect .list-item-container {\n  text-align: center;\n  font-size: 1.4em;\n  display: inline-block;\n  width: 100%;\n}\n\n#VanLocationSelect .list-location {\n  display: inline-block;\n}\n\n.required-sorcode { \n  color: #FFC200;\n  display: inline-block;\n  float: right;\n  padding-top: 3px; \n}\n.added-sorcode { \n  color: #008000;\n  display: inline-block;\n  float: right;\n  padding-top: 3px; \n}"},{"name":"cssVanStock","type":"style","item-type":"css","_auto_id_":"83bec354-b1c8-4ee9-a90d-03ad0c9e3807","content":"#list_vanstocksummary .list-group-item {\n    margin-bottom: 10px;\n    border: 2px solid #dc4f10;\n    border-radius: 35px;\n}\n#list_vanstocksummary .list-group-item:first-child {\n    margin-bottom: 10px;\n    border: 2px solid #dc4f10;\n    border-radius: 35px;\n}\n#list_vanstocksummary .list-group-item:last-child {\n    margin-bottom: 10px;\n    border: 2px solid #dc4f10;\n    border-radius: 35px;\n}\n\n#list_vanstock .list-group-item {\n  padding: 10px 20px 20px 20px;\n  margin-bottom: 0px;\n  border-bottom: 1px solid #ddd!important;\n  height: 100px;\n  border: none;\n}"},{"name":"cssPauseTask","type":"style","item-type":"css","_auto_id_":"6c68ee14-8ef6-40c9-9d91-b1ef640609ee","content":".pauseicon { \n  text-align: center; \n  color: #dc4f10; \n  font-size: 60pt;\n}\n.pauseheader { \n  text-align: center; \n  color: #dc4f10; \n}"},{"name":"image_asset_mainlogo","type":"style","item-type":"image-asset","_auto_id_":"bf0304c7-2299-4ab9-b749-676442bde2ff","fileName":"accuserv-logo.png"},{"name":"image_asset_thumblogo","type":"style","item-type":"image-asset","_auto_id_":"666fce7f-b8af-4628-b984-a43cc693f90f","fileName":"logo.png"},{"name":"fnProcessErrorAPIConnect","type":"scripting","item-type":"function","_auto_id_":"ecf793bc-1fee-41f9-87d2-302458fe083c","sync":true,"params":[{"name":"actionFriendlyName","description":"What the action was designed to do - eg \"log you in\"","required":true},{"name":"requestFriendlyName","description":"Name of the request to show the user - eg \"Login\"","required":true}],"content":"// Notify operative that the request failed \ncti.utils.callAction(\n  \"show-notification\", {\n    \"name\": \"api_failure_error\",\n    \"title\": requestFriendlyName + \" failed\",\n    \"text\": \"We couldn't reach the AccuServ server to \"+ actionFriendlyName +\". Please contact support\"\n  }\n);\nwindow.appManager.logEvent('Failed to process ' + requestFriendlyName +' request (API connection).', 'warning');\n\n// Close spinner\ncti.fnCloseSpinner();\n\nif (typeof this.$success === \"function\") { this.$success(); }"},{"name":"fnProcessErrorAPIResponse","type":"scripting","item-type":"function","_auto_id_":"0b0e0142-7cfb-4990-b67a-22113964fec4","sync":true,"params":[{"name":"actionFriendlyName","description":"What the request was designed to do - eg \"log you in\"","required":true},{"name":"requestFriendlyName","description":"Name of the request to show the user - eg \"Login\"","required":true}]},{"name":"fnLogout","type":"scripting","item-type":"function","_auto_id_":"84fcd232-2242-447e-bde7-af3e0e4ebe36","sync":true,"params":[],"content":"if(cti.store.variables.lastPage) delete cti.store.variables.lastPage;\nif(cti.store.variables.jobStarted != undefined) delete cti.store.variables.jobStarted;\nif(cti.store.variables.lastJobHistoryPage) delete cti.store.variables.lastJobHistoryPage;\nif(cti.store.variables.lastJobMapPage) delete cti.store.variables.lastJobMapPage;\nif(cti.store.variables.lastSORPage) delete cti.store.variables.lastSORPage;\nif(cti.store.variables.lastVanStockPage) delete cti.store.variables.lastVanStockPage;\nif(cti.store.payloads.startOfDayPayload) delete cti.store.payloads.startOfDayPayload;\nif(cti.store.payloads.jobPayload) delete cti.store.payloads.jobPayload;\nif(cti.store.payloads.riskAssessmentPayload) delete cti.store.payloads.riskAssessmentPayload;\nif(cti.store.jobs.selectedJob) delete cti.store.jobs.selectedJob;\nif(cti.store.jobs.followOnTimeSlots) delete cti.store.jobs.followOnTimeSlots;\nif(cti.store.payloads.timeSlotsPayload) delete cti.store.payloads.timeSlotsPayload;\nif(cti.store.variables.confirmJobComplete) delete cti.store.variables.confirmJobComplete;\nif(cti.store.variables.lastSORSelectPage) delete cti.store.variables.lastSORSelectPage;\nif(cti.store.variables.lastVanSelectPage) delete cti.store.variables.lastVanSelectPage;\nif(cti.store.variables.menuOption) delete cti.store.variables.menuOption;\nif(cti.store.variables.selectedLocation) delete cti.store.variables.selectedLocation;\nif(cti.store.variables.sorCodeJobSearchResults) delete cti.store.variables.sorCodeJobSearchResults;\nif(cti.store.variables.vanStockJobSearchResults) delete cti.store.variables.vanStockJobSearchResults;\nif(cti.store.variables.specialOrder) delete cti.store.variables.specialOrder;\n\nif(cti.store.pages.AccessDetail) cti.utils.destroyPageData('AccessDetail');\nif(cti.store.pages.Completion) cti.utils.destroyPageData('Completion');\nif(cti.store.pages.CustomerSignature) cti.utils.destroyPageData('CustomerSignature');\nif(cti.store.pages.FollowOnAppointment) cti.utils.destroyPageData('FollowOnAppointment');\nif(cti.store.pages.FollowOnContinued) cti.utils.destroyPageData('FollowOnContinued');\nif(cti.store.pages.JobInformation) cti.utils.destroyPageData('JobInformation');\nif(cti.store.pages.PreWorkPhotos) cti.utils.destroyPageData('PreWorkPhotos');\nif(cti.store.pages.JobInformation) cti.utils.destroyPageData('JobInformation');\nif(cti.store.pages.PostWorkPhotos) cti.utils.destroyPageData('PostWorkPhotos');\nif(cti.store.pages.NoAccess) cti.utils.destroyPageData('NoAccess');\nif(cti.store.pages.RiskAssessment) cti.utils.destroyPageData('RiskAssessment');\nif(cti.store.pages.SpecialPurchases) cti.utils.destroyPageData('SpecialPurchases');\nif(cti.store.pages.StartingWork) cti.utils.destroyPageData('StartingWork');\n\n// PW For some reason, profile wasn't being cleared in here. Is now!\ndelete cti.store.currentProfile;\n\ncti.utils.callAction('go-to-page', { \"name\": \"Login\" });\nif (typeof this.$success === \"function\") { this.$success(); }"},{"name":"fnInitialiseModel","type":"scripting","item-type":"function","_auto_id_":"6cb142b5-1862-44c5-9f51-6681f5be66a8","sync":true,"params":[],"content":"if(!cti.store.jobs) {\n  cti.store.jobs = {};\n}\nif(!cti.store.jobs.jobList) {\n  cti.store.jobs.jobList = [];\n}\nif (cti.store.jobs.jobDetails === undefined) {\n  cti.store.jobs.jobDetails = [];\n}\nif(cti.store.jobs.jobLocations == undefined) {\n  cti.store.jobs.jobLocations = [];\n}\nif(cti.store.staticData === undefined) { \n  cti.store.staticData = {}; \n}\nif(cti.store.pages.VehicleChecks == undefined) { \n  cti.store.pages.VehicleChecks = {}; \n}\nif (cti.store.payloads === undefined) {\n  cti.store.payloads = {};\n}\nif(!cti.store.offlineApi) {\n  cti.store.offlineApi = {};\n}\nif(!cti.store.offlineApi.AccuServOffline) {\n  cti.store.offlineApi.AccuServOffline = {};\n}\n\nif (!cti.store.variables.apiHeaders) {\n  cti.store.variables.apiHeaders = {};\n}"},{"name":"fnDataDestroy","type":"scripting","item-type":"function","_auto_id_":"b7e05f74-00e2-4594-82b7-dd128d410322","sync":true,"params":[],"content":"if(cti.store.variables.lastPage) delete cti.store.variables.lastPage;\nif(cti.store.variables.jobStarted != undefined) delete cti.store.variables.jobStarted;\nif(cti.store.variables.lastJobHistoryPage) delete cti.store.variables.lastJobHistoryPage;\nif(cti.store.variables.lastJobMapPage) delete cti.store.variables.lastJobMapPage;\nif(cti.store.variables.lastSORPage) delete cti.store.variables.lastSORPage;\nif(cti.store.variables.lastVanStockPage) delete cti.store.variables.lastVanStockPage;\nif(cti.store.variables.confirmJobComplete) delete cti.store.variables.confirmJobComplete;\nif(cti.store.variables.lastSORSelectPage) delete cti.store.variables.lastSORSelectPage;\nif(cti.store.variables.lastVanSelectPage) delete cti.store.variables.lastVanSelectPage;\nif(cti.store.variables.menuOption) delete cti.store.variables.menuOption;\nif(cti.store.variables.selectedLocation) delete cti.store.variables.selectedLocation;\nif(cti.store.variables.sorCodeJobSearchResults) delete cti.store.variables.sorCodeJobSearchResults;\nif(cti.store.variables.vanStockJobSearchResults) delete cti.store.variables.vanStockJobSearchResults;\nif(cti.store.variables.vanStockSearchResults) delete cti.store.variables.vanStockSearchResults;\nif(cti.store.variables.specialOrder == false ||cti.store.variables.specialOrder == true) delete cti.store.variables.specialOrder;\nif(cti.store.variables.specialPurchase) delete cti.store.variables.specialPurchase;\nif(cti.store.variables.sorCodeSearchResults) delete cti.store.variables.sorCodeSearchResults;\nif(cti.store.variables.jobSummaryLastPage) delete cti.store.variables.jobSummaryLastPage;\nif(cti.store.variables.jobDetailToFetch) delete cti.store.variables.jobDetailToFetch;\n\nif(cti.store.payloads.startOfDayPayload) delete cti.store.payloads.startOfDayPayload;\nif(cti.store.payloads.jobPayload) delete cti.store.payloads.jobPayload;\nif(cti.store.payloads.riskAssessmentPayload) delete cti.store.payloads.riskAssessmentPayload;\nif(cti.store.payloads.timeSlotsPayload) delete cti.store.payloads.timeSlotsPayload;\n\nif(cti.store.jobs.selectedJob) delete cti.store.jobs.selectedJob;\nif(cti.store.jobs.followOnTimeSlots) delete cti.store.jobs.followOnTimeSlots;\nif(cti.store.jobs.locationsVanStock) delete cti.store.jobs.locationsVanStock;\nif(cti.store.jobs.jobSORLocations) delete cti.store.jobs.jobSORLocations;\n\nif(cti.store.pages.AccessDetail) cti.utils.destroyPageData('AccessDetail');\nif(cti.store.pages.Completion) cti.utils.destroyPageData('Completion');\nif(cti.store.pages.CustomerSignature) cti.utils.destroyPageData('CustomerSignature');\nif(cti.store.pages.FollowOnAppointment) cti.utils.destroyPageData('FollowOnAppointment');\nif(cti.store.pages.FollowOnContinued) cti.utils.destroyPageData('FollowOnContinued');\nif(cti.store.pages.JobInformation) cti.utils.destroyPageData('JobInformation');\nif(cti.store.pages.PreWorkPhotos) cti.utils.destroyPageData('PreWorkPhotos');\nif(cti.store.pages.JobInformation) cti.utils.destroyPageData('JobInformation');\nif(cti.store.pages.PostWorkPhotos) cti.utils.destroyPageData('PostWorkPhotos');\nif(cti.store.pages.NoAccess) cti.utils.destroyPageData('NoAccess');\nif(cti.store.pages.RiskAssessment) cti.utils.destroyPageData('RiskAssessment');\nif(cti.store.pages.SpecialPurchases) cti.utils.destroyPageData('SpecialPurchases');\nif(cti.store.pages.StartingWork) cti.utils.destroyPageData('StartingWork');"},{"name":"fnPollingMonitor","type":"scripting","item-type":"function","_auto_id_":"c445cf83-de9f-4ec4-93bd-60dcd0a080b2","sync":true,"params":[],"content":"// Request a new job list if necessary and compare against present stuff."},{"name":"fnAuthCheckMonitor","type":"scripting","item-type":"function","_auto_id_":"430e91f3-346b-4eb6-b417-b80797c48e09","sync":true,"params":[],"content":"var now = new Date();\nvar onLoginPage = false;\n\n// This function is run every 2 seconds to check the auth status of the user\nif (cti.store.state !== undefined && cti.store.state.currentPage !== undefined) {\n\tvar currentPage = cti.store.state.currentPage;\n    onLoginPage = (currentPage == \"Login\");\n\t// We only need to check things further if we aren't at the login page\n\tif (!onLoginPage) {\n      \tvar tokenExpiry = undefined;\n      \tif (cti.store.currentProfile !== undefined) {\n        \ttokenExpiry = cti.store.currentProfile.expiryTime;\n        }\n    \tif (tokenExpiry !== undefined && tokenExpiry > now) {\n\t\t\t// We appear to be legitimately logged in. Nothing to see here!\n        }\n\t\telse {\n            var lastTokenStatus = (tokenExpiry === undefined) ? '(no token present)' : ('(expired at ' + tokenExpiry.toLocaleTimeString() + ')');\n          \twindow.appManager.logEvent('Attempt to access restricted area whilst not logged in, or the login session has just expired ' + lastTokenStatus, 'warning');\n          \t// Clear down and kick out\n            cti.fnLogout();\n          \treturn false;\n        }\n    }\n}\n\nif (cti.store.currentProfile !== undefined && cti.store.currentProfile.tokenAutoRefreshDue !== undefined && cti.store.currentProfile.refreshingToken == false) {\n  \n  // If we've ticked over the point where we need to look to fetch a new token, kick off that now\n  if (cti.store.currentProfile.tokenAutoRefreshDue < now && !onLoginPage) {\n\tcti.utils.callAction('call-actionflow', { \"name\": \"RefreshToken\" });\n  }\n}\n "},{"name":"fnUpdateAuthToken","type":"scripting","item-type":"function","_auto_id_":"156a22ad-9156-4b01-b745-99343a2a8050","sync":true,"params":[{"name":"newToken","description":"A newly acuquired auth token","required":true},{"name":"expirySeconds","description":"Number of seconds token is valid for","required":true}],"content":"// Overriden to 10 mins so we can actively test\nexpirySeconds = 601;\n\n// Set the flags so nothing should interfere at this point\ncti.store.currentProfile.refreshingToken = true;\ncti.store.currentProfile.tokenAutoRefreshDue = undefined;\n\n// No variable ttl support sadly, assign this to same value as TTL used by offline refreshtoken operation\nvar ttlUsedByAPICall = 5;\n\n// Log the time our token expires so we can monitor against it\nvar tokenExpiry = new Date();\ntokenExpiry.setSeconds(tokenExpiry.getSeconds() + expirySeconds);\n\nif (cti.store.currentProfile.maxLoginDurationExpiry !== undefined) {\n  // Don't trigger auto-refresh if it'll interfere with the session max duration or is not sufficiently greater than TTL for the update operation\n  if (tokenExpiry > cti.store.currentProfile.maxLoginDurationExpiry) {\n    window.appManager.logEvent('New auth token assigned. Session due to end within current token validity.', 'info');\n  }\n  else if (expirySeconds > (ttlUsedByAPICall*2)) {\n    var refreshDueSecondsFromNow = (expirySeconds-(ttlUsedByAPICall*60));\n\n    // Arbitrary reduction in the time we start the request for a new token to account for polling interval etc\n    refreshDueSecondsFromNow = refreshDueSecondsFromNow - 3;\n\n    var refreshTokenTime = new Date();\n    refreshTokenTime.setSeconds(refreshTokenTime.getSeconds() + refreshDueSecondsFromNow);\n\n    cti.store.currentProfile.tokenAutoRefreshDue = refreshTokenTime;\n\n\twindow.appManager.logEvent('New auth token assigned. Expires at: '+ tokenExpiry.toLocaleTimeString() + '; refreshing at: ' + refreshTokenTime.toLocaleTimeString(), 'debug');\n  }\n  else {\n    window.appManager.logEvent('New auth token assigned. Default session too short for auto-refresh.', 'info');\n  }\n}\nelse {\n\twindow.appManager.logEvent('New auth token assigned.', 'debug');\n}\ncti.store.currentProfile.token = newToken;\ncti.store.currentProfile.expiryTime = tokenExpiry;\n// A flag to indicate that we're in the process of fetching a new token (offline call)\n// Don't try and get one if this flag == true\ncti.store.currentProfile.refreshingToken = false;\n"},{"name":"fnUpdateAuthToken_VarTTL","type":"scripting","item-type":"function","_auto_id_":"ab2df04e-e493-4524-a32d-efad1fac06fa","sync":true,"params":[{"name":"newToken","description":"Newly acquired token","required":true},{"name":"expirySeconds","description":"Validity duration of the token in seconds","required":true}],"content":"// Overriden to 10 mins so we can actively test\nexpirySeconds = 300;\n\n// Set the flags so nothing should interfere at this point\ncti.store.currentProfile.refreshingToken = true;\ncti.store.currentProfile.tokenAutoRefreshDue = undefined;\n\n// Default to govern refreshing token starting 8 minutes before expiry as an offline request\n// This gives the offline call 8 minutes grace to succeed and keep us logged in\nvar refreshMinutesBeforeExpiry = 8;\n\n// Log the time our token expires so we can monitor against it\nvar tokenExpiry = new Date();\ntokenExpiry.setSeconds(tokenExpiry.getSeconds() + expirySeconds);\n\n// Don't trigger auto-refresh if it'll interfere with the session max duration\nif (cti.store.currentProfile.maxLoginDurationExpiry === undefined || cti.store.currentProfile.maxLoginDurationExpiry > tokenExpiry) {\n  // Default ttl for refresh request to N minutes (where N is refreshMinutesBeforeExpiry).\n  // If our token duration makes this unfeasible, we'll use 10% of our remaining token\n  // validity period to govern when we should acquire a new\n  // token and thus the ttl for that request (we need the ttl to be reached at time of expiry)\n\n  // Placeholder for number of seconds from now that we need to fire the token fetch request\n  var refreshDueSecondsFromNow = 0;\n\n  // PW NOTE:\n  // This whole block was to deal with ensuring we have an appropriate TTL for the call, commensurate with the duration of the auth token \n  // We don't have programmtic control over the TTL so it's pointless at the mo - we'll just start looking a fixed 5 minutes before token expiry\n  var refreshTokenTimeToLive = refreshMinutesBeforeExpiry;\n  // If our token duration is at 3x our default\n  if (expirySeconds > (60*(refreshMinutesBeforeExpiry*3))) {\n    refreshDueSecondsFromNow = (expirySeconds-(refreshMinutesBeforeExpiry*60));\n  }\n  else {\n    // We'll start trying to get a new token 80% through the life of the existing one\n    refreshDueSecondsFromNow = parseInt(expirySeconds - (expirySeconds / 5));\n    // Update our TTL that we'll use\n    var t = (expirySeconds-refreshDueSecondsFromNow) / 60;\n    // Ensure we've minimum 1 minute to look\n    if (t < 1) { \n      t = 1;\n      refreshDueSecondsFromNow = expirySeconds-60;\n    }\n    refreshTokenTimeToLive = parseInt(t);\n  }\n\n  // Arbitrary reduction in the time we start the request for a new token to account for polling interval etc\n  refreshDueSecondsFromNow = refreshDueSecondsFromNow - 3;\n\n  var refreshTokenTime = new Date();\n  refreshTokenTime.setSeconds(refreshTokenTime.getSeconds() + refreshDueSecondsFromNow);\n  \n  cti.store.currentProfile.tokenAutoRefreshDue = refreshTokenTime;\n  cti.store.currentProfile.tokenRefreshCallTTL = refreshTokenTimeToLive;\n\n  window.appManager.logEvent('Token lives until ' + tokenExpiry.toLocaleString(), 'debug');\n  window.appManager.logEvent('Need to look for new token at ' + refreshTokenTime.toLocaleString(), 'debug');\n}\ncti.store.currentProfile.token = newToken;\ncti.store.currentProfile.expiryTime = tokenExpiry;\n// A flag to indicate that we're in the process of fetching a new token (offline call)\n// Don't try and get one if this flag == true\ncti.store.currentProfile.refreshingToken = false;\n"},{"name":"fnMapExportJobList","type":"scripting","item-type":"function","_auto_id_":"8e53dc87-9ca0-48c2-a7ce-9869f8570197","sync":true,"params":[{"name":"currentJobList","description":"Current job list"}],"content":"var returnedList = { \"jobs\" : [] };\n\nif(currentJobList == undefined) currentJobList = [];\n\nif(currentJobList.length > 0) {\n  for(var i in currentJobList) {\n    var thisJob = currentJobList[i];\n    var obj = { \n      \"aJobID\" : thisJob.aAccuServJobID,\n      \"sStatus\" : thisJob.sStatus,\n      \"aKeyValuePair\" : []\n    }\n    \n    returnedList.jobs.push(obj);\n  }\n}\n\nreturn returnedList;"},{"name":"fnAbandonJob","type":"scripting","item-type":"function","_auto_id_":"9a6e5b84-78b8-40a3-a75f-529a720c37d9","sync":true,"params":[],"actions":[],"content":"// TODO - Abandon Job Workflow\ncti.fnDataDestroy();\n\ncti.utils.callAction('go-to-page', { \"name\": \"JobList\" });"},{"name":"fnNoAccess","type":"scripting","item-type":"function","_auto_id_":"8a40708d-35fc-417e-aefa-875bc08e0e34","sync":true,"params":[],"actions":[],"content":"// TODO - No Access Workflow\ncti.fnDataDestroy();\n\ncti.utils.callAction('go-to-page', { \"name\": \"JobList\" });"},{"name":"fnClearJobData","type":"scripting","item-type":"function","_auto_id_":"59baf385-a0ef-4b10-86aa-55e6bc3cca13","sync":true,"params":[{"name":"page","description":"Page to navigate to"}],"actions":[],"content":"cti.fnDataDestroy();\n\ncti.utils.callAction('go-to-page', { \"name\": page });"},{"name":"fnCloseSpinner","type":"scripting","item-type":"function","_auto_id_":"b35429ff-cfd5-417e-b93d-a2e9a0733803","sync":true,"params":[],"actions":[],"content":"var spinner = document.querySelectorAll('load-spinner');\n\nif(spinner && spinner.length > 0) {\n  spinner[0].close();\n}"},{"name":"fnSelectJob","type":"scripting","item-type":"function","_auto_id_":"ffdbd040-497a-40ec-8371-622d5240f05c","sync":true,"params":[{"name":"jobid","description":"Element id for the job"}],"content":"var jobDetails = cti.store.jobs.jobDetails;\nvar jobFound = false;\n\nfor (var i = 0; i < jobDetails.length; i++) {\n  if (jobid == jobDetails[i].aAccuServJobID.iJobEventNoKey) {\n    var detailObj = JSON.parse(JSON.stringify(jobDetails[i]));\n    cti.store.jobs.selectedJob = detailObj;\n    jobFound = true;\n    break;\n  }\n}\n\nif(jobFound) {\n  cti.utils.callAction('go-to-page', { \"name\": \"TenantDetails\" });\n} else {\n  cti.store.variables.selectedJobId = jobid;\n  cti.utils.callAction('call-actionflow', { \"name\": \"GetJobDetailOnline\" });\n}"},{"name":"fnCallTenant","type":"scripting","item-type":"function","_auto_id_":"1d46d37c-898d-4989-a7e1-fc266d82e25b","sync":true,"params":[{"name":"type"}],"content":"if(type == \"tenanthome\") {\n  window.open('tel:'+cti.store.jobs.selectedJob.aPropertyDetail.sHome_No);\n} else if(type == \"tenantmob\") {\n  window.open('tel:'+cti.store.jobs.selectedJob.aPropertyDetail.sMobile_No);\n} else if(type == \"user\") {\n  window.open('tel:'+cti.store.jobs.selectedJob.aPropertyDetail.sWork_No);\n}"},{"name":"fnCallSupervisor","type":"scripting","item-type":"function","_auto_id_":"a54e9ddf-6034-42e9-94a2-dd315de2c31c","sync":true,"params":[],"content":"window.open('tel:'+cti.store.currentProfile.managerTelephone);"},{"name":"fnBuildPayload","type":"scripting","item-type":"function","_auto_id_":"48c87a75-4cbb-4759-ba9a-3482b5d7a0f9","sync":true,"params":[{"name":"pageName"},{"name":"payloadObject"}],"content":"var schema = cti.store.schema;\n\nfunction getObjects(obj, key, val) {\n    var objects = [];\n    for (var i in obj) {\n          if (!obj.hasOwnProperty(i))\n              continue;\n        if (typeof obj[i] === 'object') {\n            objects = objects.concat(getObjects(obj[i], key, val));\n        }\n        else {\n            if (i == key && obj[i] == val || i == key && val == '') {\n                objects.push(obj);\n            }\n            else if (obj[i] == val && key == '') {\n                if (objects.lastIndexOf(obj) == -1) {\n                    objects.push(obj);\n                }\n            }\n        }\n    }\n    return objects;\n}\n\nfunction sanitiseAnswer(answer) {\n    if (answer === undefined || answer == '') { return undefined; }\n    if (typeof answer === 'object' && answer.hasOwnProperty('value')) {\n      return answer.value;\n    }\n      return answer;\n}\n\nfor (var i = 0; i < schema.pages.length; i++) {\n  if (schema.pages[i].name.toLowerCase() == pageName.toLowerCase()) {    \n    var userInput = getObjects(schema.pages[i].content, 'type', 'user-input');\n    var choice = getObjects(schema.pages[i].content, 'type', 'choice');\n    \n    var questions = userInput.concat(choice);\n    \n    for (var p in questions) {\n      var questionName = questions[p].name;\n      var answer = sanitiseAnswer(cti.store.pages[pageName][questionName]);\n      if (answer !== undefined) {\n        payloadObject[questionName] = answer;\n      }\n    }\n  }\n}"},{"name":"fnPreparePayload","type":"scripting","item-type":"function","_auto_id_":"d6469038-2734-4d9b-ae45-41621703710f","sync":true,"params":[{"name":"pages"}],"content":"var payload = {};\n\nfor(var i in pages) {\n  cti.fnBuildPayload(pages[i], payload);\n}\n\ncti.store.saveActionPayload = payload;"},{"name":"GoogleMapping","type":"integration","item-type":"url","_auto_id_":"8950922d-c921-4891-b2ba-5ca7a7fab017","params":{},"target":"_system","url":"http://maps.google.com/"},{"name":"GoogleMapsAPI","type":"integration","item-type":"api","_auto_id_":"4e2981e5-ec7f-4408-8a45-0bffa5ccb3d8","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"initMap","summary":"initMap","path":"initMap","method":"GET","content-type":"application/json","$open":false}],"url":"https://maps.googleapis.com/maps/api/js?key=AIzaSyBLm-X17nxieJiS66S0wxHqHqDcZ38_Qww&callback"},{"name":"AccuServ","type":"integration","item-type":"api","_auto_id_":"569abf74-343f-410a-a0ec-8fd3a837d933","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"login","summary":"Authentication call","path":"login","method":"POST","content-type":"application/json","$open":false,"params":[{"name":"data","description":"Post payload of username and password","type":"string","typeConfig":{},"in":"body"},{"name":"applicationkey","type":"string","typeConfig":{},"in":"header","description":"App key"},{"name":"messageid","description":"Unique identifies the request","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message date","type":"string","typeConfig":{},"in":"header"}]},{"ttlMinutes":60,"name":"joblist","summary":"Job list","path":"joblist","method":"POST","content-type":"application/json","params":[{"name":"applicationkey","description":"App key","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"},{"name":"messageid","description":"Message ID","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message Date","type":"string","typeConfig":{},"in":"header"},{"name":"data","description":"Current Job List","type":"string","typeConfig":{},"in":"body"}],"$open":false},{"ttlMinutes":60,"name":"jobdetail","summary":"Fetches individual job detail for selected job from job list","path":"jobdetail","method":"POST","content-type":"application/json","params":[{"name":"data","description":"Job ID data payload","type":"string","typeConfig":{},"in":"body"},{"name":"messageid","description":"Unique message id","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message date","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"},{"name":"applicationkey","description":"API key","type":"string","typeConfig":{},"in":"header"}],"$open":true},{"ttlMinutes":60,"name":"initialise","summary":"Fetches vehicle information, stock and manager phone number","path":"initialise","method":"GET","content-type":"application/json","params":[{"name":"messageid","description":"Unique request id","type":"string","typeConfig":{},"in":"header"},{"name":"applicationkey","description":"API key","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Date of the request","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Authentication token","type":"string","typeConfig":{},"in":"header"}],"$open":false},{"ttlMinutes":60,"name":"jobhistory","summary":"Returns specific Job's history","path":"jobhistory","method":"POST","content-type":"application/json","params":[{"name":"data","description":"Data object to send as parameter","type":"string","typeConfig":{},"in":"body"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"},{"name":"applicationkey","description":"App Key","type":"string","typeConfig":{},"in":"header"},{"name":"messageid","description":"Message ID","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message Date","type":"string","typeConfig":{},"in":"header"}],"$open":true},{"ttlMinutes":60,"name":"selectappointments","summary":"Selects a list of appointments for follow on bookings","path":"selectappointments","method":"POST","content-type":"application/json","params":[{"name":"data","description":"Data payload","type":"string","typeConfig":{},"in":"body"}]}],"url":"http://217.78.2.198/AccuServRESTV01/"},{"name":"api_failure_error","type":"notification","item-type":"app-notification","_auto_id_":"a00dff3e-c1be-4578-a028-db36b2261211","options":{"autoDismiss":true,"closeButton":true},"style":"error","actions":[]},{"name":"api_response_error","type":"notification","item-type":"app-notification","_auto_id_":"ef570c53-161e-4d8d-abfe-45c47be48119","options":{"autoDismiss":true,"closeButton":true},"style":"warning","actions":[]},{"name":"AccuServOffline","type":"integration","item-type":"offline-api","_auto_id_":"34baea52-46c2-4e0e-a4ce-f8794894aec5","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"startofday","summary":"Sends back vehicle check data","path":"startofday","method":"POST","content-type":"application/json","params":[{"name":"applicationkey","description":"App key","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"},{"name":"messageid","description":"Unique id of the request","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Date time of the request","type":"string","typeConfig":{},"in":"header"},{"name":"data","description":"Sends the Start of Day checks in a data payload to the server","type":"string","typeConfig":{},"in":"body"}],"$open":false},{"ttlMinutes":60,"name":"sordata","summary":"Fetches SOR codes for the user","path":"sordata","method":"GET","content-type":"application/json","params":[{"name":"applicationkey","description":"App key","type":"string","typeConfig":{},"in":"header"},{"name":"messageid","description":"Message ID","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message date","type":"string","typeConfig":{},"in":"header"}],"$open":false},{"ttlMinutes":60,"name":"vanstock","summary":"Brings back Van Stock data","path":"vanstock","method":"GET","content-type":"application/json","params":[{"name":"applicationkey","description":"App key","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"},{"name":"messageid","description":"Message ID","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message Date","type":"string","typeConfig":{},"in":"header"}],"$open":false},{"ttlMinutes":5,"name":"jobdetail","summary":"jobdetail","path":"jobdetail","method":"POST","content-type":"application/json","params":[{"name":"data","description":"Job ID data payload","type":"string","typeConfig":{},"in":"body"},{"name":"messagedate","description":"Message date","type":"string","typeConfig":{},"in":"header"},{"name":"messageid","description":"Unique id of the message","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"},{"name":"applicationkey","description":"API key","type":"string","typeConfig":{},"in":"header"}],"$open":true},{"ttlMinutes":60,"name":"joblocations","summary":"Fetches locations for van and SOR codes","path":"joblocations","method":"GET","content-type":"application/json","params":[{"name":"messageid","description":"Message ID","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message date","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"},{"name":"applicationkey","description":"App key","type":"string","typeConfig":{},"in":"header"}],"$open":false},{"ttlMinutes":5,"name":"refreshtoken","summary":"Refresh our auth token","path":"refreshtoken","method":"GET","content-type":"application/json","params":[{"name":"messageid","description":"Unique ref","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Date of the message","type":"string","typeConfig":{},"in":"header"},{"name":"applicationkey","description":"API key","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Current token","type":"string","typeConfig":{},"in":"header"}],"$open":false},{"ttlMinutes":60,"name":"tradeslist","summary":"Fetches a list of trades for a job","path":"tradeslist","method":"GET","content-type":"application/json","params":[{"name":"messageid","description":"Message ID","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message Date","type":"string","typeConfig":{},"in":"header"},{"name":"applicationkey","description":"App key","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"}],"$open":false},{"ttlMinutes":60,"name":"problemsummaries","summary":"Fetches a list of problem summaries for a job","path":"problemsummaries","method":"GET","content-type":"application/json","params":[{"name":"messageid","description":"Message ID","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message Date","type":"string","typeConfig":{},"in":"header"},{"name":"applicationkey","description":"App key","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"}],"$open":false},{"ttlMinutes":60,"name":"resultsummaries","summary":"Fetches a list of result summaries for a job","path":"resultsummaries","method":"GET","content-type":"application/json","params":[{"name":"messageid","description":"Message ID","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message date","type":"string","typeConfig":{},"in":"header"},{"name":"applicationkey","description":"App key","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"}],"$open":false},{"ttlMinutes":60,"name":"jobdatacollection","summary":"Sends job data back to the server","path":"jobdatacollection","method":"POST","content-type":"application/json","params":[{"name":"data","description":"Data payload","type":"string","typeConfig":{},"in":"body"},{"name":"messageid","description":"Message ID","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message date","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"},{"name":"applicationkey","description":"App key","type":"string","typeConfig":{},"in":"header"}],"$open":false},{"ttlMinutes":60,"name":"jobcompletion","summary":"Completes current job","path":"jobcompletion","method":"POST","content-type":"application/json","params":[{"name":"messageid","description":"Message id","type":"string","typeConfig":{},"in":"header"},{"name":"messagedate","description":"Message date","type":"string","typeConfig":{},"in":"header"},{"name":"authtoken","description":"Auth token","type":"string","typeConfig":{},"in":"header"},{"name":"applicationkey","description":"App key","type":"string","typeConfig":{},"in":"header"},{"name":"data","description":"Data payload","type":"string","typeConfig":{},"in":"body"}]}],"url":"http://217.78.2.198/AccuServRESTV01/"},{"name":"app_odometer","type":"notification","item-type":"app-notification","_auto_id_":"a61971b9-90c6-46f5-8cd6-c9b4eff916b4","options":{"autoDismiss":true,"closeButton":true},"style":"warning","actions":[]},{"name":"app_nowarnings","type":"notification","item-type":"app-notification","_auto_id_":"37633978-47a4-4048-86ba-fcb6e82d2050","options":{"autoDismiss":true,"closeButton":true},"style":"success","actions":[]},{"name":"fnCheckWarning","type":"scripting","item-type":"function","_auto_id_":"5f203ae3-3021-45e0-ad31-547720fd38ff","sync":true,"params":[{"name":"index"}],"actions":[],"content":"var jobwarnings = cti.store.jobs.selectedJob.aPropertyDetail.aPropertyWarnings;\nvar uncheckedWarnings = true;\n\nif(jobwarnings[index].checked === \"checked-warning\") {\n  jobwarnings[index].checked = \"unchecked-warning\";\n} else {\n  jobwarnings[index].checked = \"checked-warning\";\n}\n\nfor(var i in jobwarnings) {  \n  if(jobwarnings[i].checked === \"unchecked-warning\") {\n    uncheckedWarnings = false;\n  }\n}\n\nif(uncheckedWarnings) {\n  cti.store.jobs.selectedJob.aPropertyDetail.aPropertyWarningsChecked = true;\n} else {\n  cti.store.jobs.selectedJob.aPropertyDetail.aPropertyWarningsChecked = false;\n}\n\ncti.utils.updatePage();"},{"name":"fnNavigateJobSummary","type":"scripting","item-type":"function","_auto_id_":"e7dcbc76-2cc4-4665-8791-28e814b3fbdd","sync":true,"params":[{"name":"lastPage","description":"Page to navigate to"}],"actions":[],"content":"if(cti.store.jobs.selectedJob == undefined) {\n  cti.store.variables.jobStarted = false;\n} else {\n  if(cti.store.jobs.selectedJob.bJobStartWork) {\n    cti.store.variables.jobStarted = true;\n  } else {\n    cti.store.variables.jobStarted = false;\n  }\n}\n\ncti.store.variables.jobSummaryLastPage = lastPage;\ncti.utils.callAction('go-to-page', { \"name\": \"JobSummary\" });"},{"name":"fnNavigateJobHistory","type":"scripting","item-type":"function","_auto_id_":"519777c0-6709-405e-a7c2-c1d37db85393","sync":true,"params":[{"name":"lastPage","description":"Page to navigate to"}],"actions":[],"content":"debugger;\ncti.store.variables.lastJobHistoryPage = lastPage;\nvar jobHistory = cti.store.jobs.jobHistory;\n\nif(cti.store.jobs.selectedJob == undefined) {\n  cti.store.variables.jobStarted = false;\n} else {\n  if(cti.store.jobs.selectedJob.bJobStartWork) {\n    cti.store.variables.jobStarted = true;\n  } else {\n    cti.store.variables.jobStarted = false;\n  }\n}\n\nif(jobHistory != undefined) {\n  if(jobHistory.length > 0) {\n    cti.utils.callAction('go-to-page', { \"name\": \"JobHistory\" });\n  } else {\n    cti.utils.callAction('call-actionflow', { \"name\": \"GetJobHistory\" });\n  }\n} else {\n  cti.utils.callAction('call-actionflow', { \"name\": \"GetJobHistory\" });\n}"},{"name":"fnNavigateSORCodes","type":"scripting","item-type":"function","_auto_id_":"eb9ff795-3914-4ab2-8492-c35b51375282","sync":true,"params":[{"name":"lastPage","description":"Page to navigate to"}],"actions":[],"content":"if(cti.store.jobs.selectedJob == undefined) {\n  cti.store.variables.jobStarted = false;\n} else {\n  if(cti.store.jobs.selectedJob.bJobStartWork) {\n    cti.store.variables.jobStarted = true;\n  } else {\n    cti.store.variables.jobStarted = false;\n  }\n}\n\ncti.store.variables.lastSORPage = lastPage;\ncti.utils.callAction('go-to-page', { \"name\": \"SORLocationSelect\" });"},{"name":"fnNavigateVanStock","type":"scripting","item-type":"function","_auto_id_":"16c6101b-6459-44fc-aab1-169be90594db","sync":true,"params":[{"name":"lastPage","description":"Page to navigate to"}],"actions":[],"content":"if(cti.store.jobs.selectedJob == undefined) {\n  cti.store.variables.jobStarted = false;\n} else {\n  if(cti.store.jobs.selectedJob.bJobStartWork) {\n    cti.store.variables.jobStarted = true;\n  } else {\n    cti.store.variables.jobStarted = false;\n  }\n}\n\ncti.store.variables.lastVanStockPage = lastPage;\ncti.utils.callAction('go-to-page', { \"name\": \"VanLocationSelect\" });"},{"name":"fnNavigateJobMap","type":"scripting","item-type":"function","_auto_id_":"212e237b-1317-4ec1-96b4-cd1672170325","sync":true,"params":[{"name":"lastPage","description":"Page to navigate to"}],"actions":[],"content":"if(cti.store.jobs.selectedJob == undefined) {\n  cti.store.variables.jobStarted = false;\n} else {\n  if(cti.store.jobs.selectedJob.jobtravelstarted) {\n    cti.store.variables.jobStarted = true;\n  } else {\n    cti.store.variables.jobStarted = false;\n  }\n}\n\ncti.store.variables.lastJobMapPage = lastPage;\n\ncti.utils.callAction('go-to-page', { \"name\": \"JobMap\" });"},{"name":"fnNavigateSupportInfo","type":"scripting","item-type":"function","_auto_id_":"9933eab2-ce0f-4818-8225-f081bc215db8","sync":true,"params":[],"content":"cti.store.variables.supportInfo = {\n  \"tokenExpiry\": \"n/a\",\n  \"sessionExpiry\": \"n/a\"\n}\n\nif (cti.store.currentProfile.expiryTime) {\n  cti.store.variables.supportInfo.tokenExpiry = cti.store.currentProfile.expiryTime.toLocaleTimeString();\n}\nif (cti.store.currentProfile.maxLoginDurationExpiry) {\n  cti.store.variables.supportInfo.sessionExpiry = cti.store.currentProfile.maxLoginDurationExpiry.toLocaleTimeString();\n}\n\ncti.store.variables.supportInfoLastPage = cti.store.state.currentPage;\ncti.utils.callAction('go-to-page', { \"name\": \"SupportInfo\" });"},{"name":"fnStartTravel","type":"scripting","item-type":"function","_auto_id_":"3ee41228-92cb-423a-913a-30a0945f1682","sync":true,"params":[],"content":"if(cti.store.jobs.selectedJob.bJobTravelStarted) {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\" : \"app_startedtravel\",\n      \"item-type\" : \"app-notification\",\n      \"style\" : \"Warning\",\n      \"title\" : \"Warning!\",\n      \"text\" : \"You have already started travelling to this job.\"\n    }\n  );\n} else {\n  var d = new Date();\n  var h = (d.getHours()<10?'0':'') + d.getHours();\n  var m = (d.getMinutes()<10?'0':'') + d.getMinutes();\n  var time = h + ':' + m;\n  \n  cti.store.jobs.selectedJob.sJobTravelStartedText = \"En-Route Time\";\n  cti.store.jobs.selectedJob.dtJobTravelStartedDateTime = moment().format();\n  cti.store.jobs.selectedJob.iJobStartedTravelTime = time;\n  cti.store.jobs.selectedJob.iJobStartedTravelHrs = h;\n  cti.store.jobs.selectedJob.iJobStartedTravelMins = m;\n  cti.store.jobs.selectedJob.bJobTravelStarted = true;\n}\n\ncti.utils.updatePage();"},{"name":"app_startedtravel","type":"notification","item-type":"app-notification","_auto_id_":"7c9e2d01-79c2-4a30-b6c3-c2a5e5326152","options":{"autoDismiss":true,"closeButton":true},"style":"warning","actions":[]},{"name":"fnEndTravel","type":"scripting","item-type":"function","_auto_id_":"a3c6b774-00fd-4b48-bdc2-c76433bfb1b9","sync":true,"params":[],"content":"if(cti.store.jobs.selectedJob.bJobTravelEnded) {\n  cti.utils.callAction(\n    \"show-notification\", {\n      \"name\" : \"app_startedtravel\",\n      \"item-type\" : \"app-notification\",\n      \"style\" : \"Warning\",\n      \"title\" : \"Warning!\",\n      \"text\" : \"You have already arrived on-site for this job.\"\n    }\n  );\n} else {\n  var d = new Date();\n  var h = (d.getHours()<10?'0':'') + d.getHours();\n  var m = (d.getMinutes()<10?'0':'') + d.getMinutes();\n  var time = h + ':' + m;\n  \n  var spinner = document.getElementById('arriving-spinner');\n  spinner.classList.remove('fa-fw');\n  spinner.classList.remove('fa-3x');\n  spinner.classList.remove('fa-spin');\n  spinner.classList.remove('fa-spinner');\n  spinner.classList.add('arrived-ticked');\n  \n  cti.store.jobs.selectedJob.sJobTravelEndedText = \"Arrived Time\";\n  cti.store.jobs.selectedJob.dtJobTravelEndedDateTime = moment().format();\n  cti.store.jobs.selectedJob.iJobEndedTravelTime = time;\n  cti.store.jobs.selectedJob.iJobEndedTravelHrs = h;\n  cti.store.jobs.selectedJob.iJobEndedTravelMins = m;\n  cti.store.jobs.selectedJob.bJobTravelEnded = true;\n}\n\ncti.utils.updatePage();","actions":[]},{"name":"fnCheckLoneDevice","type":"scripting","item-type":"function","_auto_id_":"65f51956-9927-4e11-b091-c22df350d982","sync":true,"params":[],"actions":[],"content":"var loneDeviceElement = document.getElementById('lone-device-check');\n\nif(cti.store.jobs.selectedJob.bLoneDeviceStatus) {\n  cti.store.jobs.selectedJob.bLoneDeviceStatus = false;\n  loneDeviceElement.classList.remove('checked-lone');\n  loneDeviceElement.classList.add('unchecked-lone');\n} else {\n  cti.store.jobs.selectedJob.bLoneDeviceStatus = true;\n  loneDeviceElement.classList.remove('unchecked-lone');\n  loneDeviceElement.classList.add('checked-lone');\n}\n\ncti.utils.updatePage();"},{"name":"app_noaccessphoto","type":"notification","item-type":"app-notification","_auto_id_":"76807f63-a986-41cd-bbd0-3cd7726444ea","options":{"autoDismiss":true,"closeButton":true},"style":"warning","actions":[]},{"name":"fnStartJob","type":"scripting","item-type":"function","_auto_id_":"0c8404a3-9144-4f61-8de3-eca920de9041","sync":true,"params":[],"content":"var d = new Date();\nvar h = (d.getHours()<10?'0':'') + d.getHours();\nvar m = (d.getMinutes()<10?'0':'') + d.getMinutes();\nvar time = h + ':' + m;\n\ncti.store.jobs.selectedJob.sJobStartWorkText = \"Job Started Time\";\ncti.store.jobs.selectedJob.iJobStartWorkTime = time;\ncti.store.jobs.selectedJob.iJobStartWorkHrs = h;\ncti.store.jobs.selectedJob.iJobStartWorkMins = m;\ncti.store.jobs.selectedJob.bJobStartWork = true;\n\nif(cti.store.pages.CustomerSignature == undefined) cti.store.pages.CustomerSignature = {};\n\ncti.store.pages.CustomerSignature.tenantHomeNumber = cti.store.jobs.selectedJob.aPropertyDetail.sHome_No;\ncti.store.pages.CustomerSignature.tenantMobileNumber = cti.store.jobs.selectedJob.aPropertyDetail.sMobile_No;\n\ncti.store.variables.jobCollectionType = \"initialvisit\";\ncti.utils.callAction('call-actionflow', { \"name\": \"JobDataCollection\" });\n\ncti.utils.updatePage();"},{"name":"app_timeslot","type":"notification","item-type":"app-notification","_auto_id_":"29c9d79b-3631-49e5-830c-f46ebc4854aa","options":{"autoDismiss":true,"closeButton":true},"style":"warning","actions":[]},{"name":"fnShowMoreInfo","type":"scripting","item-type":"function","_auto_id_":"6528f7e8-92de-4b32-9f5c-dc808d184b1e","sync":true,"params":[{"name":"elementId"}],"content":"var short = document.getElementById('job-info-short');\nvar full = document.getElementById('job-info-full');\n\nif(elementId == \"short\") {\n  short.classList.remove('job-info-hide');\n  full.classList.add('job-info-hide');\n} else {\n  full.classList.remove('job-info-hide');\n  short.classList.add('job-info-hide');\n}\n\ncti.utils.updatePage();","actions":[]},{"name":"app_sorcodematch","type":"notification","item-type":"app-notification","_auto_id_":"3712d60a-bdee-4510-b913-e06263462006","options":{"autoDismiss":true,"closeButton":true},"style":"warning"},{"name":"fnSearchPanel","type":"scripting","item-type":"function","_auto_id_":"5f0a4dd4-3517-495c-90d5-7f3747db42e0","sync":true,"params":[{"name":"menuOption"}],"content":"var panel = document.getElementById('panel');\nvar schedules = document.getElementById('schedules');\nvar search = document.getElementById('search');\n\nif(menuOption == \"schedules\") {\n  panel.classList.remove('sor-search-panel');\n  schedules.classList.remove('sor-search-schedules');\n  search.classList.remove('sor-search-search');\n  \n  panel.classList.add('sor-schedules-panel');\n  schedules.classList.add('sor-schedules-schedules');\n  search.classList.add('sor-schedules-search');\n} else {\n  panel.classList.remove('sor-schedules-panel');\n  schedules.classList.remove('sor-schedules-schedules');\n  search.classList.remove('sor-schedules-search');\n  \n  panel.classList.add('sor-search-panel');\n  schedules.classList.add('sor-search-schedules');\n  search.classList.add('sor-search-search');\n}\n\ncti.store.variables.menuOption = menuOption;\ncti.utils.updatePage();","actions":[]},{"name":"app_sorcodesfailed","type":"notification","item-type":"app-notification","_auto_id_":"4d25b25c-d2a1-4727-938f-7fd0688e85cb","options":{"autoDismiss":true,"closeButton":true},"style":"warning"},{"name":"app_specialordersent","type":"notification","item-type":"app-notification","_auto_id_":"4701139d-40ed-48fb-a942-e57d24eda9d3","options":{"autoDismiss":false,"closeButton":false},"style":"info"},{"name":"app_jobcomplete","type":"notification","item-type":"app-notification","_auto_id_":"253d22c8-7ef5-480c-ab23-f9d7329aaa5f","options":{"autoDismiss":true,"closeButton":true},"style":"info"},{"name":"CT","type":"integration","item-type":"api","_auto_id_":"27d2f7e8-9042-4e4f-b65e-902eeda17b12","headers":{},"params":[],"operations":[{"ttlMinutes":60,"name":"selectappointments","summary":"Selects a list of appointments for follow on bookings","path":"selectappointments","method":"POST","content-type":"application/json","params":[{"name":"data","description":"Data payload","type":"string","typeConfig":{},"in":"body"}],"$open":true}],"url":"http://40.69.196.8:81/api/v1/"}],"components":[{"name":"ContextMenu","description":"","icon":"fa-puzzle-piece","_auto_id_":"9d0ad91e-82cf-454a-8d80-931ec019b6e8","tagName":"context-menu","type":"web-component","format":"javascript","typeVersion":"1","annotations":{"attributes":[{"name":"title","description":"An optional panel title","type":"string","enum":null,"required":false}],"functions":[{"name":"open","description":"Open the context menu","params":[],"returnType":"void","returnEnum":null},{"name":"close","description":"Close the context menu","params":[],"returnType":"void","returnEnum":null}]},"userConfig":{},"valid":true,"files":{"original":"ContextMenu.js","transpiled":"ContextMenu.output.js"}},{"name":"ActivitySpinner","description":"","icon":"fa-puzzle-piece","_auto_id_":"649dedf7-f246-460b-841c-df3adbdf6522","tagName":"load-spinner","type":"web-component","format":"javascript","typeVersion":"1","annotations":{"attributes":[{"name":"message","description":"A message to display whilst the spinner is showing","type":"string","enum":null,"required":false}],"functions":[{"name":"show","description":"Invoke the spinner","params":[],"returnType":"void","returnEnum":null},{"name":"close","description":"Remove/hide the spinner","params":[],"returnType":"void","returnEnum":null}]},"userConfig":{},"valid":true,"files":{"original":"ActivitySpinner.js","transpiled":"ActivitySpinner.output.js"}},{"name":"ListSearcher","description":"Custom search control for lists","icon":"fa-puzzle-piece","_auto_id_":"d9a7540d-769f-4e02-adb9-2148284a8208","tagName":"list-searcher","type":"web-component","format":"javascript","typeVersion":"1","annotations":{"attributes":[{"name":"minCharacters","description":"Min number of characters to be entered before it will auto-search ahead","type":"number","enum":null,"required":false},{"name":"maxResults","description":"Maximum number of results to output (defaults to 30)","type":"number","enum":null,"required":false},{"name":"displayListIfNoSearch","description":"Governs display of results if a search is not active default to 0","type":"number","enum":["0","1"],"required":true},{"name":"sourceObjectArrayName","description":"Name of the source object array you want to search (eg. cti.model.customerList)","type":"string","enum":null,"required":true},{"name":"displayArrayName","description":"Name of the array to populate with search results, which you should then bind to a list (eg. cti.model.mySearchResults)","type":"string","enum":null,"required":true}],"events":[{"name":"searchComplete","description":"Fired when a search has finished actioning","type":"void","enum":null}]},"userConfig":{},"valid":true,"files":{"original":"ListSearcher.js","transpiled":"ListSearcher.output.js"}},{"name":"PhotoManager","description":"Manage photos, capture, delete, store and display","icon":"fa-puzzle-piece","_auto_id_":"98807067-3c95-452a-9d3d-74d7a04fa651","tagName":"photo-manager","type":"web-component","format":"javascript","typeVersion":"1","annotations":{"attributes":[{"name":"captureWidth","description":"Width restriction on captured photos","type":"number","enum":null,"required":false},{"name":"captureHeight","description":"Height restriction on captured photos","type":"number","enum":null,"required":false},{"name":"captureQuality","description":"QUality setting for captured photos","type":"number","enum":["50","75","90","100"],"required":false},{"name":"captureCategory","description":"Optional category identifier to assign to photos when captured.","type":"string","enum":null,"required":false},{"name":"displayCategory","description":"Optional category on which to filter display of photos","type":"string","enum":null,"required":false}],"events":[{"name":"captureComplete","description":"Fired when a photo has been captured","type":"void","enum":null}],"functions":[{"name":"takePhoto","description":"Take a photo","params":[{"name":"filename","description":"A filename to allocate to the capture photo","type":"string","enum":null,"required":false}],"returnType":"void","returnEnum":null},{"name":"deletePhoto","description":"Delete a photo","params":[{"name":"id","description":"The internal id of the photo to remove","type":"string","enum":null,"required":true}],"returnType":"void","returnEnum":null},{"name":"clearPhotos","description":"Clear photos","params":[],"returnType":"void","returnEnum":null}]},"userConfig":{},"valid":true,"files":{"original":"PhotoManager.js","transpiled":"PhotoManager.output.js"}},{"name":"SORSearcher","description":"","icon":"fa-puzzle-piece","_auto_id_":"55b24a7c-9cde-4da4-95b2-8ab725ae8165","tagName":"sor-searcher","type":"web-component","format":"javascript","typeVersion":"1","annotations":{"attributes":[{"name":"minCharacters","description":"Min number of characters to be entered before it will auto-search ahead","type":"number","enum":null,"required":false},{"name":"maxResults","description":"Maximum number of results to output (defaults to 30)","type":"number","enum":null,"required":false},{"name":"displayListIfNoSearch","description":"Governs display of results if a search is not active default to 0","type":"number","enum":["0","1"],"required":true},{"name":"sourceObjectArrayName","description":"Name of the source object array you want to search (eg. cti.model.customerList). If not specified, sordata in pouchdb will be used as the source","type":"string","enum":null,"required":false},{"name":"displayArrayName","description":"Name of the array to populate with search results, which you should then bind to a list (eg. cti.model.mySearchResults)","type":"string","enum":null,"required":true},{"name":"locationFilter","description":"Location id filter by which to restrict result selection (empty value will be unfiltered)","type":"string","enum":null,"required":false}],"events":[{"name":"searchComplete","description":"Fired when a search has finished actioning","type":"void","enum":null}]},"userConfig":{},"valid":true,"files":{"original":"SORSearcher.js","transpiled":"SORSearcher.output.js"}},{"name":"NumericToggler","description":"","icon":"fa-puzzle-piece","_auto_id_":"85bb1332-5b6a-4997-88ea-7a6a9af9e949","tagName":"numeric-toggler","type":"web-component","format":"javascript","typeVersion":"1","annotations":{"attributes":[{"name":"initialQuantity","description":"Starting quantity value","type":"number","enum":null,"required":false},{"name":"canIncrement","description":"Are we able to increment the value","type":"boolean","enum":null,"required":false},{"name":"canDecrement","description":"Are we able to decrement the value","type":"boolean","enum":null,"required":false}],"events":[{"name":"changed","description":"Fired when held value changes","type":"void","enum":null}],"properties":[{"name":"quantity","getter":true,"setter":true,"modelConfig":{"store":false,"changeEvents":[]},"getterDescription":"Get the current quantity","returnType":"number","returnEnum":null,"setterDescription":"Set the quantity","valueType":"number","valueEnum":null},{"name":"canDecrement","getter":true,"setter":true,"modelConfig":{"store":false,"changeEvents":[]},"getterDescription":"Is the user allowed to dec the value?","returnType":"boolean","returnEnum":null,"setterDescription":"Set if the user is allowed to dec the value","valueType":"boolean","valueEnum":null},{"name":"canIncrement","getter":true,"setter":true,"modelConfig":{"store":false,"changeEvents":[]},"getterDescription":"Is the user allowed to inc the value?","returnType":"boolean","returnEnum":null,"setterDescription":"Set if the user is allowed to inc the value","valueType":"boolean","valueEnum":null}],"functions":[{"name":"decrement","description":"Decrement the value in the control","params":[],"returnType":"void","returnEnum":null},{"name":"increment","description":"Increment the current value","params":[],"returnType":"void","returnEnum":null}]},"userConfig":{"properties":{"quantity":{"modelConfig":{"store":false,"changeEvents":[]}},"canDecrement":{"modelConfig":{"store":false,"changeEvents":[]}},"canIncrement":{"modelConfig":{"store":false,"changeEvents":[]}}}},"valid":true,"files":{"original":"NumericToggler.js","transpiled":"NumericToggler.output.js"}}],"icondata":"logo.png","lastSchemaUpgradeDate":"2017-04-24 08:24:40","jwt":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBfaWQiOiJlNTMxZGRlNi1hNDY3LTQ4ODItYTNkMS05NWM0YzU0ZjBhMWYiLCJhcHBfbmFtZSI6IkFjY3VNb2JpbGUiLCJidWlsZF9pZCI6IjY1NjdkZTczLWYwMjUtNDM2NS1iNTA3LTA4NWMxYzgzYTgxNCIsImNsaWVudF9pZCI6ImIzNzg1MjcxLTdlN2UtNGU4OC05NWJjLTIxYmYzNDFmNmYzZSIsImNsaWVudF9zZWNyZXQiOiJlSFl4VjJ0R1ZYZDVLMWhxZEN0alpWazNibXRRZHowOSIsImV4cCI6MTQ5NTYxODYwMywiZnJlcXVlbmN5IjoyMTYwMDAwMDAsImhhc2giOiIzMjI5MTFhOTU4MzA1NmY5ZTg5MTU4Y2YwYWYxOWVlZjViZjU4NDllOTkzOTExYTU4MTEzY2RlNGZiNDAxYzY1IiwibGljX2V4cCI6MTQ5MzAyNjYwMywibHBfaWQiOiJkZGI5OGI0MS0zOTVkLTQ3YjQtOGFiNi0yZDUyOTYyNWMyYzMiLCJwYWNrYWdlX2lkIjoiY29tLmNvbW1vbnRpbWUuYWNjdXNlcnYuUmVzcG9uc2l2ZVJlcGFpcnMiLCJyZWZyZXNoX3Rva2VuIjoiYWxCbGFIVmFhV1JCYldoNGNFWmxUblpsYW5Sa2VEWmtlRmwxUWpGMmIzZFdNME5CYkRKSGFHMHlkejA9IiwidHlwZSI6ImZyZWUiLCJpYXQiOjE0OTMwMjY2MDN9.IRanZOYtGj2wdMHL3Ibl_k0l1x-3GAVMi-CasE8TPU2SvqDqmz9MU3qN1oGG-toELDYDXt4ovycSQVTxZCGno9tuDUFW0dxwCNCDcEdhn2C8iuy_843aYGH4QGdZd0afISy_WScgEFbcgOmhWb4aLAWzcirsLmIIWDgjqja0tGCNxMWfjuNgrjx2r63Zw0HEPlOBpvRsb6-xZCSjkkvcoTYqeGjyA1V_uJJ8Dp78RURKzsx67U6LhD_4Tx4vnU7SaeBtU3ZuYUpM17P6T_7_9Kadpv_itW1jDaPAGfUw223ZSNVd8-S9kFJqDAyUsBnSSE6LKBpGtJBnGtLnSvZQBQ","buildId":"6567de73-f025-4365-b507-085c1c83a814","hostContext":0}